[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Does Sleep Regularity Worsen Over the Third Trimester of Pregnancy?",
    "section": "",
    "text": "Welcome\nThis book represents an collection of data reports related to the study: Does Sleep Regularity Worsen Over the Third Trimester of Pregnancy?.\nAll analyses presented in this document are fully reproducible and were conducted using the Quarto publishing system and the R programming language. Click here or on the GitHub icon in the menu to explore the code. The research compendium is also accessible by clicking here via The Open Science Framework.",
    "crumbs": [
      "Welcome"
    ]
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "Does Sleep Regularity Worsen Over the Third Trimester of Pregnancy?",
    "section": "License",
    "text": "License\n \nThe code in this repository is licensed under the GNU General Public License Version 3, while the documents are available under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International.\nThe research data is subject to a private license and is not publicly available due to privacy and ethical considerations.\nCopyright (C) 2025 Alícia Rafaelly Vilefort Sales\n\nThe code in this repository is free software: you can redistribute it and/or\nmodify it under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or (at your\noption) any later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with\nthis program. If not, see &lt;https://www.gnu.org/licenses/&gt;.",
    "crumbs": [
      "Welcome"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html",
    "href": "qmd/exploratory-analysis.html",
    "title": "\n1  Exploratory Analysis\n",
    "section": "",
    "text": "1.1 Set the Environment",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#set-the-environment",
    "href": "qmd/exploratory-analysis.html#set-the-environment",
    "title": "\n1  Exploratory Analysis\n",
    "section": "",
    "text": "1.1.1 Load Packages\n\nCodelibrary(actverse) # github.com/danielvartan/actverse\nlibrary(askpass)\nlibrary(car)\nlibrary(checkmate)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(googlesheets4)\nlibrary(grDevices)\nlibrary(here)\nlibrary(hms)\nlibrary(lubridate)\nlibrary(lubritime) # github.com/danielvartan/lubritime\nlibrary(orbis) # github.com/danielvartan/orbis\nlibrary(osfr)\nlibrary(plotr) # github.com/danielvartan/plotr\nlibrary(rutils) # github.com/danielvartan/rutils\nlibrary(scaler) # github.com/danielvartan/scaler\nlibrary(scales)\nlibrary(sodium)\nlibrary(stats)\nlibrary(stringr)\nlibrary(summarytools)\nlibrary(tidyr)\n\n\n\n1.1.2 Load Custom Functions\n\nCodesource(here(\"R\", \"anonymize_id.R\"))\n\n\n\n1.1.3 Set Data Directories\n\nCodedata_dir &lt;- here(\"data\")\nprocessed_data_dir &lt;- here(\"data\", \"processed\")\nprocessed_actigraphy_data_dir &lt;- here(\"data\", \"processed\", \"actigraphy\")\nsri_data_dir &lt;- here(\"data\", \"sri\")\nsleep_prop_dir &lt;- here(\"data\", \"sleep-prop\")\nlux_data_dir &lt;- here(\"data\", \"lux\")\n\n\n\nCodefor (i in ls(pattern = \"_dir$\")) {\n  if (!dir_exists(get(i))) dir_create(get(i), recurse = TRUE)\n}\n\n\n\n1.1.4 Set Keys\n\nCodegs4_auth(\n  cache = here(\".secrets\"),\n  email = TRUE,\n  use_oob = FALSE\n)\n\n\n\nCodesalt &lt;- Sys.getenv(\"PREGNANCY_SALT\") # askpass()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#setting-parameters",
    "href": "qmd/exploratory-analysis.html#setting-parameters",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.2 Setting Parameters",
    "text": "1.2 Setting Parameters\n\nCodeprettycheck:::assert_interactive()\n\ngooglesheets4::gs4_auth()\n\n\n\nCodeprettycheck:::assert_interactive()\n\nosfr::osf_auth()\n\n\n\nCodeprivate_key_path &lt;- here(\"_ssh\", \"id_rsa\")\n\n\n\nCodepassword &lt;- askpass::askpass()\n\n\n\nCodesalt &lt;- askpass::askpass()\n\n\n\nCodepublic_key_path &lt;- here(\"_ssh\", \"id_rsa.pub\")",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#getting-data-from-google-sheets",
    "href": "qmd/exploratory-analysis.html#getting-data-from-google-sheets",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.3 Getting Data from Google Sheets",
    "text": "1.3 Getting Data from Google Sheets\nThe following are internal data collected and organized using a Google Form to facilitate the management of the study.\n\nCodecontrol_form &lt;- googlesheets4::read_sheet(\n  ss = \"13wtDr4fRD1wJSM-qdLOdGSchF8oXU1bG0Jtccu24GhY\",\n  sheet = \"Dataset\",\n  col_types = \"c\"\n)\n\n\nThe following are data extracted from the Google Form used to collect data from the participants of the study.\n\nCodefield_form &lt;- googlesheets4::read_sheet(\n  ss = \"1tY_TT0nPXFsErYQS2VED0-hqTzgHudA9BfhRhYG19fw\",\n  sheet = \"Dataset\",\n  col_types = \"c\"\n)\n\n\nThe sleep data were extracted using the Condor Instrument ActStudio software and subsequently formatted in Google Sheets for further analysis.\n\nCodesleep_input &lt;- googlesheets4::read_sheet(\n  ss = \"1iqjhdSiWYr9RYSvIvJQfFw35DR31YA_oj2SW8iR5WPw\",\n  sheet = \"Dataset\",\n  col_types = \"c\"\n)\n\n\nMedical records were obtained from participants’ medical files and organized in Google Sheets for subsequent analysis.\n\nCodemedical_record_input &lt;- googlesheets4::read_sheet(\n  ss = \"10yvvTOCjZsRKPO8A4yn0NCvWe4Jn_Kq-Zu_CV4miGJI\",\n  sheet = \"Dataset\",\n  col_types = \"c\"\n)",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#processing-the-google-sheets-data",
    "href": "qmd/exploratory-analysis.html#processing-the-google-sheets-data",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.4 Processing the Google Sheets Data",
    "text": "1.4 Processing the Google Sheets Data\n\nCodecontrol_data &lt;-\n  control_form |&gt;\n  `names&lt;-`(paste0(\"X\", seq_along(control_form))) |&gt;\n  dplyr::select(X5, X6, X7, X12, X13, X14) |&gt;\n  rename(\n    cpf = X5,\n    id = X6,\n    name = X7,\n    birth_center_delivery = X12,\n    birth = X13,\n    labor_start = X14\n  ) |&gt;\n  mutate(\n    birth_center_delivery = case_when(\n      tolower(trimws(birth_center_delivery)) == \"sim\" ~ TRUE,\n      tolower(trimws(birth_center_delivery)) == \"não\" ~ FALSE,\n      TRUE ~ NA\n    ),\n    birth = lubridate::as_datetime(birth),\n    labor_start = lubridate::as_datetime(labor_start)\n  ) |&gt;\n  mutate(\n    labor_duration =\n      lubridate::interval(\n        start = labor_start,\n        end = birth\n      ) |&gt;\n        lubritime::int_duration()\n  ) |&gt;\n  filter(!is.na(labor_duration)) |&gt;\n  dplyr::select(id, birth_center_delivery, labor_start, labor_duration)\n\ncontrol_data\n\n\n\nCodefield_form_data &lt;-\n  field_form |&gt;\n  `names&lt;-`(paste0(\"X\", seq_along(field_form))) |&gt;\n  dplyr::select(\n    X1, X4, X5, X11, X91, X92, X95, X96, X97, X99, X101, X102, X106, X119,\n    X118, X125, X126\n  ) |&gt;\n  rename(\n    timestamp = X1,\n    birth_date = X4,\n    cpf = X5,\n    weight_before = X96,\n    weight_current = X95,\n    height = X97,\n    ethnicity = X106,\n    education = X118,\n    family_income = X99,\n    health_plan = X101,\n    solo = X102,\n    exercise = X119,\n    work = X92,\n    study = X91,\n    gestations = X11,\n    deliveries = X125,\n    abortions = X126\n  ) |&gt;\n  mutate(\n    id = anonymize_id(cpf, salt),\n    timestamp = lubridate::mdy_hms(timestamp),\n    birth_date = lubridate::dmy(birth_date),\n    age = scaler:::age(birth_date, timestamp),\n    ethnicity = factor(\n      ethnicity,\n      levels = c(\n        \"Indígena\",\n        \"Preta\",\n        \"Parda\",\n        \"Amarela\",\n        \"Branca\"\n      ),\n      ordered = TRUE\n    ),\n    education = factor(\n      education,\n      levels = c(\n        \"Não frequentou a escola\",\n        \"Fundamental incompleto\",\n        \"Fundamental completo\",\n        \"Ensino médio incompleto\",\n        \"Ensino médio completo\",\n        \"Ensino superior incompleto\",\n        \"Ensino superior completo\",\n        \"Mestrado incompleto\",\n        \"Mestrado completo\",\n        \"Doutorado incompleto\",\n        \"Doutorado completo\",\n        \"Pós-doutorado incompleto\",\n        \"Pós-doutorado completo\"\n      ),\n      ordered = TRUE\n    ),\n    gestations = case_match(\n      gestations,\n      c(\"Sim\", \"0\") ~ \"1\",\n      \"Não\" ~ \"0\",\n      .default = gestations\n    ),\n    deliveries = case_when(\n      is.na(deliveries) ~ \"0\",\n      TRUE ~ deliveries\n    ),\n    abortions = case_when(\n      is.na(abortions) ~ \"0\",\n      TRUE ~ abortions\n    )\n  ) |&gt;\n  mutate(\n    across(\n      .cols = all_of(\n        c(\n          \"weight_before\", \"weight_current\", \"height\",\n          \"family_income\", \"gestations\", \"deliveries\",\n          \"abortions\"\n        )\n      ),\n      .fns = as.numeric\n    )\n  ) |&gt;\n  mutate(\n    across(\n      .cols = all_of(\n        c(\"health_plan\", \"solo\", \"exercise\", \"work\", \"study\")\n      ),\n      .fns = function(x) {\n        case_match(\n          x,\n          \"Sim\" ~ TRUE,\n          \"Não\" ~ FALSE\n        )\n      }\n    )\n  ) |&gt;\n  mutate(\n    gestations = case_when(\n      id == \"ae5fc5cd\" ~ 3,\n      TRUE ~ gestations\n    ),\n  ) |&gt;\n  mutate(\n    bmi_before = weight_before / ((height / 100)^2),\n    bmi_current = weight_current / ((height / 100)^2)\n  ) |&gt;\n  dplyr::select(-cpf) |&gt;\n  relocate(\n    id, timestamp, birth_date, age, weight_before, weight_current, height, bmi_before, bmi_current, family_income\n  )\n\nfield_form_data\n\n\n\nCodesleep_data &lt;-\n  sleep_input |&gt;\n  mutate(\n    across(\n      .cols = matches(\"^his_|^hfs_|^fps_|^tts_m|^tts_sd|^waso_\"),\n      .fns = hms::parse_hms\n    ),\n    across(\n      .cols = matches(\"^tts_fps_|^awakenings_\"),\n      .fns = as.numeric\n    )\n  )\n\nsleep_data\n\n\n\nCodemedical_record_data &lt;-\n  medical_record_input |&gt;\n  mutate(\n    across(\n      .cols = all_of(c(\"partograph_begin\", \"baby_birth\")),\n      .fns = ~ lubridate::ymd_hms(.x, tz = \"America/Sao_Paulo\")\n    ),\n    across(\n      .cols = -all_of(c(\"id\", \"partograph_begin\", \"baby_birth\")),\n      .fns = as.numeric\n    ),\n    across(\n      .cols = matches(\"^begin_dilation$|^apgar_\"),\n      .fns = as.integer\n    )\n  ) |&gt;\n  mutate(\n    partogram_duration =\n      lubridate::interval(\n        start = partograph_begin,\n        end = baby_birth\n      ) |&gt;\n        lubritime::int_duration()\n  )\n\nmedical_record_data\n\n\n\nCodevalid_cases &lt;-\n  field_form_data |&gt;\n  left_join(\n    control_data,\n    by = \"id\"\n  ) |&gt;\n  left_join(\n    sleep_data,\n    by = \"id\"\n  ) |&gt;\n  left_join(\n    medical_record_data,\n    by = \"id\"\n  ) |&gt;\n  filter(birth_center_delivery == TRUE) |&gt;\n  drop_na(labor_duration, baby_weight, fps_mean, waso_mean) |&gt;\n  pull(id)\n\nvalid_cases\n\n\n\nCodegeneral_data &lt;-\n  control_data |&gt;\n  left_join(\n    sleep_data,\n    by = \"id\"\n  ) |&gt;\n  left_join(\n    medical_record_data,\n    by = \"id\"\n  ) |&gt;\n  left_join(\n    field_form_data,\n    by = \"id\"\n  ) |&gt;\n  mutate(\n    waso_prop = (as.numeric(waso_mean)) / as.numeric(fps_mean)\n  ) |&gt;\n  filter(id %in% valid_cases)",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#getting-data-from-osf",
    "href": "qmd/exploratory-analysis.html#getting-data-from-osf",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.5 Getting Data from OSF",
    "text": "1.5 Getting Data from OSF\n\nCodedata_dir &lt;- here(\"data\")\n\n\n\nCodeif (!dir.exists(data_dir)) dir.create(data_dir)\n\n\n\nCodevalid_cases_pattern &lt;- paste0(\"^\", valid_cases, collapse = \"|\")\n\n\n\nCodeosf_processed_data_id &lt;- \"a2dsw\"\n\n\n\nCodeosf_processed_data_id |&gt;\n  osfr::osf_retrieve_node() |&gt;\n  osfr::osf_ls_files(n_max = Inf) |&gt;\n  filter(name == \"actigraphy\") |&gt;\n  pull(id) |&gt;\n  osfr::osf_retrieve_file() |&gt;\n  osfr::osf_ls_files(n_max = Inf) |&gt;\n  filter(str_detect(name, valid_cases_pattern)) |&gt;\n  filter(str_detect(name, \"actigraphy-processed-data\")) |&gt;\n  osfr::osf_download(\n    path = data_dir,\n    conflicts = \"overwrite\",\n    progress = TRUE\n  )\n\n\n\nCodeosf_raw_data_id &lt;- \"7kg34\"\n\n\n\nCodeosf_raw_data_id |&gt;\n  osfr::osf_retrieve_node() |&gt;\n  osfr::osf_ls_files(n_max = Inf) |&gt;\n  filter(name == \"medical-record\") |&gt;\n  pull(id) |&gt;\n  osfr::osf_retrieve_file() |&gt;\n  osfr::osf_ls_files(n_max = Inf) |&gt;\n  filter(str_detect(name, valid_cases_pattern)) |&gt;\n  osfr::osf_download(\n    path = data_dir,\n    conflicts = \"overwrite\",\n    progress = TRUE\n  )\n\n\n\nCodevalid_cases |&gt;\n  setdiff(\n    test |&gt;\n    pull(name) |&gt;\n    str_extract(\".*(?=_medical)\")\n  )\n\n\n\nCodedata_dir |&gt;\n  lockr::unlock_dir(\n    private_key = private_key_path,\n    password = password\n  )\n\n\nThe actogram presented in the article was created using the ActStudio software.\n\nCodegeneral_data |&gt; glimpse()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#qualitative-variables",
    "href": "qmd/exploratory-analysis.html#qualitative-variables",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.6 Qualitative Variables",
    "text": "1.6 Qualitative Variables\nCodegeneral_data |&gt; summarytools::freq(ethnicity, style = \"rmarkdown\")\nCodegeneral_data |&gt; summarytools::freq(education,  style = \"rmarkdown\")\nCodegeneral_data |&gt; summarytools::freq(solo,  style = \"rmarkdown\")",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#quantitative-variables",
    "href": "qmd/exploratory-analysis.html#quantitative-variables",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.7 Quantitative Variables",
    "text": "1.7 Quantitative Variables\n\n1.7.1 Days from Actigraphy Processed Data\n\nCodeids &lt;- model_data |&gt; pull(id) |&gt; unique()\n\n\n\nCodefiles &lt;-\n  dir_ls(\n    path = processed_actigraphy_data_dir,\n    type = \"file\",\n    regexp = paste0(ids, \"_actigraphy-processed-data.rds$\", collapse = \"|\")\n  )\n\n\n\nCodedays_by_id &lt;- tibble()\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_actigraphy-processed-data.rds\")\n  i_data &lt;- i |&gt; read_rds()\n  i_start &lt;- i_data |&gt; pull(timestamp) |&gt; first()\n  i_end &lt;- i_data |&gt; pull(timestamp) |&gt; last()\n\n  days_by_id &lt;-\n    tibble(\n      id = i_id,\n      days = (i_end - i_start) |&gt; as.numeric()\n    ) |&gt;\n    bind_rows(days_by_id)\n}\n\n\n\nCodedays_by_id &lt;- days_by_id |&gt; arrange(id)\n\n\n\nCodedays_by_id |&gt; print(n = Inf)\n\n\n\nCodedays_by_id |&gt; pull(days) |&gt; summary()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#partogram-duration-model",
    "href": "qmd/exploratory-analysis.html#partogram-duration-model",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.8 Partogram Duration Model",
    "text": "1.8 Partogram Duration Model\n\nCodeform &lt;- formula(partogram_duration ~ begin_dilation + baby_head_perimeter + baby_abdominal_perimeter)\n\n# baby_weight\n# baby_length\n# baby_head_perimeter\n# baby_thoracic_perimeter\n# baby_abdominal_perimeter\n\n\n\nCodemodel &lt;-\n  parsnip::linear_reg() |&gt;\n  parsnip::set_engine(\"lm\")\n\n\n\nCodefit &lt;-\n  model |&gt;\n  parsnip::fit(\n    formula = form,\n    data = medical_record_data\n  )\n\n\n\nCodefit |&gt;\n  broom::tidy() |&gt;\n  print(n = Inf)\n\n\n\nCodefit |&gt;\n  broom::glance() |&gt;\n  pivot_longer(cols = everything()) |&gt;\n  print(n = Inf)\n\n\n\nCodefit_augment &lt;- fit |&gt; broom::augment(new_data = medical_record_data)\n\n\n\nCodefit_error &lt;-\n  fit_augment |&gt;\n  transmute(\n    .pred = .pred,\n    .resid = .resid,\n    partogram_duration = partogram_duration |&gt; as.numeric(),\n    error = .resid / partogram_duration\n  )\n\n\n\nCodefit_augment &lt;-\n  fit |&gt;\n  broom::augment(\n    new_data = tibble(\n      begin_dilation = 1\n    )\n  )\n\n\n\nCodemedical_record_data |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x = partogram_duration,\n      y = begin_dilation\n    )\n  ) +\n  ggplot2::geom_point() +\n  ggplot2::geom_smooth(\n    method = \"lm\",\n    color = \"#FC2913\"\n  ) +\n  ggplot2::labs(\n    x = \"Duração do partograma (h)\",\n    y = \"Dilat. do colo do útero (cm)\"\n  ) +\n  ggplot2::scale_x_time()\n\n\n\n1.8.1 Correlation Matrices\n\nCodegeneral_data |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"labor_duration\", \"age\", \"family_income\", \"bmi_before\"\n    ),\n    labels = c(\n      \"Duração do parto\", \"Idade\", \"Renda familiar\", \"IMC\"\n    )\n  )\n\n\n\nCodegeneral_data |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"labor_duration\", \"gestations\", \"deliveries\", \"abortions\"\n    ),\n    labels = c(\n      \"Duração do parto\", \"# Gestações\", \"# Partos\", \"# Abortos\"\n    )\n  )\n\n\n\nCodegeneral_data |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"labor_duration\", \"baby_weight\", \"baby_length\",\n      \"baby_head_perimeter\",  \"baby_thoracic_perimeter\",\n      \"baby_abdominal_perimeter\"\n    ),\n    labels = c(\n      \"Duração do parto\", \"Peso do bebê\", \"Comprimento do bebê\",\n      \"Per. da cabeça do bebê\", \"Per. torácico do bebê\", \"Per. abdominal do bebê\"\n    )\n  )\n\n\n\nCodegeneral_data |&gt;\n  plotr:::plot_ggally(\n    cols = c(\"labor_duration\", \"fps_mean\", \"waso_mean\", \"awakenings_mean\"),\n    labels = c(\"Duração do parto\", \"FPS\", \"WASO\", \"Desp.\")\n  )\n\n\n\nCodegeneral_data |&gt;\n  mutate(\n    his_mean = his_mean |&gt; lubritime::link_to_timeline(),\n    hfs_mean = hfs_mean |&gt; lubritime::link_to_timeline()\n  ) |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"his_mean\", \"hfs_mean\", \"fps_mean\", \"tts_mean\", \"tts_fps_mean\",\n       \"waso_mean\", \"awakenings_mean\"\n    ),\n    labels = c(\n      \"HIS\", \"HFS\", \"FPS\", \"TTS\", \"TTS/FPS\", \"WASO\", \"Desp.\"\n    )\n  )\n\n\n\nCodegeneral_data |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"fps_mean\", \"tts_mean\", \"waso_mean\", \"awakenings_mean\",\n      \"age\", \"family_income\", \"bmi_before\"\n    ),\n    labels = c(\n      \"FPS\", \"TTS\", \"WASO\", \"Desp.\", \"Idade\", \"Renda\", \"IMC\"\n    )\n  )\n\n\n\nCodegrDevices::dev.off()\n\n\n\n1.8.2 Actograms\n\nCodeactigraphy_data &lt;-\n  here(\"data\") |&gt;\n  dir_ls(type = \"file\") |&gt;\n  str_subset(paste0(\"f1e30a89\")) |&gt;\n  read_acttrust(tz = \"America/Sao_Paulo\")\n\n\n\nCodeactigraphy_data |&gt;\n  actogram(\n    days = -1,\n    latitude = brazil_state_latitude(\"sp\"),\n    longitude = brazil_state_longitude(\"sp\")\n    # locale = \"pt_BR.UTF-8\",\n    # x_label = \"2 Dias — Horas\",\n    # y_label = \"Dias\",\n    # labels = c(\n    #   \"1\" = \"Sono\",\n    #   \"2\" = \"Despertar\",\n    #   \"4\" = \"Offwrist\",\n    #   \"base\" = \"Atividade (PIM)\",\n    #   \"lp\" = \"Fase clara\",\n    #   \"dp\" = \"Fase escura\"\n    # ),\n    # colors = c(\n    #   \"1\" = \"#410085\",\n    #   \"2\" = \"#FFB426\",\n    #   \"4\" = \"#FC2913\",\n    #   \"base\" = \"#000040\",\n    #   \"lp\" = \"#FFFFFF\",\n    #   \"dp\" = \"#DBD7D3\"\n    # )\n  )\n\n\n\n1.8.3 Sleep Irregularity Index (SRI)\n\n\n\n\n\n\nSee the SRI Analysis Report for statistics and visualizations related to Sleep Irregularity Index (SRI).\n\n\n\n\n1.8.4 Sleep Proportions\n\n\n\n\n\n\nSee the SRI Analysis Report for statistics and visualizations related to Sleep Proportions.\n\n\n\n\n1.8.5 Illuminance Levels\n\n\n\n\n\n\nSee the SRI Analysis Report for statistics and visualizations related to Illuminance Levels.\n\n\n\n\n1.8.6 Groups\n\nCodegroup_data &lt;-\n  control_data |&gt;\n  left_join(\n    sleep_data,\n    by = \"id\"\n  ) |&gt;\n  left_join(\n    medical_record_data,\n    by = \"id\"\n  ) |&gt;\n  filter(id %in% valid_cases) |&gt;\n  dplyr::select(labor_duration, fps_mean, waso_mean, baby_weight) |&gt;\n  drop_na() |&gt;\n  mutate(\n    waso_prop = (as.numeric(waso_mean)) / as.numeric(fps_mean),\n    group_fps =\n      case_when(\n        fps_mean &lt; hms::parse_hm(\"07:00\") ~ \"&lt;7h (Poor)\",\n        fps_mean &gt;= hms::parse_hm(\"07:00\") ~ \"&gt;7h (Good)\"\n      ) |&gt;\n      factor(levels = c(\"&lt;7h (Poor)\", \"&gt;7h (Good)\")),\n    group_waso =\n      case_when(\n        waso_prop &gt; 0.1 ~ \"&gt;10% (Poor)\",\n        waso_prop &lt; 0.1 ~ \"&lt;10% (Good)\"\n      ) |&gt;\n      factor(levels = c(\"&gt;10% (Poor)\", \"&lt;10% (Good)\"))\n  ) |&gt;\n  drop_na()\n\n\nCoderow_list &lt;- list(\n  c(\"group_waso\", \"&gt;10% (Poor)\"),\n  c(\"group_waso\", \"&lt;10% (Good)\"),\n  c(\"group_fps\", \"&lt;7h (Poor)\"),\n  c(\"group_fps\", \"&gt;7h (Good)\")\n)\n\nout &lt;- tibble()\n\nfor (i in row_list) {\n  out &lt;-\n    out |&gt;\n    bind_rows(\n    tibble(\n      n =\n        group_data |&gt;\n        filter(!!as.symbol(i[1]) == i[2]) |&gt;\n        nrow(),\n      mean =\n        group_data |&gt;\n        filter(!!as.symbol(i[1]) == i[2]) |&gt;\n        pull(labor_duration) |&gt;\n        as.numeric() |&gt;\n        mean(na.rm = TRUE),\n      sd =\n        group_data |&gt;\n        filter(!!as.symbol(i[1]) == i[2]) |&gt;\n        pull(labor_duration) |&gt;\n        as.numeric() |&gt;\n        stats::sd(na.rm = TRUE),\n      labor_duration = paste0(\n        mean |&gt;\n          hms::as_hms() |&gt;\n          lubritime::round_time() |&gt;\n          as.character(),\n        \" ± \",\n        sd |&gt;\n          hms::as_hms() |&gt;\n          lubritime::round_time() |&gt;\n          as.character()\n      )\n    ) |&gt;\n      mutate(group = i[2]) |&gt;\n      dplyr::select(group, everything())\n  )\n}\n\nout |&gt;\n  dplyr::select(n, labor_duration) |&gt;\n  as.data.frame() %&gt;%\n  `row.names&lt;-`(\n    c(\n      \"WASO &gt;10% (Poor)\",\n      \"WASO &lt;10% (Good)\",\n      \"FPS &lt;7h (Poor)\",\n      \"FPS &gt;7h (Good)\"\n    )\n  )\n\n\nTable 1.1: Source: Created by the author\n\nDiferenças na duração do trabalho de parto em função do tempo acordado após o início do sono (Wake After Sleep Onset (WASO)) e da duração do sono (Fase Principal do Sono (FSP)). NA = Não disponível (Not Available). (\\(n = 8\\)).\n\n\n\n\n1.8.6.1 FSP\n\nCodegroup_data |&gt;\n  plot_ggally(\n    cols = c(\"labor_duration\", \"baby_weight\", \"fps_mean\", \"group_fps\"),\n    mapping = ggplot2::aes(color = group_fps)\n  )\n\n\nCodegroup_data |&gt;\n  mutate(\n    labor_duration =\n      labor_duration |&gt;\n      as.numeric() |&gt;\n      hms::as_hms(),\n    group_fps = case_match(\n      group_fps,\n      \"&lt;7h (Poor)\" ~ \"&lt;7h (Ruim)\",\n      \"&gt;7h (Good)\" ~ \"&gt;7h (Bom)\"\n    )\n  ) |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x = labor_duration,\n      y = baby_weight,\n      color = group_fps\n    )\n  ) +\n  ggplot2::geom_point() +\n  ggplot2::stat_smooth(method = lm) +\n  ggplot2::labs(\n    x = \"Duração do parto\",\n    y = \"Peso do bebê (g)\",\n    color = \"FPS\"\n  ) +\n  ggplot2::scale_x_continuous(labels = labels_hms) +\n  viridis::scale_color_viridis(end = 0.5, discrete = TRUE)\n\n\nFigure 1.1: Fonte: Elaborado pela autora.\n\nRelação da variável labor_duration (Duração do parto) com a covariante baby_weight (Peso do bebê) (gramas) por grupos com duração de sono baixa/ruim (&lt;7h) (cor roxa) e com duração de sono boa/adequada (&gt;7h) (cor verde).  A duração do sono foi medida por meio da média da Fase Principal de Sono (FSP) nos últimos sete dias que antecederam o parto. As linhas representam regressões lineares. A área cinza representa o intervalo de confiança da estimativa.\n\n\n\n\n1.8.6.2 WASO\n\nCodegroup_data |&gt;\n  plot_ggally(\n    cols = c(\"labor_duration\", \"baby_weight\", \"waso_prop\", \"group_waso\"),\n    mapping = ggplot2::aes(color = group_waso)\n  )\n\n\nCodegroup_data |&gt;\n  mutate(\n    labor_duration =\n      labor_duration |&gt;\n      as.numeric() |&gt;\n      hms::as_hms(),\n    group_waso = case_match(\n      group_waso,\n      \"&gt;10% (Poor)\" ~ \"&gt;10% (Ruim)\",\n      \"&lt;10% (Good)\" ~ \"&lt;10% (Bom)\"\n    )\n  ) |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x = labor_duration,\n      y = baby_weight,\n      color = group_waso\n    )\n  ) +\n  ggplot2::geom_point() +\n  ggplot2::stat_smooth(method = lm) +\n  ggplot2::labs(\n    x = \"Duração do parto\",\n    y = \"Peso do bebê (g)\",\n    color = \"WASO\"\n  ) +\n  ggplot2::scale_x_continuous(labels = labels_hms) +\n  viridis::scale_color_viridis(end = 0.5, discrete = TRUE, direction = -1) +\n  ggplot2::guides(color = ggplot2::guide_legend(reverse = TRUE))\n\n\nFigure 1.2: Fonte: Elaborado pela autora.\n\nRelação da variável labor_duration (Duração do parto) com a covariante baby_weight (Peso do bebê) (em gramas) por grupos com baixa qualidade de sono (&gt;10% de WASO/FPS) (cor roxa) e com qualidade de sono boa/adequada (&lt;10% de WASO/FPS) (cor verde).  Os dados se referem aos últimos sete dias que antecederam o parto. FPS = Fase Principal do Sono, representando a duração do período entre o horário de início do sono e o horário final do sono. WASO = Wake After Sleep Onset ou tempo acordado após o início do sono, usado como proxy para medir a qualidade do sono. As linhas representam regressões lineares. A área em cinza representa o intervalo de confiança da estimativa.",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#hypothesis-testing-sleep-and-labor-duration",
    "href": "qmd/exploratory-analysis.html#hypothesis-testing-sleep-and-labor-duration",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.9 Hypothesis Testing (Sleep and Labor Duration)",
    "text": "1.9 Hypothesis Testing (Sleep and Labor Duration)\n\nVariável dependente: labor_duration\n\n\\[\n\\begin{cases}\n\\text{H}_{0}: \\overline{X}_{\\text{Ruim}} &lt;= \\overline{X}_{\\text{Bom}} \\\\\n\\text{H}_{a}: \\overline{X}_{\\text{Ruim}} &gt; \\overline{X}_{\\text{Bom}}\n\\end{cases}\n\\]\n\nSee Ellis (2010) to learn more about Hedges’ g and other effect size measures.\n\n\\[\n\\text{g de Hedges} = \\cfrac{\\overline{\\text{X}}_{\\text{Ruim}} - \\overline{\\text{X}}_{\\text{Bom}}}{\\text{SD}_{\\text{pooled}}}\n\\]\n\nCodemodel_data &lt;-\n  control_data |&gt;\n  left_join(\n    sleep_data,\n    by = \"id\"\n  ) |&gt;\n  left_join(\n    medical_record_data,\n    by = \"id\"\n  ) |&gt;\n  filter(id %in% valid_cases) |&gt;\n  dplyr::select(labor_duration, fps_mean, waso_mean, baby_weight) |&gt;\n  drop_na()\n\nmodel_data\n\n\n\n1.9.1 FPS (Fase Principal do Sono) (Main Sleep Phase)\n\n\n\n\n\n\nTipConsensus Statement\n\n\n\n\nAdults should sleep 7 or more hours per night on a regular basis to promote optimal health.\nSleeping less than 7 hours per night on a regular basis is associated with adverse health outcomes, including weight gain and obesity, diabetes, hypertension, heart disease and stroke, depression, and increased risk of death. Sleeping less than 7 hours per night is also associated with impaired immune function, increased pain, impaired performance, increased errors, and greater risk of accidents.\nSleeping more than 9 hours per night on a regular basis may be appropriate for young adults, individuals recovering from sleep debt, and individuals with illnesses. For others, it is uncertain whether sleeping more than 9 hours per night is associated with health risk.\nPeople concerned they are sleeping too little or too much should consult their healthcare provider.\n\n(Watson et al., 2015)\n\n\n\nCodemodel_data_fps &lt;-\n  model_data |&gt;\n  dplyr::select(labor_duration, fps_mean, baby_weight) |&gt;\n  mutate(\n    group =\n      case_when(\n        fps_mean &lt; hms::parse_hm(\"07:00\") ~ \"Poor\",\n        fps_mean &gt;= hms::parse_hm(\"07:00\") ~ \"Good\"\n      ) |&gt;\n      factor(levels = c(\"Poor\", \"Good\"))\n  ) |&gt;\n  mutate(\n    labor_duration = as.numeric(labor_duration)\n  ) |&gt;\n  relocate(group) |&gt;\n  dplyr::select(group, labor_duration, baby_weight) |&gt;\n  drop_na()\n\nmodel_data_fps\n\n\n\nCodemodel_data_fps |&gt; report::report()\n\n\n\n1.9.1.1 Welch’s T-Test\n\n1.9.1.1.1 Power Analysis (a posteriori)\n\nSee the a priori power analysis at https://danielvartan.github.io/sample-size.\n\nDesired power: \\((1 - \\beta) \\geq 0.8\\)\n\nCode# A posteriori\n\npwr_analysis_fps_anconva &lt;- pwrss::pwrss.t.2means(\n  mu1 = model_data_fps |&gt; get_labor_duration(\"Poor\") |&gt; mean(na.rm = TRUE),\n  mu2 = model_data_fps |&gt; get_labor_duration(\"Good\") |&gt; mean(na.rm = TRUE),\n  sd1 = model_data_fps |&gt; get_labor_duration(\"Poor\") |&gt; stats::sd(na.rm = TRUE),\n  sd2 = model_data_fps |&gt; get_labor_duration(\"Good\") |&gt; stats::sd(na.rm = TRUE),\n  paired = FALSE,\n  n2 = model_data_fps |&gt; get_n(\"Good\"),\n  kappa = get_n(model_data_fps, \"Poor\") / get_n(model_data_fps, \"Good\"),\n  power = NULL,\n  alpha = 0.05,\n  welch.df = TRUE,\n  alternative = \"superior\"\n)\n\n\n\n\n1.9.1.1.2 Test\n\nCodemodel_t_test_fps &lt;- stats::t.test(\n  x = model_data_fps |&gt; get_labor_duration(\"Poor\"),\n  y = model_data_fps |&gt; get_labor_duration(\"Good\"),\n  alternative = \"greater\"\n)\n\nmodel_t_test_fps\n\n\n\nCodereport::report(model_t_test_fps)\n\n\n\n1.9.1.1.3 Effect Size\n\nCodetibble(\n  fps_mean_poor =\n    model_data_fps |&gt;\n    get_labor_duration(\"Poor\") |&gt;\n    mean(na.rm = TRUE) |&gt;\n    hms::as_hms(),\n  fps_mean_good =\n    model_data_fps |&gt;\n    get_labor_duration(\"Good\") |&gt;\n    mean(na.rm = TRUE) |&gt;\n    hms::as_hms(),\n  diff = (fps_mean_poor - fps_mean_good) |&gt; hms::as_hms()\n)\n\n\n\nCodecohens_d(\n  x = model_data_fps |&gt; get_labor_duration(\"Poor\"),\n  y = model_data_fps |&gt; get_labor_duration(\"Good\"),\n  pooled_sd = TRUE,\n  mu = 0,\n  paired = FALSE,\n  adjust = TRUE, # For small samples\n  ci = 0.95,\n  alternative = \"greater\",\n  verbose = TRUE\n) |&gt;\n  interpret_hedges_g()\n\n\n\n1.9.1.2 ANCOVA\n\nSee Rutherford (2011, pp. 237–261) to lear more about ANOVA-ANCOVA assumptions.\n\n\n1.9.1.2.1 Test\n\nCodemodel_aov_fps &lt;- stats::aov(\n  formula = labor_duration ~ baby_weight * group,\n  data = model_data_fps\n)\n\nmodel_aov_fps\n\n\n\nCodemodel_aov_fps |&gt; summary()\n\n\n\nCodemodel_aov_fps |&gt; report::report()\n\n\n\n1.9.1.2.2 Effect Size\nVeja Cohen (1992) para saber mais.\nTamanho de efeito para duraçõa do parto e FSP encontrado por Lee & Gay (2004):\n\nCodek &lt;- 3\nnum_df &lt;- 2\nden_df &lt;- 125\nn_total_tst &lt;- den_df + k\nf_test &lt;- 5.54\n\nf_unb_tst &lt;- f_unb(k, n_total_tst, f_test)\n\nf_unb_tst\n\n\nTamanho de efeito a posteriori:\n\nCodeeffect_size_aov_fps &lt;-\n  model_aov_fps |&gt;\n  cohens_f(\n    partial = FALSE,\n    generalized = FALSE,\n    method = \"eta\",\n    model2 = NULL,\n    ci = 0.95,\n    alternative = \"greater\",\n    verbose = TRUE,\n  ) |&gt;\n  interpret_eta_squared(\"cohen1992\")\n\neffect_size_aov_fps\n\n\n\n1.9.1.2.3 Power Analysis (a posteriori)\n\nVeja a análise de poder a priori em: https://danielvartan.github.io/sample-size.\n\nPoder desejado: \\((1 - \\beta) \\geq 0.8\\)\n\nCode# A posteriori\n\npwr_analysis_fps_anconva &lt;- pwrss::pwrss.f.ancova(\n  f2 = effect_size_aov_fps$Cohens_f[3]^2,\n  n.way = 1,\n  n.levels = 2,\n  n.covariates = 1,\n  # Not really true, since each group has a different number of observations.\n  n = model_data_fps |&gt;\n    get_labor_duration(\"Good\") |&gt;\n    length(),\n  alpha = 0.05,\n  verbose = TRUE\n)\n\npwr_analysis_fps_anconva\n\n\n\n\n1.9.2 WASO (Wake After Sleep Onset)\n\nAs an estimate of sleep disruption, WASO is reported as the percentage of minutes awake divided by minutes in bed after falling asleep. During a typical 7- to 8-hour sleep period, WASO of 15% represents more than an hour of wake time after falling asleep. WASO between 5% and 10% is typical in healthy, nonpregnant women5 and greater than 15% was considered severe sleep disruption for this study.(Lee & Gay, 2004[p. 2042]).\n\n\nCodemodel_data_waso &lt;-\n  model_data |&gt;\n  dplyr::select(labor_duration, waso_mean, fps_mean, baby_weight) |&gt;\n  mutate(\n    waso_prop = (as.numeric(waso_mean)) / as.numeric(fps_mean)\n  ) |&gt;\n  mutate(\n    group =\n      case_when(\n        waso_prop &gt; 0.1 ~ \"Poor\",\n        waso_prop &lt; 0.1 ~ \"Good\"\n      ) |&gt;\n      factor(levels = c(\"Poor\", \"Good\"))\n  ) |&gt;\n  mutate(\n    labor_duration = as.numeric(labor_duration)\n  ) |&gt;\n  relocate(group) |&gt;\n  dplyr::select(group, labor_duration, baby_weight) |&gt;\n  drop_na()\n\n\n\nCodemodel_data_waso\n\n\n\nCodemodel_data_waso |&gt; report::report()\n\n\n\n1.9.2.1 Welch’s T-Test\n\n1.9.2.1.1 Power Analysis (a posteriori)\n\nSee the a priori power analysis at https://danielvartan.github.io/sample-size.\n\nDesired power: \\((1 - \\beta) \\geq 0.8\\)\n\nCodepwr_analysis_waso_t_test &lt;- pwrss::pwrss.t.2means(\n  mu1 = model_data_waso |&gt;\n    get_labor_duration(\"Poor\") |&gt;\n    mean(na.rm = TRUE),\n  mu2 = model_data_waso |&gt;\n    get_labor_duration(\"Good\") |&gt;\n    mean(na.rm = TRUE),\n  sd1 = model_data_waso |&gt;\n    get_labor_duration(\"Poor\") |&gt;\n    stats::sd(na.rm = TRUE),\n  sd2 = model_data_waso |&gt;\n    get_labor_duration(\"Good\") |&gt;\n    stats::sd(na.rm = TRUE),\n  paired = FALSE,\n  n2 = model_data_waso |&gt; get_n(\"Good\"),\n  kappa = get_n(model_data_waso, \"Poor\") / get_n(model_data_waso, \"Good\"),\n  power = NULL,\n  alpha = 0.05,\n  welch.df = TRUE,\n  alternative = \"superior\"\n)\n\n\n\n\n1.9.2.1.2 Test\n\nCodemodel_t_test_waso &lt;- stats::t.test(\n  x = model_data_waso |&gt; get_labor_duration(\"Poor\"),\n  y = model_data_waso |&gt; get_labor_duration(\"Good\"),\n  alternative = \"greater\"\n)\n\nmodel_t_test_waso\n\n\n\nCodereport::report(model_t_test_waso)\n\n\n\n1.9.2.1.3 Effect Size\n\nCodetibble(\n  waso_mean_poor =\n    model_data_waso |&gt;\n    get_labor_duration(\"Poor\") |&gt;\n    mean(na.rm = TRUE) |&gt;\n    hms::as_hms(),\n  waso_mean_good =\n    model_data_waso |&gt;\n    get_labor_duration(\"Good\") |&gt;\n    mean(na.rm = TRUE) |&gt;\n    hms::as_hms(),\n  diff = (waso_mean_poor - waso_mean_good) |&gt; hms::as_hms()\n)\n\n\n\nCodecohens_d(\n  x = model_data_waso |&gt; get_labor_duration(\"Poor\"),\n  y = model_data_waso |&gt; get_labor_duration(\"Good\"),\n  pooled_sd = TRUE,\n  mu = 0,\n  paired = FALSE,\n  adjust = TRUE, # For small samples\n  ci = 0.95,\n  alternative = \"greater\",\n  verbose = TRUE\n) |&gt;\n  interpret_hedges_g()\n\n\n\n1.9.2.2 ANCOVA\n\n1.9.2.2.1 Test\n\nCodemodel_aov_waso &lt;- stats::aov(\n  formula = labor_duration ~ baby_weight * group,\n  data = model_data_waso\n)\n\nmodel_aov_waso\n\n\n\nCodemodel_aov_waso |&gt; summary()\n\n\n\nCodemodel_aov_waso |&gt; report::report()\n\n\n\n1.9.2.2.2 Effect Size\nSee Cohen (1992) to learn more.\nEffect size for labor duration and WASO found by Lee & Gay (2004):\n\nCodek &lt;- 3\nnum_df &lt;- 2\nden_df &lt;- 125\nn_total_waso &lt;- den_df + k\nf_test &lt;- 6.93\n\nf_unb_waso &lt;- f_unb(k, n_total_waso, f_test)\n\nf_unb_waso\n\n\nTamanho de efeito a posteriori:\n\nCodeeffect_size_aov_waso &lt;-\n  model_aov_waso |&gt;\n  cohens_f(\n    partial = FALSE,\n    method = \"eta\",\n    model2 = NULL,\n    ci = 0.95,\n    alternative = \"greater\",\n    verbose = TRUE,\n  ) |&gt;\n  interpret_eta_squared(\"cohen1992\")\n\neffect_size_aov_waso\n\n\n\n1.9.2.2.3 Power Analysis (a posteriori)\n\nVeja a análise de poder a priori em: https://danielvartan.github.io/sample-size.\n\nPoder desejado: \\((1 - \\beta) \\geq 0.8\\)\n\nCodepwr_analysis_waso_ancova &lt;- pwrss::pwrss.f.ancova(\n  f2 = effect_size_aov_waso$Cohens_f[3]^2,\n  n.way = 1,\n  n.levels = 2,\n  n.covariates = 1,\n  # Not really true, since each group has a different number of observations.\n  n = model_data_waso |&gt;\n    get_labor_duration(\"Poor\") |&gt;\n    length(),\n  alpha = 0.05,\n  verbose = FALSE\n)\n\npwr_analysis_waso_ancova",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/exploratory-analysis.html#ancova-assumptions",
    "href": "qmd/exploratory-analysis.html#ancova-assumptions",
    "title": "\n1  Exploratory Analysis\n",
    "section": "\n1.10 ANCOVA Assumptions",
    "text": "1.10 ANCOVA Assumptions\n\nAssumption 1\n\nPredictor is known (ANOVA). Each condition contains a random sample of the population of such scores (Rutherford, 2011[p. 237]).\n\nAssumption 2\n\nNormality (ANOVA). The scores in each condition are distributed normally (Rutherford, 2011[p. 237]).\n\nAssumption 3\n\nIndependence (ANOVA). The scores in each condition are independent of each other (Rutherford, 2011[p. 237]).\n\nAssumption 4\n\nCommon variance (homoscedasticity) (ANOVA). The variances of the scores in each experimental condition are homogeneous (Rutherford, 2011[p. 237]).\n\nAssumption 5\n\nIndependence of the covariates (homoscedasticity) (ANCOVA). The covariate is independent of the treatments (Rutherford, 2011[p. 237]).\n\nAssumption 6\n\nLinear mean (ANCOVA). In each treatment group the relationship between the covariate and the dependent variable is linear (the covariate and dependent variable are expressed at the first power only) (Rutherford, 2011[p. 240]).\n\nAssumption 7\n\nHomogeneity of the coefficients (ANCOVA). The regression coefficients of the dependent variable on the covariate in each treatment group are homogeneous (Rutherford, 2011[p. 240]).\n\n\n\n\n\n\nCohen, J. (1992). A power primer. Psychological Bulletin, 112(1), 155–159. https://doi.org/10.1037/0033-2909.112.1.155\n\n\nEllis, P. D. (Ed.). (2010). The essential guide to effect sizes: Statistical power, meta-analysis, and the interpretation of research results (a). Cambridge University Press.\n\n\nLee, K. A., & Gay, C. L. (2004). Sleep in late pregnancy predicts length of labor and type of delivery. American Journal of Obstetrics and Gynecology, 191(6), 2041–2046. https://doi.org/10.1016/j.ajog.2004.05.086\n\n\nRutherford, A. (2011). ANOVA and ANCOVA: A GLM approach (2nd ed.). Wiley. https://doi.org/10.1002/9781118491683\n\n\nWatson, N. F., Badr, M. S., Belenky, G., Bliwise, D. L., Buxton, O. M., Buysse, D., Dinges, D. F., Gangwisch, J., Grandner, M. A., Kushida, C., Malhotra, R. K., Martin, J. L., Patel, S. R., Quan, S. F., & Tasali, E. (2015). Recommended amount of sleep for a healthy adult: A joint consensus statement of the American Academy of Sleep Medicine and Sleep Research Society. Journal of Clinical Sleep Medicine, 11(6), 591–592. https://doi.org/10.5664/jcsm.4758",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Exploratory Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sapopemba-survey-analysis.html",
    "href": "qmd/sapopemba-survey-analysis.html",
    "title": "\n2  Sapopemba Survey Analysis\n",
    "section": "",
    "text": "2.1 Comments\n* This is considering that all the other elegibility criteria are met (e.g., non-smoker, no gestational issues, etc.). Here we are considering only: the age of the pregnant women; the minimum time required for actigraph use; and if the delivery was at the birth center. Most of the other criteria are already met by the birth centers’ selection criteria.",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Sapopemba Survey Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sapopemba-survey-analysis.html#setup",
    "href": "qmd/sapopemba-survey-analysis.html#setup",
    "title": "\n2  Sapopemba Survey Analysis\n",
    "section": "\n2.2 Setup",
    "text": "2.2 Setup\n\nCodelibrary(dplyr)\nlibrary(ggplot2)\nlibrary(googlesheets4)\nlibrary(lubridate)\nlibrary(magrittr)\nlibrary(purrr)\nlibrary(rutils) # github.com/danielvartan/rutils\nlibrary(stringr)",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Sapopemba Survey Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sapopemba-survey-analysis.html#data-munging",
    "href": "qmd/sapopemba-survey-analysis.html#data-munging",
    "title": "\n2  Sapopemba Survey Analysis\n",
    "section": "\n2.3 Data munging",
    "text": "2.3 Data munging\n\n2.3.1 Importing data\n\nCodegs4_auth(\n  cache = here(\".secrets\"),\n  email = TRUE,\n  use_oob = FALSE\n)\n\n\n\nCoderaw_data &lt;-\n  \"1w5mLtYYoh6MPsP8lPqj1tyKNzX9XJuPMmCMsNFM-bcs\" |&gt;\n  googlesheets4::read_sheet(sheet = \"Dataset\")\n\n\n\n2.3.2 Tidying data\n\nCoderaw_data &lt;-\n  data |&gt;\n  dplyr::mutate(\n    date_on_entry = lubridate::ymd(date_on_entry),\n    baby_birth_date = lubridate::ymd(baby_birth_date),\n    age = as.numeric(age),\n    ultrassom_date = lubridate::ymd(ultrassom_date),\n    ga_on_ultrassom =\n      (\n        ga_on_ultrassom |&gt;\n         stringr::str_extract(\"^[0-9]*(?=/)\") |&gt;\n         as.numeric() |&gt;\n         lubridate::weeks()\n       ) +\n      (\n        ga_on_ultrassom |&gt;\n         stringr::str_extract(\"(?&lt;=/)[0-9]$\") |&gt;\n         as.numeric() |&gt;\n          lubridate::days()\n      ),\n    n_gestation = as.numeric(n_gestation),\n    n_delivery = as.numeric(n_delivery),\n    n_abortion = as.numeric(n_abortion),\n    birth_center_delivery = as.logical(birth_center_delivery)\n  )\n\n\n\nCodedata |&gt; dplyr::glimpse()\n\n\n\n2.3.3 Transforming data\n\nCodega_start &lt;- function(ultrasound, ga) {\n  checkmate::assert_date(ultrasound)\n  rutils:::assert_period(ga, lower = lubridate::period(0))\n  rutils:::assert_identical(ultrasound, ga, type = \"length\")\n\n  lubridate::as_date(ultrasound - ga)\n}\n\n\n\nCodega_point &lt;- function(ga_start, point, print = TRUE) {\n  checkmate::assert_date(ga_start)\n  checkmate::assert_multi_class(point, c(\"Date\", \"POSIXt\"))\n  checkmate::assert_flag(print)\n\n  for (i in seq_along(ga_start)) {\n    for (j in seq_along(point)) {\n      if (point[i] &lt; ga_start[i]) {\n        cli::cli_abort(paste(\n          \"{.strong {cli::col_red('point')}} must be equal or greater than\",\n          \"{.strong {cli::col_blue('ga_start')}}.\"\n        ))\n      }\n    }\n  }\n\n  ga_start &lt;- ga_start |&gt; lubridate::as_date()\n  point &lt;- point |&gt; lubridate::as_date()\n\n  out &lt;-\n    lubridate::interval(ga_start, point, tzone =\"UTC\") |&gt;\n     as.numeric() %&gt;%\n    `/`(as.numeric(lubridate::ddays())) %&gt;%\n    lubridate::days()\n\n  if (isTRUE(print)) {\n    out_duration &lt;- out |&gt; lubridate::as.duration()\n\n    weeks &lt;- floor(out_duration / lubridate::dweeks())\n    days &lt;- out_duration %% lubridate::dweeks() / lubridate::ddays()\n\n    cli::cli_alert_info(paste(\n      \"{.strong\",\n      \"{weeks} {.strong {cli::col_red('week(s)')}}\",\n      \"{days} {.strong {cli::col_red('day(s)')}}\",\n      \"}\"\n    ))\n  }\n\n  invisible(out)\n}\n\n\n\nCodega_week_int &lt;- function(ga_start, week) {\n  checkmate::assert_date(ga_start, len = 1)\n  checkmate::assert_number(week, lower = 0)\n\n  week_start &lt;-\n    (ga_start + lubridate::dweeks(week)) |&gt;\n    lubridate::as_date()\n\n  week_end &lt;-\n    (week_start + lubridate::dweeks(1) - lubridate::dseconds(1)) |&gt;\n    lubridate::as_date()\n\n  lubridate::interval(week_start, week_end)\n}\n\n\n\nCodega_weeks &lt;- function(ga) {\n  rutils:::assert_period(ga)\n\n  ga &lt;- ga |&gt; lubridate::as.duration()\n\n  floor(ga / lubridate::dweeks())\n}\n\n\n\nCodega_days &lt;- function(ga) {\n  rutils:::assert_period(ga)\n\n  ga &lt;- ga |&gt; lubridate::as.duration()\n  weeks &lt;- floor(ga / lubridate::dweeks())\n\n  ga %% lubridate::dweeks() / lubridate::ddays()\n}\n\n\n\nCodega_weeks_days &lt;- function(ga) {\n  rutils:::assert_period(ga)\n\n  ga &lt;- ga |&gt; lubridate::as.duration()\n  weeks &lt;- floor(ga / lubridate::dweeks())\n  days &lt;- ga %% lubridate::dweeks() / lubridate::ddays()\n\n  paste0(weeks, \"/\", days)\n}\n\n\n\nCodeextract_weeks_from_interval &lt;- function(start, end) {\n  checkmate::assert_date(start)\n  checkmate::assert_date(end)\n\n  lubridate::interval(start, end, tzone =\"UTC\") |&gt;\n    as.numeric() %&gt;%\n    `/`(as.numeric(lubridate::dweeks())) |&gt;\n    floor()\n}\n\n\n\nCodedata &lt;-\n  data |&gt;\n  dplyr::mutate(\n    ga_start = ga_start(\n      ultrasound = ultrassom_date,\n      ga = ga_on_ultrassom\n    ),\n    ga_on_entry = ga_point(\n      ga_start = ga_start,\n      point = date_on_entry,\n      print = FALSE\n    ),\n    ga_on_entry_weeks = ga_weeks(ga_on_entry),\n    ga_on_entry_days = ga_days(ga_on_entry),\n    ga_on_baby_birth_date = ga_point(\n      ga_start = ga_start,\n      point = baby_birth_date,\n      print = FALSE\n    ),\n    ga_on_baby_birth_date_weeks = ga_weeks(ga_on_baby_birth_date),\n    ga_on_baby_birth_date_days = ga_days(ga_on_baby_birth_date),\n    duration_from_entry_to_birth =\n      lubridate::as.period(baby_birth_date - date_on_entry)\n  )\n\n\n\nCodedata &lt;-\n  data |&gt;\n  dplyr::select(\n    ga_start,\n    date_on_entry,\n    ga_on_entry,\n    ga_on_entry_weeks,\n    ga_on_entry_days,\n    baby_birth_date,\n    ga_on_baby_birth_date,\n    ga_on_baby_birth_date_weeks,\n    ga_on_baby_birth_date_days,\n    ultrassom_date,\n    ga_on_ultrassom,\n    duration_from_entry_to_birth,\n    age,\n    n_gestation,\n    n_delivery,\n    n_abortion,\n    birth_center_delivery\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Sapopemba Survey Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sapopemba-survey-analysis.html#analysis",
    "href": "qmd/sapopemba-survey-analysis.html#analysis",
    "title": "\n2  Sapopemba Survey Analysis\n",
    "section": "\n2.4 Analysis",
    "text": "2.4 Analysis\n\n2.4.1 Parameters\n\nCodemin_actigraphy_days &lt;- 7\n\n\n\n2.4.2 How much time does the survey cover?\n\nCodeperiod_from_interval &lt;- function(start, end) {\n  checkmate::assert_date(start)\n  checkmate::assert_date(end)\n\n  lubridate::interval(start, end, tzone =\"UTC\") |&gt;\n    lubridate::as.period()\n}\n\n\n\nCodestart &lt;- data |&gt;\n  magrittr::extract2(\"date_on_entry\") |&gt;\n  min()\n\nend &lt;- data |&gt;\n  magrittr::extract2(\"date_on_entry\") |&gt;\n  max()\n\ncli::cli_bullets(c(\n  \"{.strong From}: {start}\",\n  \"{.strong To}: {end}\",\n  paste0(\n    \"{.strong {cli::col_red('Duration')}}: \",\n    \"{period_from_interval(start, end)}\"\n  )\n))\n\n\n\n2.4.3 What is the potential number of pregnant women who fit the research sample in a given period of time?\n\nCoden_fit &lt;- function(data, start, end, min_actigraphy_days = 7, print = TRUE) {\n  checkmate::assert_tibble(data)\n  checkmate::assert_date(start)\n  checkmate::assert_date(end)\n  checkmate::assert_number(min_actigraphy_days)\n  checkmate::assert_flag(print)\n\n  data &lt;-\n    data |&gt;\n    dplyr::filter(\n      date_on_entry &gt;= start,\n      date_on_entry &lt;= end\n    )\n\n  total &lt;- data |&gt; nrow()\n\n  n_fit &lt;-\n    data |&gt;\n    dplyr::filter(\n      age &gt;= 18,\n      duration_from_entry_to_birth &gt;= lubridate::days(min_actigraphy_days),\n      birth_center_delivery == TRUE\n    ) |&gt;\n    nrow()\n\n  n_fit_per &lt;- n_fit / total * 100\n\n  if (isTRUE(print)) {\n    cli::cli_bullets(c(\n      paste0(\n      \"{.strong {cli::col_red('Number of fit pregnant women')}}: \",\n      \"{n_fit}/{total}\"\n      ),\n      paste0(\n      \"{.strong Percentage of fit pregnant women}: \",\n      \"{round(n_fit_per, 3)} %\"\n      )\n    ))\n  }\n\n  invisible(\n    list(\n      n_fit = n_fit,\n      n_fit_per = n_fit_per,\n      total = total,\n      start = start,\n      end = end,\n      min_actigraphy_days = min_actigraphy_days\n    )\n  )\n}\n\n\n\nCodedata |&gt;\n  n_fit(\n    start = start,\n    end = end,\n    min_actigraphy_days = min_actigraphy_days,\n    print = TRUE\n  )\n\n\n\nCodedata |&gt;\n  dplyr::filter(\n    date_on_entry &gt;= start,\n    date_on_entry &lt;= end\n  ) |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x =\n        duration_from_entry_to_birth |&gt;\n        lubridate::as.duration() %&gt;%\n        `/`(lubridate::ddays())\n    )\n  ) +\n  ggplot2::geom_histogram(bins = 30) +\n  ggplot2::geom_vline(\n    xintercept = 7,\n    color = \"red\",\n    linetype = \"dashed\"\n  ) +\n    ggplot2::geom_vline(\n    xintercept = 15,\n    color = \"blue\",\n    linetype = \"dashed\"\n  ) +\n  ggplot2::labs(\n    x = \"Days from entry to birth\",\n    y = \"Frequency\",\n    title = \"Distribution of days from entry to birth\"\n  )\n\n\n\n2.4.4 What is the maximum gestational age at the time of recruitment that provides the best chance of achieving the optimal gain-loss balance in the number of pregnant women who meet the minimum time required for actigraph use?\n\nCodegain_minus_loss &lt;- function(\n    data,\n    ga_cut,\n    min_actigraphy_days = 7,\n    print = TRUE\n  ) {\n  checkmate::assert_tibble(data)\n  rutils:::assert_period(ga_cut)\n  checkmate::assert_number(min_actigraphy_days)\n  checkmate::assert_flag(print)\n\n  gain &lt;-\n    data |&gt;\n    dplyr::filter(\n      ga_on_entry &lt;= ga_cut,\n      age &gt;= 18,\n      duration_from_entry_to_birth &gt;= lubridate::days(min_actigraphy_days),\n      birth_center_delivery == TRUE\n    ) |&gt;\n    nrow()\n\n  loss &lt;-\n    data |&gt;\n    dplyr::filter(\n      ga_on_entry &lt;= ga_cut,\n      age &gt;= 18,\n      duration_from_entry_to_birth &lt; lubridate::days(min_actigraphy_days),\n      birth_center_delivery == TRUE\n    ) |&gt;\n    nrow()\n\n  gain_minus_loss &lt;- gain - loss\n  total &lt;- gain + loss\n\n  if (isTRUE(print)) {\n    cli::cli_bullets(c(\n      paste0(\n        \"{.strong {cli::col_blue('Gestational age cut')}}: \",\n        \" {ga_weeks_days(ga_cut)}\"\n      ),\n      paste0(\"{.strong Gain}: {gain}\"),\n      paste0(\"{.strong Loss}: {loss}\"),\n      paste0(\"{.strong Total}: {total}\"),\n      paste0(\"{.strong {cli::col_red('Gain - Loss')}}: {gain_minus_loss}\")\n    ))\n  }\n\n  invisible(\n    list(\n      ga_cut = ga_cut,\n      gain = gain,\n      loss = loss,\n      total = total,\n      gain_minus_loss = gain_minus_loss,\n      min_actigraphy_days = min_actigraphy_days\n    )\n  )\n}\n\n\n\nCodemin_ga &lt;- lubridate::weeks(36)\nmax_ga &lt;- lubridate::weeks(41) + lubridate::days(6)\ndiff &lt;- max_ga - min_ga\ndays &lt;- attributes(diff)$day\n\nga_options &lt;- purrr::map_vec(\n  .x = lubridate::days(seq(days)),\n  .f = ~ .x + min\n)\n\nstats &lt;- purrr::map_df(\n  .x = ga_options,\n  .f = function(x) {\n    list &lt;-\n      data |&gt;\n      gain_minus_loss(\n        ga_cut = x,\n        min_actigraphy_days = min_actigraphy_days,\n        print = FALSE\n      ) |&gt;\n      dplyr::as_tibble()\n  }\n)\n\n\n\nCodeindexes &lt;- stats$gain_minus_loss == max(stats$gain_minus_loss, na.rm = TRUE)\n\nga_max_by_gain_minus_loss &lt;-\n  stats |&gt;\n  magrittr::extract2(\"ga_cut\") %&gt;%\n  `[`(indexes) |&gt;\n  dplyr::last()\n\ndata |&gt;\n  gain_minus_loss(\n  ga_cut = ga_max_by_gain_minus_loss,\n  min_actigraphy_days = min_actigraphy_days,\n  print = TRUE\n)\n\n\n\nCodestats |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x = ga_cut |&gt;\n        lubridate::as.duration() %&gt;%\n        `/`(lubridate::dweeks()),\n      y = gain_minus_loss\n    )\n  ) +\n  ggplot2::geom_line(color = \"blue\") +\n  ggplot2::geom_point() +\n  ggplot2::labs(\n    x = \"Gestational age cut\",\n    y = \"Gain - Loss\",\n    title = \"Gain - Loss by gestational age cut\"\n  )\n\n\n\nCodedata |&gt;\n  dplyr::filter(\n    age &gt;= 18,\n    birth_center_delivery == TRUE,\n    duration_from_entry_to_birth &gt;= lubridate::days(min_actigraphy_days)\n  ) |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x = ga_on_entry |&gt;\n        lubridate::as.duration() %&gt;%\n        `/`(lubridate::dweeks())\n    )\n  ) +\n  ggplot2::geom_histogram(bins = 30) +\n  ggplot2::geom_vline(\n    xintercept =\n      lubridate::dweeks(37) %&gt;%\n      `+`(lubridate::ddays(6)) %&gt;%\n      `/`(lubridate::dweeks()),\n    color = \"red\",\n    linetype = \"dashed\"\n  ) +\n  ggplot2::labs(\n    x = \"Gestation age at entry\",\n    y = \"Frequency\",\n    title = paste0(\n      \"Distribution of the gestational age at the time of entry \",\n      \"of pregnant women\",\n      \"\\n\",\n      \"that meet the minimum time required for actigraph use\"\n    )\n  )\n\n\n\nCodedata |&gt;\n  dplyr::filter(\n    age &gt;= 18,\n    birth_center_delivery == TRUE,\n    duration_from_entry_to_birth &lt; lubridate::days(min_actigraphy_days)\n  ) |&gt;\n  ggplot2::ggplot(\n    ggplot2::aes(\n      x = ga_on_entry |&gt;\n        lubridate::as.duration() %&gt;%\n        `/`(lubridate::dweeks())\n    )\n  ) +\n  ggplot2::geom_histogram(bins = 30) +\n  ggplot2::geom_vline(\n    xintercept =\n      lubridate::dweeks(37) %&gt;%\n      `+`(lubridate::ddays(6)) %&gt;%\n      `/`(lubridate::dweeks()),\n    color = \"red\",\n    linetype = \"dashed\"\n  ) +\n  ggplot2::labs(\n    x = \"Gestation age at entry\",\n    y = \"Frequency\",\n    title = paste0(\n      \"Distribution of the gestational age at the time of entry \",\n      \"of pregnant women\",\n      \"\\n\",\n      \"that DO NOT meet the minimum time required for actigraph use\"\n    )\n  )\n\n\n\n2.4.5 What is the age distribution of these pregnant women?\n\n2.4.6 What is the average gestational age of pregnant women at the time of the entry?\n\n2.4.7 What is the parity of these pregnant women?\n\n2.4.8 How many births of pregnant women who initiated a birth plan occurred at the birth center?",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Sapopemba Survey Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html",
    "href": "qmd/short-report-analysis.html",
    "title": "\n3  Short Report Analysis\n",
    "section": "",
    "text": "3.1 Overview",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#set-the-environment",
    "href": "qmd/short-report-analysis.html#set-the-environment",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.2 Set the Environment",
    "text": "3.2 Set the Environment\n\n3.2.1 Load Packages\n\nCodelibrary(askpass)\nlibrary(car)\nlibrary(checkmate)\nlibrary(cli)\nlibrary(dplyr)\nlibrary(fs)\nlibrary(ggplot2)\nlibrary(googlesheets4)\nlibrary(grDevices)\nlibrary(gt)\nlibrary(gtsummary)\nlibrary(groomr) # github.com/danielvartan/groomr\nlibrary(here)\nlibrary(hms)\nlibrary(lubridate)\nlibrary(lubritime) # github.com/danielvartan/lubritime\nlibrary(moments)\nlibrary(plotr) # github.com/danielvartan/plotr\nlibrary(prettycheck) # github.com/danielvartan/prettycheck\nlibrary(rutils) # github.com/danielvartan/rutils\nlibrary(scaler) # github.com/danielvartan/scaler\nlibrary(sodium)\nlibrary(stats)\nlibrary(stringr)\nlibrary(summarytools)\nlibrary(tidyr)\n\n\n\n3.2.2 Load Custom Functions\n\nCodesource(here(\"R\", \"anonymize_id.R\"))\n\n\n\n3.2.3 Set Data Directories\n\nCodedata_dir &lt;- here(\"data\")\nprocessed_data_dir &lt;- here(\"data\", \"processed\")\nprocessed_actigraphy_data_dir &lt;- here(\"data\", \"processed\", \"actigraphy\")\n\n\n\nCodefor (i in ls(pattern = \"_dir$\")) {\n  if (!dir_exists(get(i))) dir_create(get(i), recurse = TRUE)\n}\n\n\n\n3.2.4 Set Keys\n\nCodegs4_auth(\n  cache = here(\".secrets\"),\n  email = TRUE,\n  use_oob = FALSE\n)\n\n\n\nCodesalt &lt;- Sys.getenv(\"PREGNANCY_SALT\") # askpass()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#download-and-import-the-control-form-data",
    "href": "qmd/short-report-analysis.html#download-and-import-the-control-form-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.3 Download and Import the Control Form Data",
    "text": "3.3 Download and Import the Control Form Data\nThe following are internal data collected and organized using a Google Form to facilitate the management of the study.\n\nCodecontrol_form_data &lt;-\n  \"13wtDr4fRD1wJSM-qdLOdGSchF8oXU1bG0Jtccu24GhY\" |&gt;\n  read_sheet(\n    sheet = \"Dataset\",\n    col_types = \"c\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#download-and-import-the-field-form-data",
    "href": "qmd/short-report-analysis.html#download-and-import-the-field-form-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.4 Download and Import the Field Form Data",
    "text": "3.4 Download and Import the Field Form Data\nThe following are data extracted from the Google Form used to collect data from the participants of the study.\n\nCodefield_form_data &lt;-\n  \"1tY_TT0nPXFsErYQS2VED0-hqTzgHudA9BfhRhYG19fw\" |&gt;\n  read_sheet(\n    sheet = \"Dataset\",\n    col_types = \"c\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#download-and-import-the-sleep-data",
    "href": "qmd/short-report-analysis.html#download-and-import-the-sleep-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.5 Download and Import the Sleep Data",
    "text": "3.5 Download and Import the Sleep Data\nThe sleep data were extracted using the Condor Instrument ActStudio software and subsequently formatted in Google Sheets for further analysis.\n\nCodesleep_data &lt;-\n  \"1iqjhdSiWYr9RYSvIvJQfFw35DR31YA_oj2SW8iR5WPw\" |&gt;\n  read_sheet(\n    sheet = \"Dataset\",\n    col_types = \"c\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#download-and-import-the-medical-records-data",
    "href": "qmd/short-report-analysis.html#download-and-import-the-medical-records-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.6 Download and Import the Medical Records Data",
    "text": "3.6 Download and Import the Medical Records Data\nMedical records were obtained from participants’ medical files and organized in Google Sheets for subsequent analysis.\n\nCodemedical_record_data &lt;-\n  \"10yvvTOCjZsRKPO8A4yn0NCvWe4Jn_Kq-Zu_CV4miGJI\" |&gt;\n  read_sheet(\n    sheet = \"Dataset\",\n    col_types = \"c\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#filter-and-tidy-the-control-form-data",
    "href": "qmd/short-report-analysis.html#filter-and-tidy-the-control-form-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.7 Filter and Tidy the Control Form Data",
    "text": "3.7 Filter and Tidy the Control Form Data\n\nCodecontrol_form_data &lt;-\n  control_form_data |&gt;\n  `names&lt;-`(paste0(\"X\", seq_along(control_form_data))) |&gt;\n  dplyr::select(X5, X6, X7, X12, X13, X14) |&gt;\n  rename(\n    cpf = X5,\n    id = X6,\n    name = X7,\n    birth_center_delivery = X12,\n    birth = X13,\n    labor_start = X14\n  ) |&gt;\n  mutate(\n    birth_center_delivery = case_when(\n      tolower(trimws(birth_center_delivery)) == \"sim\" ~ TRUE,\n      tolower(trimws(birth_center_delivery)) == \"não\" ~ FALSE,\n      TRUE ~ NA\n    ),\n    birth = as_datetime(birth),\n    labor_start = as_datetime(labor_start)\n  ) |&gt;\n  mutate(\n    labor_duration =\n      interval(\n        start = labor_start,\n        end = birth\n      ) |&gt;\n        int_duration()\n  ) |&gt;\n  filter(!is.na(labor_duration)) |&gt;\n  dplyr::select(id, birth_center_delivery, labor_start, labor_duration)\n\n\n\ncontrol_form_data |&gt; glimpse()\n#&gt; Rows: 27\n#&gt; Columns: 4\n#&gt; $ id                    &lt;chr&gt; \"9e858cd8\", \"a053ce64\", \"02250df5\", \"5f28e20f…\n#&gt; $ birth_center_delivery &lt;lgl&gt; FALSE, TRUE, TRUE, FALSE, TRUE, FALSE, TRUE, …\n#&gt; $ labor_start           &lt;dttm&gt; 2023-06-14 11:00:00, 2023-08-06 09:30:00, 20…\n#&gt; $ labor_duration        &lt;Duration&gt; 79320s (~22.03 hours), 19440s (~5.4 hour…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#filter-and-tidy-the-field-form-data",
    "href": "qmd/short-report-analysis.html#filter-and-tidy-the-field-form-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.8 Filter and Tidy the Field Form Data",
    "text": "3.8 Filter and Tidy the Field Form Data\n\nCodefield_form_data &lt;-\n  field_form_data |&gt;\n  `names&lt;-`(paste0(\"X\", seq_along(field_form_data))) |&gt;\n  dplyr::select(\n    X1, X4, X5, X11, X91, X92, X95, X96, X97, X99, X101, X102, X106, X119,\n    X118, X125, X126\n  ) |&gt;\n  rename(\n    timestamp = X1,\n    birth_date = X4,\n    cpf = X5,\n    weight_before = X96,\n    weight_current = X95,\n    height = X97,\n    ethnicity = X106,\n    education = X118,\n    family_income = X99,\n    health_plan = X101,\n    solo = X102,\n    exercise = X119,\n    work = X92,\n    study = X91,\n    gestations = X11,\n    deliveries = X125,\n    abortions = X126\n  ) |&gt;\n  mutate(\n    id = anonymize_id(cpf, salt),\n    timestamp = mdy_hms(timestamp),\n    birth_date = dmy(birth_date),\n    age = scaler:::age(birth_date, timestamp),\n    ethnicity = factor(\n      ethnicity,\n      levels = c(\n        \"Indígena\",\n        \"Preta\",\n        \"Parda\",\n        \"Amarela\",\n        \"Branca\"\n      ),\n      ordered = TRUE\n    ),\n    education = factor(\n      education,\n      levels = c(\n        \"Não frequentou a escola\",\n        \"Fundamental incompleto\",\n        \"Fundamental completo\",\n        \"Ensino médio incompleto\",\n        \"Ensino médio completo\",\n        \"Ensino superior incompleto\",\n        \"Ensino superior completo\",\n        \"Mestrado incompleto\",\n        \"Mestrado completo\",\n        \"Doutorado incompleto\",\n        \"Doutorado completo\",\n        \"Pós-doutorado incompleto\",\n        \"Pós-doutorado completo\"\n      ),\n      ordered = TRUE\n    ),\n    gestations = case_match(\n      gestations,\n      c(\"Sim\", \"0\") ~ \"1\",\n      \"Não\" ~ \"0\",\n      .default = gestations\n    ),\n    deliveries = case_when(\n      is.na(deliveries) ~ \"0\",\n      TRUE ~ deliveries\n    ),\n    abortions = case_when(\n      is.na(abortions) ~ \"0\",\n      TRUE ~ abortions\n    )\n  ) |&gt;\n  mutate(\n    across(\n      .cols = all_of(\n        c(\n          \"weight_before\", \"weight_current\", \"height\",\n          \"family_income\", \"gestations\", \"deliveries\",\n          \"abortions\"\n        )\n      ),\n      .fns = as.numeric\n    )\n  ) |&gt;\n  mutate(\n    across(\n      .cols = all_of(\n        c(\"health_plan\", \"solo\", \"exercise\", \"work\", \"study\")\n      ),\n      .fns = function(x) {\n        case_match(\n          x,\n          \"Sim\" ~ TRUE,\n          \"Não\" ~ FALSE\n        )\n      }\n    )\n  ) |&gt;\n  mutate(\n    bmi_before = weight_before / ((height / 100)^2),\n    bmi_current = weight_current / ((height / 100)^2)\n  ) |&gt;\n  dplyr::select(-starts_with(\"cpf\")) |&gt;\n  relocate(\n    id, timestamp, birth_date, age, weight_before, weight_current, height, bmi_before, bmi_current, family_income\n  )\n\n\n\nfield_form_data |&gt; glimpse()\n#&gt; Rows: 74\n#&gt; Columns: 20\n#&gt; $ id             &lt;chr&gt; \"9e858cd8\", \"a053ce64\", \"b37bd425\", \"db850249\", \"022…\n#&gt; $ timestamp      &lt;dttm&gt; 2023-05-21 11:18:49, 2023-05-26 17:55:52, 2023-06-3…\n#&gt; $ birth_date     &lt;date&gt; 1991-03-22, 2001-07-25, 1989-02-23, 1998-01-12, 199…\n#&gt; $ age            &lt;dbl&gt; 32.16388889, 21.83611111, 34.35277778, 25.47222222, …\n#&gt; $ weight_before  &lt;dbl&gt; 70, 50, 87, 70, 64, 84, 49, 60, 75, 66, 64, 72, 92, …\n#&gt; $ weight_current &lt;dbl&gt; 86, 75, 94, 76, 78, 87, 58, 91, 89, 79, 76, 89, 110,…\n#&gt; $ height         &lt;dbl&gt; 160, 156, 174, 169, 153, 168, 157, 164, 164, 159, 16…\n#&gt; $ bmi_before     &lt;dbl&gt; 27.34375000, 20.54569362, 28.73563218, 24.50894577, …\n#&gt; $ bmi_current    &lt;dbl&gt; 33.59375000, 30.81854043, 31.04769454, 26.60971255, …\n#&gt; $ family_income  &lt;dbl&gt; 4000, 2800, 6000, 5000, 3000, 4000, 3000, 9000, 6000…\n#&gt; $ gestations     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1…\n#&gt; $ study          &lt;lgl&gt; FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…\n#&gt; $ work           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, TR…\n#&gt; $ health_plan    &lt;lgl&gt; FALSE, FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE…\n#&gt; $ solo           &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…\n#&gt; $ ethnicity      &lt;ord&gt; Branca, Parda, Branca, Branca, Parda, Parda, Branca,…\n#&gt; $ exercise       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n#&gt; $ education      &lt;ord&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n#&gt; $ deliveries     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0…\n#&gt; $ abortions      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#filter-and-tidy-the-sleep-data",
    "href": "qmd/short-report-analysis.html#filter-and-tidy-the-sleep-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.9 Filter and Tidy the Sleep Data",
    "text": "3.9 Filter and Tidy the Sleep Data\n\nCodesleep_data &lt;-\n  sleep_data |&gt;\n  mutate(\n    across(\n      .cols = matches(\"^his_|^hfs_|^fps_|^tts_m|^tts_sd|^waso_\"),\n      .fns = hms::parse_hms\n    ),\n    across(\n      .cols = matches(\"^tts_fps_|^awakenings_\"),\n      .fns = as.numeric\n    )\n  )\n\n\n\nsleep_data |&gt; glimpse()\n#&gt; Rows: 8\n#&gt; Columns: 29\n#&gt; $ id              &lt;chr&gt; \"a053ce64\", \"b37bd425\", \"db850249\", \"b0e857dd\", \"1d…\n#&gt; $ his_min         &lt;time&gt; 01:26:15, 00:01:18, 00:05:52, 22:30:44, 23:25:39, …\n#&gt; $ his_max         &lt;time&gt; 03:41:15, 02:05:18, 03:41:52, 05:55:44, 01:38:39, …\n#&gt; $ his_mean        &lt;time&gt; 02:18:45, 01:12:54, 01:28:52, 00:39:32, 00:37:19, …\n#&gt; $ his_sd          &lt;time&gt; 00:37:56, 00:38:38, 01:01:57, 02:40:43, 00:51:14, …\n#&gt; $ hfs_min         &lt;time&gt; 07:42:15, 05:55:18, 08:02:52, 04:02:44, 07:13:39, …\n#&gt; $ hfs_max         &lt;time&gt; 15:37:15, 09:13:18, 10:24:52, 10:32:44, 10:51:39, …\n#&gt; $ hfs_mean        &lt;time&gt; 11:10:40, 07:51:18, 09:30:26, 07:30:20, 08:36:59, …\n#&gt; $ hfs_sd          &lt;time&gt; 02:25:50, 01:10:06, 00:55:05, 02:13:33, 01:13:28, …\n#&gt; $ fps_min         &lt;time&gt; 05:01:00, 05:33:00, 06:34:00, 02:38:00, 06:21:00, …\n#&gt; $ fps_max         &lt;time&gt; 13:40:00, 07:15:00, 09:54:00, 10:57:00, 09:44:00, …\n#&gt; $ fps_mean        &lt;time&gt; 08:42:00, 06:38:50, 08:01:34, 06:50:10, 07:59:40, …\n#&gt; $ fps_sd          &lt;time&gt; 02:49:52, 00:39:54, 01:09:38, 03:10:58, 01:15:16, …\n#&gt; $ tts_min         &lt;time&gt; 04:05:00, 05:11:00, 05:47:00, 02:20:00, 03:57:00, …\n#&gt; $ tts_max         &lt;time&gt; 10:00:00, 06:44:00, 08:35:00, 08:31:00, 06:23:00, …\n#&gt; $ tts_mean        &lt;time&gt; 06:56:37, 06:00:00, 06:50:17, 05:47:36, 05:19:00, …\n#&gt; $ tts_sd          &lt;time&gt; 02:05:55, 00:33:49, 01:02:44, 02:29:07, 00:49:14, …\n#&gt; $ tts_fps_min     &lt;dbl&gt; 73.17, 84.60, 69.86, 77.78, 53.74, 76.98, 86.54, 73…\n#&gt; $ tts_fps_max     &lt;dbl&gt; 92.38, 95.96, 92.89, 93.43, 80.35, 86.85, 95.13, 95…\n#&gt; $ tts_fps_mean    &lt;dbl&gt; 80.78, 90.53, 85.45, 86.06, 67.11, 81.94, 90.17, 85…\n#&gt; $ tts_fps_sd      &lt;dbl&gt; 6.34, 3.68, 7.08, 5.14, 9.20, 3.49, 2.77, 8.32\n#&gt; $ waso_min        &lt;time&gt; 00:40:00, 00:17:07, 00:28:00, 00:18:00, 01:29:00, 0…\n#&gt; $ waso_max        &lt;time&gt; 03:40:00, 01:07:00, 02:34:00, 02:26:00, 04:08:00, …\n#&gt; $ waso_mean       &lt;time&gt; 01:45:25, 00:38:20, 01:11:17, 01:03:12, 02:40:00, …\n#&gt; $ waso_sd         &lt;time&gt; 01:00:18, 00:17:07, 00:38:00, 00:48:39, 00:58:46, …\n#&gt; $ awakenings_min  &lt;dbl&gt; 8, 3, 3, 4, 10, 8, 6, 8\n#&gt; $ awakenings_max  &lt;dbl&gt; 34, 10, 15, 13, 21, 19, 14, 20\n#&gt; $ awakenings_mean &lt;dbl&gt; 18.00, 5.83, 10.29, 8.40, 16.67, 13.97, 9.00, 13.80\n#&gt; $ awakenings_sd   &lt;dbl&gt; 7.33, 2.27, 3.61, 3.50, 4.27, 4.31, 2.45, 4.26",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#filter-and-tidy-the-medical-record-data",
    "href": "qmd/short-report-analysis.html#filter-and-tidy-the-medical-record-data",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.10 Filter and Tidy the Medical Record Data",
    "text": "3.10 Filter and Tidy the Medical Record Data\n\nCodemedical_record_data &lt;-\n  medical_record_data |&gt;\n  mutate(\n    across(\n      .cols = all_of(c(\"partograph_begin\", \"baby_birth\")),\n      .fns = ~ ymd_hms(.x, tz = \"America/Sao_Paulo\")\n    ),\n    across(\n      .cols = -all_of(c(\"id\", \"partograph_begin\", \"baby_birth\")),\n      .fns = as.numeric\n    ),\n    across(\n      .cols = starts_with(\"apgar_\"),\n      .fns = as.integer\n    )\n  )\n\n\n\nmedical_record_data |&gt; glimpse()\n#&gt; Rows: 8\n#&gt; Columns: 11\n#&gt; $ id                       &lt;chr&gt; \"a053ce64\", \"b37bd425\", \"db850249\", \"b0e85…\n#&gt; $ partograph_begin         &lt;dttm&gt; 2023-06-08 11:40:00, 2023-07-23 06:10:00,…\n#&gt; $ begin_dilation           &lt;dbl&gt; 7, 6, 5, 7, 7, 7, 10, 7\n#&gt; $ baby_birth               &lt;dttm&gt; 2023-06-08 14:54:00, 2023-07-23 10:17:00, …\n#&gt; $ baby_weight              &lt;dbl&gt; 2995, 3340, 3010, 2785, 3730, 3080, 3215,…\n#&gt; $ baby_length              &lt;dbl&gt; 46.0, 49.5, 45.5, 46.0, 51.0, 49.0, 47.5, …\n#&gt; $ baby_head_perimeter      &lt;dbl&gt; 32.5, 35.0, 33.0, 33.0, 34.0, 31.2, 34.0, …\n#&gt; $ baby_thoracic_perimeter  &lt;dbl&gt; 31.0, 33.5, 32.0, 32.0, 34.5, 32.0, 33.5, …\n#&gt; $ baby_abdominal_perimeter &lt;dbl&gt; 30.0, 32.5, 33.5, 30.0, 31.5, 30.0, 32.0, …\n#&gt; $ apgar_score_1_minute     &lt;int&gt; 9, 9, 9, 9, 9, 9, 9, 9\n#&gt; $ apgar_score_5_minute     &lt;int&gt; 10, 10, 10, 10, 10, 10, 10, 10",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#identify-valid-cases",
    "href": "qmd/short-report-analysis.html#identify-valid-cases",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.11 Identify Valid Cases",
    "text": "3.11 Identify Valid Cases\n\nCodevalid_cases &lt;-\n  field_form_data |&gt;\n  left_join(control_form_data, by = \"id\") |&gt;\n  left_join(sleep_data, by = \"id\") |&gt;\n  left_join(medical_record_data, by = \"id\") |&gt;\n  filter(birth_center_delivery == TRUE) |&gt;\n  drop_na(labor_duration, baby_weight, fps_mean, waso_mean) |&gt; #\n  pull(id)\n\n\n\nvalid_cases\n#&gt; [1] \"a053ce64\" \"b37bd425\" \"db850249\" \"b0e857dd\" \"1d215e39\" \"d3350e10\"\n#&gt; [7] \"7cbf7851\" \"f1e30a89\"",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#create-the-data-for-analysis",
    "href": "qmd/short-report-analysis.html#create-the-data-for-analysis",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.12 Create the Data for Analysis",
    "text": "3.12 Create the Data for Analysis\n\nCodedata &lt;-\n  control_form_data |&gt;\n  left_join(sleep_data, by = \"id\") |&gt;\n  left_join(medical_record_data, by = \"id\") |&gt;\n  left_join(field_form_data, by = \"id\") |&gt;\n  mutate(\n    waso_prop =\n      waso_mean |&gt;\n      as.numeric() |&gt;\n      divide_by(as.numeric(fps_mean))\n  ) |&gt;\n  filter(id %in% valid_cases) |&gt;\n  dplyr::select(-starts_with(\"cpf\"))\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 8\n#&gt; Columns: 62\n#&gt; $ id                       &lt;chr&gt; \"a053ce64\", \"b0e857dd\", \"1d215e39\", \"b37bd…\n#&gt; $ birth_center_delivery    &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, …\n#&gt; $ labor_start              &lt;dttm&gt; 2023-08-06 09:30:00, 2023-08-01 03:30:00,…\n#&gt; $ labor_duration           &lt;Duration&gt; 19440s (~5.4 hours), 99300s (~1.15 da…\n#&gt; $ his_min                  &lt;time&gt; 01:26:15, 22:30:44, 23:25:39, 00:01:18, 0…\n#&gt; $ his_max                  &lt;time&gt; 03:41:15, 05:55:44, 01:38:39, 02:05:18, 0…\n#&gt; $ his_mean                 &lt;time&gt; 02:18:45, 00:39:32, 00:37:19, 01:12:54, 0…\n#&gt; $ his_sd                   &lt;time&gt; 00:37:56, 02:40:43, 00:51:14, 00:38:38, 0…\n#&gt; $ hfs_min                  &lt;time&gt; 07:42:15, 04:02:44, 07:13:39, 05:55:18, 0…\n#&gt; $ hfs_max                  &lt;time&gt; 15:37:15, 10:32:44, 10:51:39, 09:13:18, 1…\n#&gt; $ hfs_mean                 &lt;time&gt; 11:10:40, 07:30:20, 08:36:59, 07:51:18, 0…\n#&gt; $ hfs_sd                   &lt;time&gt; 02:25:50, 02:13:33, 01:13:28, 01:10:06, 0…\n#&gt; $ fps_min                  &lt;time&gt; 05:01:00, 02:38:00, 06:21:00, 05:33:00, 0…\n#&gt; $ fps_max                  &lt;time&gt; 13:40:00, 10:57:00, 09:44:00, 07:15:00, 0…\n#&gt; $ fps_mean                 &lt;time&gt; 08:42:00, 06:50:10, 07:59:40, 06:38:50, 0…\n#&gt; $ fps_sd                   &lt;time&gt; 02:49:52, 03:10:58, 01:15:16, 00:39:54, 0…\n#&gt; $ tts_min                  &lt;time&gt; 04:05:00, 02:20:00, 03:57:00, 05:11:00, 0…\n#&gt; $ tts_max                  &lt;time&gt; 10:00:00, 08:31:00, 06:23:00, 06:44:00, 0…\n#&gt; $ tts_mean                 &lt;time&gt; 06:56:37, 05:47:36, 05:19:00, 06:00:00, 0…\n#&gt; $ tts_sd                   &lt;time&gt; 02:05:55, 02:29:07, 00:49:14, 00:33:49, 0…\n#&gt; $ tts_fps_min              &lt;dbl&gt; 73.17, 77.78, 53.74, 84.60, 69.86, 73.33, …\n#&gt; $ tts_fps_max              &lt;dbl&gt; 92.38, 93.43, 80.35, 95.96, 92.89, 95.11, …\n#&gt; $ tts_fps_mean             &lt;dbl&gt; 80.78, 86.06, 67.11, 90.53, 85.45, 85.62, …\n#&gt; $ tts_fps_sd               &lt;dbl&gt; 6.34, 5.14, 9.20, 3.68, 7.08, 8.32, 3.49, …\n#&gt; $ waso_min                 &lt;time&gt; 00:40:00, 00:18:00, 01:29:00, 00:17:07, 0…\n#&gt; $ waso_max                 &lt;time&gt; 03:40:00, 02:26:00, 04:08:00, 01:07:00, 0…\n#&gt; $ waso_mean                &lt;time&gt; 01:45:25, 01:03:12, 02:40:00, 00:38:20, 0…\n#&gt; $ waso_sd                  &lt;time&gt; 01:00:18, 00:48:39, 00:58:46, 00:17:07, 0…\n#&gt; $ awakenings_min           &lt;dbl&gt; 8, 4, 10, 3, 3, 8, 8, 6\n#&gt; $ awakenings_max           &lt;dbl&gt; 34, 13, 21, 10, 15, 20, 19, 14\n#&gt; $ awakenings_mean          &lt;dbl&gt; 18.00, 8.40, 16.67, 5.83, 10.29, 13.80, 13…\n#&gt; $ awakenings_sd            &lt;dbl&gt; 7.33, 3.50, 4.27, 2.27, 3.61, 4.26, 4.31, …\n#&gt; $ partograph_begin         &lt;dttm&gt; 2023-06-08 11:40:00, 2023-08-02 03:00:00, …\n#&gt; $ begin_dilation           &lt;dbl&gt; 7, 7, 7, 6, 5, 7, 7, 10\n#&gt; $ baby_birth               &lt;dttm&gt; 2023-06-08 14:54:00, 2023-08-02 07:05:00, …\n#&gt; $ baby_weight              &lt;dbl&gt; 2995, 2785, 3730, 3340, 3010, 2740, 3080,…\n#&gt; $ baby_length              &lt;dbl&gt; 46.0, 46.0, 51.0, 49.5, 45.5, 47.0, 49.0, …\n#&gt; $ baby_head_perimeter      &lt;dbl&gt; 32.5, 33.0, 34.0, 35.0, 33.0, 32.0, 31.2,…\n#&gt; $ baby_thoracic_perimeter  &lt;dbl&gt; 31.0, 32.0, 34.5, 33.5, 32.0, 31.0, 32.0, …\n#&gt; $ baby_abdominal_perimeter &lt;dbl&gt; 30.0, 30.0, 31.5, 32.5, 33.5, 28.0, 30.0, …\n#&gt; $ apgar_score_1_minute     &lt;int&gt; 9, 9, 9, 9, 9, 9, 9, 9\n#&gt; $ apgar_score_5_minute     &lt;int&gt; 10, 10, 10, 10, 10, 10, 10, 10\n#&gt; $ timestamp                &lt;dttm&gt; 2023-05-26 17:55:52, 2023-07-16 22:02:13, …\n#&gt; $ birth_date               &lt;date&gt; 2001-07-25, 1989-03-06, 1996-05-11, 1989-0…\n#&gt; $ age                      &lt;dbl&gt; 21.83611111, 34.36111111, 27.20277778, 34.…\n#&gt; $ weight_before            &lt;dbl&gt; 50, 75, 66, 87, 70, 73, 52, 61\n#&gt; $ weight_current           &lt;dbl&gt; 75, 89, 79, 94, 76, 90, 62, 77\n#&gt; $ height                   &lt;dbl&gt; 156, 164, 159, 174, 169, 159, 148, 160\n#&gt; $ bmi_before               &lt;dbl&gt; 20.54569362, 27.88518739, 26.10656224, 28.…\n#&gt; $ bmi_current              &lt;dbl&gt; 30.81854043, 33.09042237, 31.24876389, 31.…\n#&gt; $ family_income            &lt;dbl&gt; 2800, 6000, 2500, 6000, 5000, 3000, 3500,…\n#&gt; $ gestations               &lt;dbl&gt; 1, 1, 1, 1, 1, 2, 1, 1\n#&gt; $ study                    &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, …\n#&gt; $ work                     &lt;lgl&gt; TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, TRUE…\n#&gt; $ health_plan              &lt;lgl&gt; FALSE, TRUE, FALSE, TRUE, TRUE, FALSE, FAL…\n#&gt; $ solo                     &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …\n#&gt; $ ethnicity                &lt;ord&gt; Parda, Branca, Parda, Branca, Branca, Bran…\n#&gt; $ exercise                 &lt;lgl&gt; NA, NA, NA, NA, NA, FALSE, FALSE, FALSE\n#&gt; $ education                &lt;ord&gt; NA, NA, NA, NA, NA, Ensino superior incomp…\n#&gt; $ deliveries               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0\n#&gt; $ abortions                &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0\n#&gt; $ waso_prop                &lt;dbl&gt; 0.20194763729, 0.15408370581, 0.3335649756…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#get-descriptive-statistics-of-the-time-interval-of-data-collection",
    "href": "qmd/short-report-analysis.html#get-descriptive-statistics-of-the-time-interval-of-data-collection",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.13 Get Descriptive Statistics of the Time Interval of Data Collection",
    "text": "3.13 Get Descriptive Statistics of the Time Interval of Data Collection\n\ncli::cli_h1(\"timestamp\")\n#&gt; \n#&gt; ── timestamp ────────────────────────────────────────────────────────────────\ncat_line()\n\ndata |&gt;\n  rutils:::stats_summary(\n    col = \"timestamp\",\n    name = \"timestamp\",\n    threshold = NULL\n  ) |&gt;\n  print(n = Inf)\n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                                \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                                \n#&gt;  1 name     timestamp                            \n#&gt;  2 class    POSIXct                              \n#&gt;  3 n        8                                    \n#&gt;  4 n_rm_na  8                                    \n#&gt;  5 n_na     0                                    \n#&gt;  6 mean     2023-12-22 00:44:03.375              \n#&gt;  7 var      428938220369039s (~13592231.99 years)\n#&gt;  8 sd       20710823.7491665s (~34.24 weeks)     \n#&gt;  9 min      2023-05-26 17:55:52                  \n#&gt; 10 q_1      2023-07-02 20:27:32                  \n#&gt; 11 median   2023-07-20 21:49:20                  \n#&gt; 12 q_3      2024-09-06 09:44:44                  \n#&gt; 13 max      2024-11-02 21:04:31                  \n#&gt; 14 iqr      37286232s (~1.18 years)              \n#&gt; 15 range    45457719s (~1.44 years)              \n#&gt; 16 skewness 0.521032391062454                    \n#&gt; 17 kurtosis 1.32186244260741\n\ncat_line()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#get-frequencies-for-logical-variables",
    "href": "qmd/short-report-analysis.html#get-frequencies-for-logical-variables",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.14 Get Frequencies for Logical Variables",
    "text": "3.14 Get Frequencies for Logical Variables\n\nCodelogical_vars &lt;-\n  data |&gt;\n  select(where(is.logical)) |&gt;\n  names()\n\n\n\nfor (i in logical_vars) {\n  cli::cli_h1(i)\n  cat_line()\n\n  data |&gt;\n    rutils:::stats_summary(col = i, name = i) |&gt;\n    print(n = Inf)\n\n  cat_line()\n}\n#&gt; \n#&gt; ── birth_center_delivery ────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 8 × 2\n#&gt;   name     value                \n#&gt;   &lt;chr&gt;    &lt;chr&gt;                \n#&gt; 1 name     birth_center_delivery\n#&gt; 2 class    logical              \n#&gt; 3 n        8                    \n#&gt; 4 n_rm_na  8                    \n#&gt; 5 n_na     0                    \n#&gt; 6 n_unique 1                    \n#&gt; 7 mode     TRUE                 \n#&gt; 8 'TRUE'   8\n#&gt; \n#&gt; ── study ────────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 9 × 2\n#&gt;   name     value  \n#&gt;   &lt;chr&gt;    &lt;chr&gt;  \n#&gt; 1 name     study  \n#&gt; 2 class    logical\n#&gt; 3 n        8      \n#&gt; 4 n_rm_na  8      \n#&gt; 5 n_na     0      \n#&gt; 6 n_unique 2      \n#&gt; 7 mode     FALSE  \n#&gt; 8 'FALSE'  7      \n#&gt; 9 'TRUE'   1\n#&gt; \n#&gt; ── work ─────────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 9 × 2\n#&gt;   name     value  \n#&gt;   &lt;chr&gt;    &lt;chr&gt;  \n#&gt; 1 name     work   \n#&gt; 2 class    logical\n#&gt; 3 n        8      \n#&gt; 4 n_rm_na  8      \n#&gt; 5 n_na     0      \n#&gt; 6 n_unique 2      \n#&gt; 7 mode     TRUE   \n#&gt; 8 'FALSE'  2      \n#&gt; 9 'TRUE'   6\n#&gt; \n#&gt; ── health_plan ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 9 × 2\n#&gt;   name     value      \n#&gt;   &lt;chr&gt;    &lt;chr&gt;      \n#&gt; 1 name     health_plan\n#&gt; 2 class    logical    \n#&gt; 3 n        8          \n#&gt; 4 n_rm_na  8          \n#&gt; 5 n_na     0          \n#&gt; 6 n_unique 2          \n#&gt; 7 mode     FALSE      \n#&gt; 8 'FALSE'  5          \n#&gt; 9 'TRUE'   3\n#&gt; \n#&gt; ── solo ─────────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 8 × 2\n#&gt;   name     value  \n#&gt;   &lt;chr&gt;    &lt;chr&gt;  \n#&gt; 1 name     solo   \n#&gt; 2 class    logical\n#&gt; 3 n        8      \n#&gt; 4 n_rm_na  8      \n#&gt; 5 n_na     0      \n#&gt; 6 n_unique 1      \n#&gt; 7 mode     FALSE  \n#&gt; 8 'FALSE'  8\n#&gt; \n#&gt; ── exercise ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 9 × 2\n#&gt;   name     value   \n#&gt;   &lt;chr&gt;    &lt;chr&gt;   \n#&gt; 1 name     exercise\n#&gt; 2 class    logical \n#&gt; 3 n        8       \n#&gt; 4 n_rm_na  3       \n#&gt; 5 n_na     5       \n#&gt; 6 n_unique 2       \n#&gt; 7 mode     &lt;NA&gt;    \n#&gt; 8 'FALSE'  3       \n#&gt; 9 'NA'     5",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#get-frequencies-for-categorical-variables",
    "href": "qmd/short-report-analysis.html#get-frequencies-for-categorical-variables",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.15 Get Frequencies for Categorical Variables",
    "text": "3.15 Get Frequencies for Categorical Variables\n\nCodecategorical_vars &lt;-\n  data |&gt;\n  select(where(is.character) | where(is.factor)) |&gt;\n  select(-id) |&gt;\n  names()\n\n\n\nfor (i in categorical_vars) {\n  cli::cli_h1(i)\n  cat_line()\n\n  data |&gt;\n    rutils:::stats_summary(col = i, name = i) |&gt;\n    print(n = Inf)\n\n  cat_line()\n}\n#&gt; \n#&gt; ── ethnicity ────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 9 × 2\n#&gt;   name     value    \n#&gt;   &lt;chr&gt;    &lt;chr&gt;    \n#&gt; 1 name     ethnicity\n#&gt; 2 class    character\n#&gt; 3 n        8        \n#&gt; 4 n_rm_na  8        \n#&gt; 5 n_na     0        \n#&gt; 6 n_unique 2        \n#&gt; 7 mode     Branca   \n#&gt; 8 'Branca' 5        \n#&gt; 9 'Parda'  3\n#&gt; \n#&gt; ── education ────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 10 × 2\n#&gt;    name                         value    \n#&gt;    &lt;chr&gt;                        &lt;chr&gt;    \n#&gt;  1 name                         education\n#&gt;  2 class                        character\n#&gt;  3 n                            8        \n#&gt;  4 n_rm_na                      3        \n#&gt;  5 n_na                         5        \n#&gt;  6 n_unique                     3        \n#&gt;  7 mode                         &lt;NA&gt;     \n#&gt;  8 'Ensino superior completo'   1        \n#&gt;  9 'Ensino superior incompleto' 2        \n#&gt; 10 'NA'                         5",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#get-descriptive-statistics-for-numerical-variables",
    "href": "qmd/short-report-analysis.html#get-descriptive-statistics-for-numerical-variables",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.16 Get Descriptive Statistics for Numerical Variables",
    "text": "3.16 Get Descriptive Statistics for Numerical Variables\n\nCodenumerical_vars &lt;-\n  data |&gt;\n  select(where(is.numeric) & !where(test_temporal)) |&gt;\n  names()\n\n\n\nfor (i in numerical_vars) {\n  cli::cli_h1(i)\n  cat_line()\n\n  data |&gt;\n    rutils:::stats_summary(col = i, name = i) |&gt;\n    print(n = Inf)\n\n  cat_line()\n}\n#&gt; \n#&gt; ── tts_fps_min ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     tts_fps_min       \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     74.5              \n#&gt;  7 var      102.789342857143  \n#&gt;  8 sd       10.138507920653   \n#&gt;  9 min      53.74             \n#&gt; 10 q_1      72.3425           \n#&gt; 11 median   75.155            \n#&gt; 12 q_3      79.485            \n#&gt; 13 max      86.54             \n#&gt; 14 iqr      7.1425            \n#&gt; 15 range    32.8              \n#&gt; 16 skewness -0.912218602334361\n#&gt; 17 kurtosis 3.36529459988671\n#&gt; \n#&gt; ── tts_fps_max ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     tts_fps_max      \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     91.5125          \n#&gt;  7 var      28.3536785714286 \n#&gt;  8 sd       5.32481723361737 \n#&gt;  9 min      80.35            \n#&gt; 10 q_1      90.9975          \n#&gt; 11 median   93.16            \n#&gt; 12 q_3      95.115           \n#&gt; 13 max      95.96            \n#&gt; 14 iqr      4.11749999999999 \n#&gt; 15 range    15.61            \n#&gt; 16 skewness -1.31503730665819\n#&gt; 17 kurtosis 3.4007954413498\n#&gt; \n#&gt; ── tts_fps_mean ─────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     tts_fps_mean     \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     83.4575          \n#&gt;  7 var      55.3157071428572 \n#&gt;  8 sd       7.43745300105198 \n#&gt;  9 min      67.11            \n#&gt; 10 q_1      81.65            \n#&gt; 11 median   85.535           \n#&gt; 12 q_3      87.0875          \n#&gt; 13 max      90.53            \n#&gt; 14 iqr      5.4375           \n#&gt; 15 range    23.42            \n#&gt; 16 skewness -1.37332390658847\n#&gt; 17 kurtosis 4.05998838116319\n#&gt; \n#&gt; ── tts_fps_sd ───────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     tts_fps_sd       \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     5.7525           \n#&gt;  7 var      5.60990714285714 \n#&gt;  8 sd       2.36852425422607 \n#&gt;  9 min      2.77             \n#&gt; 10 q_1      3.6325           \n#&gt; 11 median   5.74             \n#&gt; 12 q_3      7.39             \n#&gt; 13 max      9.2              \n#&gt; 14 iqr      3.7575           \n#&gt; 15 range    6.43             \n#&gt; 16 skewness 0.151697996588616\n#&gt; 17 kurtosis 1.61785884306129\n#&gt; \n#&gt; ── awakenings_min ───────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value              \n#&gt;    &lt;chr&gt;    &lt;chr&gt;              \n#&gt;  1 name     awakenings_min     \n#&gt;  2 class    numeric            \n#&gt;  3 n        8                  \n#&gt;  4 n_rm_na  8                  \n#&gt;  5 n_na     0                  \n#&gt;  6 mean     6.25               \n#&gt;  7 var      7.07142857142857   \n#&gt;  8 sd       2.65921578128376   \n#&gt;  9 min      3                  \n#&gt; 10 q_1      3.75               \n#&gt; 11 median   7                  \n#&gt; 12 q_3      8                  \n#&gt; 13 max      10                 \n#&gt; 14 iqr      4.25               \n#&gt; 15 range    7                  \n#&gt; 16 skewness -0.0913670741144738\n#&gt; 17 kurtosis 1.5497398224671\n#&gt; \n#&gt; ── awakenings_max ───────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value           \n#&gt;    &lt;chr&gt;    &lt;chr&gt;           \n#&gt;  1 name     awakenings_max  \n#&gt;  2 class    numeric         \n#&gt;  3 n        8               \n#&gt;  4 n_rm_na  8               \n#&gt;  5 n_na     0               \n#&gt;  6 mean     18.25           \n#&gt;  7 var      54.7857142857143\n#&gt;  8 sd       7.40173724781651\n#&gt;  9 min      10              \n#&gt; 10 q_1      13.75           \n#&gt; 11 median   17              \n#&gt; 12 q_3      20.25           \n#&gt; 13 max      34              \n#&gt; 14 iqr      6.5             \n#&gt; 15 range    24              \n#&gt; 16 skewness 1.17362467710077\n#&gt; 17 kurtosis 3.66796081517757\n#&gt; \n#&gt; ── awakenings_mean ──────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     awakenings_mean   \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     11.995            \n#&gt;  7 var      18.2689428571429  \n#&gt;  8 sd       4.27421839137202  \n#&gt;  9 min      5.83              \n#&gt; 10 q_1      8.85              \n#&gt; 11 median   12.045            \n#&gt; 12 q_3      14.645            \n#&gt; 13 max      18                \n#&gt; 14 iqr      5.795             \n#&gt; 15 range    12.17             \n#&gt; 16 skewness 0.0385331807574622\n#&gt; 17 kurtosis 1.71423444789972\n#&gt; \n#&gt; ── awakenings_sd ────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value           \n#&gt;    &lt;chr&gt;    &lt;chr&gt;           \n#&gt;  1 name     awakenings_sd   \n#&gt;  2 class    numeric         \n#&gt;  3 n        8               \n#&gt;  4 n_rm_na  8               \n#&gt;  5 n_na     0               \n#&gt;  6 mean     4               \n#&gt;  7 var      2.44614285714286\n#&gt;  8 sd       1.56401497983327\n#&gt;  9 min      2.27            \n#&gt; 10 q_1      3.2375          \n#&gt; 11 median   3.935           \n#&gt; 12 q_3      4.28            \n#&gt; 13 max      7.33            \n#&gt; 14 iqr      1.0425          \n#&gt; 15 range    5.06            \n#&gt; 16 skewness 1.11401515705523\n#&gt; 17 kurtosis 3.75987074989401\n#&gt; \n#&gt; ── begin_dilation ───────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value           \n#&gt;    &lt;chr&gt;    &lt;chr&gt;           \n#&gt;  1 name     begin_dilation  \n#&gt;  2 class    numeric         \n#&gt;  3 n        8               \n#&gt;  4 n_rm_na  8               \n#&gt;  5 n_na     0               \n#&gt;  6 mean     7               \n#&gt;  7 var      2               \n#&gt;  8 sd       1.4142135623731 \n#&gt;  9 min      5               \n#&gt; 10 q_1      6.75            \n#&gt; 11 median   7               \n#&gt; 12 q_3      7               \n#&gt; 13 max      10              \n#&gt; 14 iqr      0.25            \n#&gt; 15 range    5               \n#&gt; 16 skewness 0.97190864488087\n#&gt; 17 kurtosis 4\n#&gt; \n#&gt; ── baby_weight ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     baby_weight      \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     3111.875         \n#&gt;  7 var      102135.267857143 \n#&gt;  8 sd       319.586088334807 \n#&gt;  9 min      2740             \n#&gt; 10 q_1      2942.5           \n#&gt; 11 median   3045             \n#&gt; 12 q_3      3246.25          \n#&gt; 13 max      3730             \n#&gt; 14 iqr      303.75           \n#&gt; 15 range    990              \n#&gt; 16 skewness 0.749084967381625\n#&gt; 17 kurtosis 2.81157038625064\n#&gt; \n#&gt; ── baby_length ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     baby_length      \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     47.6875          \n#&gt;  7 var      3.85267857142857 \n#&gt;  8 sd       1.96282413155855 \n#&gt;  9 min      45.5             \n#&gt; 10 q_1      46               \n#&gt; 11 median   47.25            \n#&gt; 12 q_3      49.125           \n#&gt; 13 max      51               \n#&gt; 14 iqr      3.125            \n#&gt; 15 range    5.5              \n#&gt; 16 skewness 0.487767711973819\n#&gt; 17 kurtosis 1.90838904411972\n#&gt; \n#&gt; ── baby_head_perimeter ──────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value              \n#&gt;    &lt;chr&gt;    &lt;chr&gt;              \n#&gt;  1 name     baby_head_perimeter\n#&gt;  2 class    numeric            \n#&gt;  3 n        8                  \n#&gt;  4 n_rm_na  8                  \n#&gt;  5 n_na     0                  \n#&gt;  6 mean     33.0875            \n#&gt;  7 var      1.48982142857143   \n#&gt;  8 sd       1.22058241367448   \n#&gt;  9 min      31.2               \n#&gt; 10 q_1      32.375             \n#&gt; 11 median   33                 \n#&gt; 12 q_3      34                 \n#&gt; 13 max      35                 \n#&gt; 14 iqr      1.625              \n#&gt; 15 range    3.8                \n#&gt; 16 skewness 0.0252030765863941 \n#&gt; 17 kurtosis 2.13136007107699\n#&gt; \n#&gt; ── baby_thoracic_perimeter ──────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                  \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                  \n#&gt;  1 name     baby_thoracic_perimeter\n#&gt;  2 class    numeric                \n#&gt;  3 n        8                      \n#&gt;  4 n_rm_na  8                      \n#&gt;  5 n_na     0                      \n#&gt;  6 mean     32.4375                \n#&gt;  7 var      1.60267857142857       \n#&gt;  8 sd       1.26596941962615       \n#&gt;  9 min      31                     \n#&gt; 10 q_1      31.75                  \n#&gt; 11 median   32                     \n#&gt; 12 q_3      33.5                   \n#&gt; 13 max      34.5                   \n#&gt; 14 iqr      1.75                   \n#&gt; 15 range    3.5                    \n#&gt; 16 skewness 0.374885383181507      \n#&gt; 17 kurtosis 1.86203552113966\n#&gt; \n#&gt; ── baby_abdominal_perimeter ─────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                   \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                   \n#&gt;  1 name     baby_abdominal_perimeter\n#&gt;  2 class    numeric                 \n#&gt;  3 n        8                       \n#&gt;  4 n_rm_na  8                       \n#&gt;  5 n_na     0                       \n#&gt;  6 mean     30.9375                 \n#&gt;  7 var      3.10267857142857        \n#&gt;  8 sd       1.76144218509396        \n#&gt;  9 min      28                      \n#&gt; 10 q_1      30                      \n#&gt; 11 median   30.75                   \n#&gt; 12 q_3      32.125                  \n#&gt; 13 max      33.5                    \n#&gt; 14 iqr      2.125                   \n#&gt; 15 range    5.5                     \n#&gt; 16 skewness -0.162098591955275      \n#&gt; 17 kurtosis 2.15776202059935\n#&gt; \n#&gt; ── apgar_score_1_minute ─────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value               \n#&gt;    &lt;chr&gt;    &lt;chr&gt;               \n#&gt;  1 name     apgar_score_1_minute\n#&gt;  2 class    integer             \n#&gt;  3 n        8                   \n#&gt;  4 n_rm_na  8                   \n#&gt;  5 n_na     0                   \n#&gt;  6 mean     9                   \n#&gt;  7 var      0                   \n#&gt;  8 sd       0                   \n#&gt;  9 min      9                   \n#&gt; 10 q_1      9                   \n#&gt; 11 median   9                   \n#&gt; 12 q_3      9                   \n#&gt; 13 max      9                   \n#&gt; 14 iqr      0                   \n#&gt; 15 range    0                   \n#&gt; 16 skewness NaN                 \n#&gt; 17 kurtosis NaN\n#&gt; \n#&gt; ── apgar_score_5_minute ─────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value               \n#&gt;    &lt;chr&gt;    &lt;chr&gt;               \n#&gt;  1 name     apgar_score_5_minute\n#&gt;  2 class    integer             \n#&gt;  3 n        8                   \n#&gt;  4 n_rm_na  8                   \n#&gt;  5 n_na     0                   \n#&gt;  6 mean     10                  \n#&gt;  7 var      0                   \n#&gt;  8 sd       0                   \n#&gt;  9 min      10                  \n#&gt; 10 q_1      10                  \n#&gt; 11 median   10                  \n#&gt; 12 q_3      10                  \n#&gt; 13 max      10                  \n#&gt; 14 iqr      0                   \n#&gt; 15 range    0                   \n#&gt; 16 skewness NaN                 \n#&gt; 17 kurtosis NaN\n#&gt; \n#&gt; ── age ──────────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     age               \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     29.2003472222222  \n#&gt;  7 var      27.065602816358   \n#&gt;  8 sd       5.20246122680006  \n#&gt;  9 min      21.8361111111111  \n#&gt; 10 q_1      25.0847222222222  \n#&gt; 11 median   29.5208333333333  \n#&gt; 12 q_3      34.3548611111111  \n#&gt; 13 max      34.6166666666667  \n#&gt; 14 iqr      9.27013888888889  \n#&gt; 15 range    12.7805555555556  \n#&gt; 16 skewness -0.167796245966507\n#&gt; 17 kurtosis 1.39285363405217\n#&gt; \n#&gt; ── weight_before ────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     weight_before     \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     66.75             \n#&gt;  7 var      151.357142857143  \n#&gt;  8 sd       12.3027290816771  \n#&gt;  9 min      50                \n#&gt; 10 q_1      58.75             \n#&gt; 11 median   68                \n#&gt; 12 q_3      73.5              \n#&gt; 13 max      87                \n#&gt; 14 iqr      14.75             \n#&gt; 15 range    37                \n#&gt; 16 skewness 0.0856852230790232\n#&gt; 17 kurtosis 2.14914988571679\n#&gt; \n#&gt; ── weight_current ───────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     weight_current    \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     80.25             \n#&gt;  7 var      107.357142857143  \n#&gt;  8 sd       10.3613292032028  \n#&gt;  9 min      62                \n#&gt; 10 q_1      75.75             \n#&gt; 11 median   78                \n#&gt; 12 q_3      89.25             \n#&gt; 13 max      94                \n#&gt; 14 iqr      13.5              \n#&gt; 15 range    32                \n#&gt; 16 skewness -0.293774808039906\n#&gt; 17 kurtosis 2.30577434618454\n#&gt; \n#&gt; ── height ───────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     height            \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     161.125           \n#&gt;  7 var      63.5535714285714  \n#&gt;  8 sd       7.97204938698773  \n#&gt;  9 min      148               \n#&gt; 10 q_1      158.25            \n#&gt; 11 median   159.5             \n#&gt; 12 q_3      165.25            \n#&gt; 13 max      174               \n#&gt; 14 iqr      7                 \n#&gt; 15 range    26                \n#&gt; 16 skewness 0.0693762409985175\n#&gt; 17 kurtosis 2.49806627428723\n#&gt; \n#&gt; ── bmi_before ───────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     bmi_before        \n#&gt;  2 class    numeric           \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     25.5281928033487  \n#&gt;  7 var      8.47626423008758  \n#&gt;  8 sd       2.91140245072501  \n#&gt;  9 min      20.5456936226167  \n#&gt; 10 q_1      23.8060827930971  \n#&gt; 11 median   25.307754002811   \n#&gt; 12 q_3      28.0977985873214  \n#&gt; 13 max      28.8754400537953  \n#&gt; 14 iqr      4.2917157942243   \n#&gt; 15 range    8.32974643117864  \n#&gt; 16 skewness -0.319302799272042\n#&gt; 17 kurtosis 2.04128796287026\n#&gt; \n#&gt; ── bmi_current ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     bmi_current      \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     30.8498060929956 \n#&gt;  7 var      7.5472695581915  \n#&gt;  8 sd       2.7472294331183  \n#&gt;  9 min      26.609712545079  \n#&gt; 10 q_1      29.6349268398466 \n#&gt; 11 median   30.9331174887289 \n#&gt; 12 q_3      31.7091785122846 \n#&gt; 13 max      35.5998576005696 \n#&gt; 14 iqr      2.07425167243796 \n#&gt; 15 range    8.99014505549064 \n#&gt; 16 skewness 0.186586651959977\n#&gt; 17 kurtosis 2.57909194524704\n#&gt; \n#&gt; ── family_income ────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     family_income    \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     4475             \n#&gt;  7 var      3019285.71428571 \n#&gt;  8 sd       1737.60919492437 \n#&gt;  9 min      2500             \n#&gt; 10 q_1      2950             \n#&gt; 11 median   4250             \n#&gt; 12 q_3      6000             \n#&gt; 13 max      7000             \n#&gt; 14 iqr      3050             \n#&gt; 15 range    4500             \n#&gt; 16 skewness 0.197867678604843\n#&gt; 17 kurtosis 1.43751388342507\n#&gt; \n#&gt; ── gestations ───────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     gestations       \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     1.125            \n#&gt;  7 var      0.125            \n#&gt;  8 sd       0.353553390593274\n#&gt;  9 min      1                \n#&gt; 10 q_1      1                \n#&gt; 11 median   1                \n#&gt; 12 q_3      1                \n#&gt; 13 max      2                \n#&gt; 14 iqr      0                \n#&gt; 15 range    1                \n#&gt; 16 skewness 2.26778683805536 \n#&gt; 17 kurtosis 6.14285714285714\n#&gt; \n#&gt; ── deliveries ───────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value     \n#&gt;    &lt;chr&gt;    &lt;chr&gt;     \n#&gt;  1 name     deliveries\n#&gt;  2 class    numeric   \n#&gt;  3 n        8         \n#&gt;  4 n_rm_na  8         \n#&gt;  5 n_na     0         \n#&gt;  6 mean     0         \n#&gt;  7 var      0         \n#&gt;  8 sd       0         \n#&gt;  9 min      0         \n#&gt; 10 q_1      0         \n#&gt; 11 median   0         \n#&gt; 12 q_3      0         \n#&gt; 13 max      0         \n#&gt; 14 iqr      0         \n#&gt; 15 range    0         \n#&gt; 16 skewness NaN       \n#&gt; 17 kurtosis NaN\n#&gt; \n#&gt; ── abortions ────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     abortions        \n#&gt;  2 class    numeric          \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     0.125            \n#&gt;  7 var      0.125            \n#&gt;  8 sd       0.353553390593274\n#&gt;  9 min      0                \n#&gt; 10 q_1      0                \n#&gt; 11 median   0                \n#&gt; 12 q_3      0                \n#&gt; 13 max      1                \n#&gt; 14 iqr      0                \n#&gt; 15 range    1                \n#&gt; 16 skewness 2.26778683805536 \n#&gt; 17 kurtosis 6.14285714285714\n#&gt; \n#&gt; ── waso_prop ────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value              \n#&gt;    &lt;chr&gt;    &lt;chr&gt;              \n#&gt;  1 name     waso_prop          \n#&gt;  2 class    numeric            \n#&gt;  3 n        8                  \n#&gt;  4 n_rm_na  8                  \n#&gt;  5 n_na     0                  \n#&gt;  6 mean     0.168102790198121  \n#&gt;  7 var      0.00585152973492928\n#&gt;  8 sd       0.0764952922403025 \n#&gt;  9 min      0.0961136648558295 \n#&gt; 10 q_1      0.119528251640701  \n#&gt; 11 median   0.151053758491258  \n#&gt; 12 q_3      0.189124096709851  \n#&gt; 13 max      0.333564975677554  \n#&gt; 14 iqr      0.0695958450691496 \n#&gt; 15 range    0.237451310821724  \n#&gt; 16 skewness 1.29749349469256   \n#&gt; 17 kurtosis 3.82545148977042",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#get-descriptive-statistics-for-linear-temporal-variables",
    "href": "qmd/short-report-analysis.html#get-descriptive-statistics-for-linear-temporal-variables",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.17 Get Descriptive Statistics for Linear Temporal Variables",
    "text": "3.17 Get Descriptive Statistics for Linear Temporal Variables\n\nCodelinear_temporal_vars &lt;-\n  data |&gt;\n  select(where(test_temporal)) |&gt;\n  select(!starts_with(c(\"his_\", \"hfs_\"))) |&gt;\n  names()\n\n\n\nfor (i in linear_temporal_vars) {\n  cli::cli_h1(i)\n  cat_line()\n\n  data |&gt;\n    rutils:::stats_summary(\n      col = i,\n      name = i,\n      threshold = NULL\n    ) |&gt;\n    print(n = Inf)\n\n  cat_line()\n}\n#&gt; \n#&gt; ── labor_start ──────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                                \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                                \n#&gt;  1 name     labor_start                          \n#&gt;  2 class    POSIXct                              \n#&gt;  3 n        8                                    \n#&gt;  4 n_rm_na  8                                    \n#&gt;  5 n_na     0                                    \n#&gt;  6 mean     2024-01-15 05:28:07.5                \n#&gt;  7 var      410013741341250s (~12992551.44 years)\n#&gt;  8 sd       20248796.0467098s (~33.48 weeks)     \n#&gt;  9 min      2023-07-10 10:00:00                  \n#&gt; 10 q_1      2023-07-29 18:52:30                  \n#&gt; 11 median   2023-08-12 03:37:30                  \n#&gt; 12 q_3      2024-09-22 20:45:00                  \n#&gt; 13 max      2024-11-19 15:00:00                  \n#&gt; 14 iqr      36381150s (~1.15 years)              \n#&gt; 15 range    43045200s (~1.36 years)              \n#&gt; 16 skewness 0.534357534659942                    \n#&gt; 17 kurtosis 1.32651502851852\n#&gt; \n#&gt; ── labor_duration ───────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value              \n#&gt;    &lt;chr&gt;    &lt;chr&gt;              \n#&gt;  1 name     labor_duration     \n#&gt;  2 class    Duration           \n#&gt;  3 n        8                  \n#&gt;  4 n_rm_na  8                  \n#&gt;  5 n_na     0                  \n#&gt;  6 mean     16:13:45           \n#&gt;  7 var      349667:55:42.857143\n#&gt;  8 sd       09:51:19.635608    \n#&gt;  9 min      05:24:00           \n#&gt; 10 q_1      07:58:45           \n#&gt; 11 median   14:39:30           \n#&gt; 12 q_3      22:05:00           \n#&gt; 13 max      32:02:00           \n#&gt; 14 iqr      14:06:15           \n#&gt; 15 range    26:38:00           \n#&gt; 16 skewness 0.452083464933124  \n#&gt; 17 kurtosis 1.81255885134332\n#&gt; \n#&gt; ── fps_min ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     fps_min           \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     05:05:37.5        \n#&gt;  7 var      6701:07:30        \n#&gt;  8 sd       01:21:51.623968   \n#&gt;  9 min      02:38:00          \n#&gt; 10 q_1      04:38:15          \n#&gt; 11 median   05:30:00          \n#&gt; 12 q_3      05:51:00          \n#&gt; 13 max      06:34:00          \n#&gt; 14 iqr      01:12:45          \n#&gt; 15 range    03:56:00          \n#&gt; 16 skewness -0.807015554385345\n#&gt; 17 kurtosis 2.3784213565397\n#&gt; \n#&gt; ── fps_max ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     fps_max           \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     10:21:07.5        \n#&gt;  7 var      12856:58:55.714286\n#&gt;  8 sd       01:53:23.317993   \n#&gt;  9 min      07:15:00          \n#&gt; 10 q_1      09:32:45          \n#&gt; 11 median   10:21:30          \n#&gt; 12 q_3      11:05:30          \n#&gt; 13 max      13:40:00          \n#&gt; 14 iqr      01:32:45          \n#&gt; 15 range    06:25:00          \n#&gt; 16 skewness 0.125908998749297 \n#&gt; 17 kurtosis 2.80346275862514\n#&gt; \n#&gt; ── fps_mean ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     fps_mean          \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     07:52:48.75       \n#&gt;  7 var      2340:08:45.642857 \n#&gt;  8 sd       00:48:22.503341   \n#&gt;  9 min      06:38:50          \n#&gt; 10 q_1      07:27:25          \n#&gt; 11 median   08:00:37          \n#&gt; 12 q_3      08:23:07.5        \n#&gt; 13 max      08:53:36          \n#&gt; 14 iqr      00:55:42.5        \n#&gt; 15 range    02:14:46          \n#&gt; 16 skewness -0.397228889694323\n#&gt; 17 kurtosis 1.94475325088574\n#&gt; \n#&gt; ── fps_sd ───────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     fps_sd           \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     01:51:50.5       \n#&gt;  7 var      3131:23:14.285714\n#&gt;  8 sd       00:55:57.528002  \n#&gt;  9 min      00:39:54         \n#&gt; 10 q_1      01:13:51.5       \n#&gt; 11 median   01:32:40         \n#&gt; 12 q_3      02:45:17.5       \n#&gt; 13 max      03:10:58         \n#&gt; 14 iqr      01:31:26         \n#&gt; 15 range    02:31:04         \n#&gt; 16 skewness 0.250698331416651\n#&gt; 17 kurtosis 1.51901936936234\n#&gt; \n#&gt; ── tts_min ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     tts_min           \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     04:13:07.5        \n#&gt;  7 var      5566:41:47.142857 \n#&gt;  8 sd       01:14:36.617824   \n#&gt;  9 min      02:20:00          \n#&gt; 10 q_1      03:36:15          \n#&gt; 11 median   04:24:30          \n#&gt; 12 q_3      05:08:00          \n#&gt; 13 max      05:47:00          \n#&gt; 14 iqr      01:31:45          \n#&gt; 15 range    03:27:00          \n#&gt; 16 skewness -0.448405754630094\n#&gt; 17 kurtosis 1.88933901892605\n#&gt; \n#&gt; ── tts_max ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     tts_max          \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     08:28:45         \n#&gt;  7 var      8089:04:17.142857\n#&gt;  8 sd       01:29:56.355913  \n#&gt;  9 min      06:23:00         \n#&gt; 10 q_1      07:18:30         \n#&gt; 11 median   08:33:00         \n#&gt; 12 q_3      09:58:30         \n#&gt; 13 max      10:09:00         \n#&gt; 14 iqr      02:40:00         \n#&gt; 15 range    03:46:00         \n#&gt; 16 skewness -0.1809805396766 \n#&gt; 17 kurtosis 1.53738757625808\n#&gt; \n#&gt; ── tts_mean ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     tts_mean          \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     06:32:43          \n#&gt;  7 var      2587:56:16.857143 \n#&gt;  8 sd       00:50:52.306809   \n#&gt;  9 min      05:19:00          \n#&gt; 10 q_1      05:56:54          \n#&gt; 11 median   06:32:33.5        \n#&gt; 12 q_3      07:04:12.75       \n#&gt; 13 max      07:46:24          \n#&gt; 14 iqr      01:07:18.75       \n#&gt; 15 range    02:27:24          \n#&gt; 16 skewness 0.0532579260629448\n#&gt; 17 kurtosis 1.79178928590564\n#&gt; \n#&gt; ── tts_sd ───────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     tts_sd           \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     01:30:59.375     \n#&gt;  7 var      2375:34:32.839286\n#&gt;  8 sd       00:48:44.39273   \n#&gt;  9 min      00:33:49         \n#&gt; 10 q_1      00:52:24.5       \n#&gt; 11 median   01:18:01.5       \n#&gt; 12 q_3      02:11:43         \n#&gt; 13 max      02:40:19         \n#&gt; 14 iqr      01:19:18.5       \n#&gt; 15 range    02:06:30         \n#&gt; 16 skewness 0.312787530962688\n#&gt; 17 kurtosis 1.51447723606012\n#&gt; \n#&gt; ── waso_min ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value           \n#&gt;    &lt;chr&gt;    &lt;chr&gt;           \n#&gt;  1 name     waso_min        \n#&gt;  2 class    hms             \n#&gt;  3 n        8               \n#&gt;  4 n_rm_na  8               \n#&gt;  5 n_na     0               \n#&gt;  6 mean     00:36:00.875    \n#&gt;  7 var      543:22:06.125   \n#&gt;  8 sd       00:23:18.615789 \n#&gt;  9 min      00:17:07        \n#&gt; 10 q_1      00:23:15        \n#&gt; 11 median   00:28:00        \n#&gt; 12 q_3      00:40:45        \n#&gt; 13 max      01:29:00        \n#&gt; 14 iqr      00:17:30        \n#&gt; 15 range    01:11:53        \n#&gt; 16 skewness 1.61807914086609\n#&gt; 17 kurtosis 4.50135913156483\n#&gt; \n#&gt; ── waso_max ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     waso_max         \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     02:27:00         \n#&gt;  7 var      3714:51:25.714286\n#&gt;  8 sd       01:00:56.977675  \n#&gt;  9 min      01:07:00         \n#&gt; 10 q_1      01:52:30         \n#&gt; 11 median   02:17:30         \n#&gt; 12 q_3      02:50:30         \n#&gt; 13 max      04:08:00         \n#&gt; 14 iqr      00:58:00         \n#&gt; 15 range    03:01:00         \n#&gt; 16 skewness 0.487270039392007\n#&gt; 17 kurtosis 2.1607993715354\n#&gt; \n#&gt; ── waso_mean ────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     waso_mean        \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     01:20:02         \n#&gt;  7 var      1462:44:32.857143\n#&gt;  8 sd       00:38:14.748975  \n#&gt;  9 min      00:38:20         \n#&gt; 10 q_1      00:59:51.5       \n#&gt; 11 median   01:09:14.5       \n#&gt; 12 q_3      01:30:06.25      \n#&gt; 13 max      02:40:00         \n#&gt; 14 iqr      00:30:14.75      \n#&gt; 15 range    02:01:40         \n#&gt; 16 skewness 1.1471812063833  \n#&gt; 17 kurtosis 3.45485377016903\n#&gt; \n#&gt; ── waso_sd ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     waso_sd          \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     00:38:27.125     \n#&gt;  7 var      265:26:41.267857 \n#&gt;  8 sd       00:16:17.548601  \n#&gt;  9 min      00:17:07         \n#&gt; 10 q_1      00:25:24.75      \n#&gt; 11 median   00:36:59         \n#&gt; 12 q_3      00:51:10.75      \n#&gt; 13 max      01:00:18         \n#&gt; 14 iqr      00:25:46         \n#&gt; 15 range    00:43:11         \n#&gt; 16 skewness 0.150643192991655\n#&gt; 17 kurtosis 1.63028665575721\n#&gt; \n#&gt; ── partograph_begin ─────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                                \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                                \n#&gt;  1 name     partograph_begin                     \n#&gt;  2 class    POSIXct                              \n#&gt;  3 n        8                                    \n#&gt;  4 n_rm_na  8                                    \n#&gt;  5 n_na     0                                    \n#&gt;  6 mean     2023-11-18 15:10:00                  \n#&gt;  7 var      376809873711429s (~11940384.37 years)\n#&gt;  8 sd       19411591.2204906s (~32.1 weeks)      \n#&gt;  9 min      2023-06-08 14:40:00                  \n#&gt; 10 q_1      2023-07-20 11:22:30                  \n#&gt; 11 median   2023-07-30 16:07:30                  \n#&gt; 12 q_3      2023-12-09 01:30:00                  \n#&gt; 13 max      2024-11-20 05:15:00                  \n#&gt; 14 iqr      12233250s (~20.23 weeks)             \n#&gt; 15 range    45844500s (~1.45 years)              \n#&gt; 16 skewness 1.12606003073144                     \n#&gt; 17 kurtosis 2.31508604846515\n#&gt; \n#&gt; ── baby_birth ───────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                                \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                                \n#&gt;  1 name     baby_birth                           \n#&gt;  2 class    POSIXct                              \n#&gt;  3 n        8                                    \n#&gt;  4 n_rm_na  8                                    \n#&gt;  5 n_na     0                                    \n#&gt;  6 mean     2023-11-18 18:02:07.5                \n#&gt;  7 var      376721366481707s (~11937579.74 years)\n#&gt;  8 sd       19409311.3345556s (~32.09 weeks)     \n#&gt;  9 min      2023-06-08 17:54:00                  \n#&gt; 10 q_1      2023-07-20 15:13:15                  \n#&gt; 11 median   2023-07-30 19:00:30                  \n#&gt; 12 q_3      2023-12-09 04:33:15                  \n#&gt; 13 max      2024-11-20 06:02:00                  \n#&gt; 14 iqr      12230400s (~20.22 weeks)             \n#&gt; 15 range    45835680s (~1.45 years)              \n#&gt; 16 skewness 1.12604472970084                     \n#&gt; 17 kurtosis 2.31504841634914\n#&gt; \n#&gt; ── timestamp ────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                                \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                                \n#&gt;  1 name     timestamp                            \n#&gt;  2 class    POSIXct                              \n#&gt;  3 n        8                                    \n#&gt;  4 n_rm_na  8                                    \n#&gt;  5 n_na     0                                    \n#&gt;  6 mean     2023-12-22 00:44:03.375              \n#&gt;  7 var      428938220369039s (~13592231.99 years)\n#&gt;  8 sd       20710823.7491665s (~34.24 weeks)     \n#&gt;  9 min      2023-05-26 17:55:52                  \n#&gt; 10 q_1      2023-07-02 20:27:32                  \n#&gt; 11 median   2023-07-20 21:49:20                  \n#&gt; 12 q_3      2024-09-06 09:44:44                  \n#&gt; 13 max      2024-11-02 21:04:31                  \n#&gt; 14 iqr      37286232s (~1.18 years)              \n#&gt; 15 range    45457719s (~1.44 years)              \n#&gt; 16 skewness 0.521032391062454                    \n#&gt; 17 kurtosis 1.32186244260741\n#&gt; \n#&gt; ── birth_date ───────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value                             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;                             \n#&gt;  1 name     birth_date                        \n#&gt;  2 class    Date                              \n#&gt;  3 n        8                                 \n#&gt;  4 n_rm_na  8                                 \n#&gt;  5 n_na     0                                 \n#&gt;  6 mean     1994-10-09                        \n#&gt;  7 var      302993487771.429s (~9601.28 years)\n#&gt;  8 sd       161798137.639008s (~5.13 years)   \n#&gt;  9 min      1989-02-23                        \n#&gt; 10 q_1      1989-12-16                        \n#&gt; 11 median   1994-08-01                        \n#&gt; 12 q_3      1998-09-28                        \n#&gt; 13 max      2001-07-25                        \n#&gt; 14 iqr      277192800s (~8.78 years)          \n#&gt; 15 range    391824000s (~12.42 years)         \n#&gt; 16 skewness 0.140349408142377                 \n#&gt; 17 kurtosis 1.43088903557437",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#get-descriptive-statistics-for-circular-temporal-variables",
    "href": "qmd/short-report-analysis.html#get-descriptive-statistics-for-circular-temporal-variables",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.18 Get Descriptive Statistics for Circular Temporal Variables",
    "text": "3.18 Get Descriptive Statistics for Circular Temporal Variables\n\nCodecircular_temporal_vars &lt;-\n  data |&gt;\n  select(starts_with(c(\"his_\", \"hfs_\"))) |&gt;\n  names()\n\n\n\nfor (i in circular_temporal_vars) {\n  cli::cli_h1(i)\n  cat_line()\n\n  data |&gt;\n    rutils:::stats_summary(\n      col = i,\n      name = i,\n      threshold = hms::parse_hms(\"12:00:00\")\n    ) |&gt;\n    print(n = Inf)\n\n  cat_line()\n}\n#&gt; \n#&gt; ── his_min ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value              \n#&gt;    &lt;chr&gt;    &lt;chr&gt;              \n#&gt;  1 name     his_min            \n#&gt;  2 class    hms                \n#&gt;  3 n        8                  \n#&gt;  4 n_rm_na  8                  \n#&gt;  5 n_na     0                  \n#&gt;  6 mean     23:36:45.875       \n#&gt;  7 var      07:23:13.553571    \n#&gt;  8 sd       01:05:25.021472    \n#&gt;  9 min      21:49:11           \n#&gt; 10 q_1      23:11:55.25        \n#&gt; 11 median   23:47:34           \n#&gt; 12 q_3      00:02:26.5         \n#&gt; 13 max      01:26:15           \n#&gt; 14 iqr      00:50:31.25        \n#&gt; 15 range    03:37:04           \n#&gt; 16 skewness -0.0941746254793913\n#&gt; 17 kurtosis 2.65637132210873\n#&gt; \n#&gt; ── his_max ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     his_max           \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     02:39:38.375      \n#&gt;  7 var      10727:17:15.696429\n#&gt;  8 sd       01:43:34.357223   \n#&gt;  9 min      00:33:52          \n#&gt; 10 q_1      01:31:17          \n#&gt; 11 median   02:18:17          \n#&gt; 12 q_3      03:41:24.25       \n#&gt; 13 max      05:55:44          \n#&gt; 14 iqr      02:10:07.25       \n#&gt; 15 range    05:21:52          \n#&gt; 16 skewness 0.68968404084239  \n#&gt; 17 kurtosis 2.61116599640305\n#&gt; \n#&gt; ── his_mean ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value             \n#&gt;    &lt;chr&gt;    &lt;chr&gt;             \n#&gt;  1 name     his_mean          \n#&gt;  2 class    hms               \n#&gt;  3 n        8                 \n#&gt;  4 n_rm_na  8                 \n#&gt;  5 n_na     0                 \n#&gt;  6 mean     00:52:34.375      \n#&gt;  7 var      07:45:44.267857   \n#&gt;  8 sd       00:53:57.644864   \n#&gt;  9 min      23:20:21          \n#&gt; 10 q_1      00:30:18.25       \n#&gt; 11 median   00:56:13          \n#&gt; 12 q_3      01:17:25          \n#&gt; 13 max      02:18:45          \n#&gt; 14 iqr      00:47:06.75       \n#&gt; 15 range    02:58:24          \n#&gt; 16 skewness -0.161206833811361\n#&gt; 17 kurtosis 2.56481175382879\n#&gt; \n#&gt; ── his_sd ───────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     his_sd           \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     01:00:37.25      \n#&gt;  7 var      1857:17:47.928571\n#&gt;  8 sd       00:43:05.78188   \n#&gt;  9 min      00:19:45         \n#&gt; 10 q_1      00:38:27.5       \n#&gt; 11 median   00:49:16.5       \n#&gt; 12 q_3      01:03:19.25      \n#&gt; 13 max      02:40:43         \n#&gt; 14 iqr      00:24:51.75      \n#&gt; 15 range    02:20:58         \n#&gt; 16 skewness 1.73519232182682 \n#&gt; 17 kurtosis 4.90873114019185\n#&gt; \n#&gt; ── hfs_min ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value              \n#&gt;    &lt;chr&gt;    &lt;chr&gt;              \n#&gt;  1 name     hfs_min            \n#&gt;  2 class    hms                \n#&gt;  3 n        8                  \n#&gt;  4 n_rm_na  8                  \n#&gt;  5 n_na     0                  \n#&gt;  6 mean     05:51:00.875       \n#&gt;  7 var      10299:33:17.839286 \n#&gt;  8 sd       01:41:29.203383    \n#&gt;  9 min      03:28:52           \n#&gt; 10 q_1      04:43:34.25        \n#&gt; 11 median   05:40:17           \n#&gt; 12 q_3      07:20:48           \n#&gt; 13 max      08:02:52           \n#&gt; 14 iqr      02:37:13.75        \n#&gt; 15 range    04:34:00           \n#&gt; 16 skewness -0.0119700147728913\n#&gt; 17 kurtosis 1.62611241959334\n#&gt; \n#&gt; ── hfs_max ──────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     hfs_max          \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     07:57:08.375     \n#&gt;  7 var      20:47:24.267857  \n#&gt;  8 sd       06:37:57.647377  \n#&gt;  9 min      15:37:15         \n#&gt; 10 q_1      09:18:27.75      \n#&gt; 11 median   10:28:48         \n#&gt; 12 q_3      10:37:51.75      \n#&gt; 13 max      11:03:52         \n#&gt; 14 iqr      01:19:24         \n#&gt; 15 range    19:26:37         \n#&gt; 16 skewness -2.22258852667749\n#&gt; 17 kurtosis 6.02650638861947\n#&gt; \n#&gt; ── hfs_mean ─────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     hfs_mean         \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     08:46:39         \n#&gt;  7 var      5253:23:04.857143\n#&gt;  8 sd       01:12:28.81419   \n#&gt;  9 min      07:30:20         \n#&gt; 10 q_1      07:47:46.25      \n#&gt; 11 median   08:45:12.5       \n#&gt; 12 q_3      09:09:45.5       \n#&gt; 13 max      11:10:40         \n#&gt; 14 iqr      01:21:59.25      \n#&gt; 15 range    03:40:20         \n#&gt; 16 skewness 0.852450925906291\n#&gt; 17 kurtosis 2.96104725774348\n#&gt; \n#&gt; ── hfs_sd ───────────────────────────────────────────────────────────────────\n#&gt; \n#&gt; # A tibble: 17 × 2\n#&gt;    name     value            \n#&gt;    &lt;chr&gt;    &lt;chr&gt;            \n#&gt;  1 name     hfs_sd           \n#&gt;  2 class    hms              \n#&gt;  3 n        8                \n#&gt;  4 n_rm_na  8                \n#&gt;  5 n_na     0                \n#&gt;  6 mean     01:43:34.75      \n#&gt;  7 var      1673:03:55.928571\n#&gt;  8 sd       00:40:54.187427  \n#&gt;  9 min      00:55:05         \n#&gt; 10 q_1      01:12:37.5       \n#&gt; 11 median   01:30:56.5       \n#&gt; 12 q_3      02:16:37.25      \n#&gt; 13 max      02:48:43         \n#&gt; 14 iqr      01:03:59.75      \n#&gt; 15 range    01:53:38         \n#&gt; 16 skewness 0.429709274539085\n#&gt; 17 kurtosis 1.734846331192",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#plot-distributions",
    "href": "qmd/short-report-analysis.html#plot-distributions",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.19 Plot Distributions",
    "text": "3.19 Plot Distributions\n\n3.19.1 fps_mean\n\n\nCodedata |&gt;\n  plotr:::plot_dist(\n    col = \"fps_mean\",\n    line_color = \"red\"\n  )\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  plotr:::plot_box_plot(\n    col = \"fps_mean\",\n    line_color = \"red\"\n  )\n\n\n\n\n\n\n\n\n3.19.2 bmi_current\n\n\nCodedata |&gt;\n  plotr:::plot_dist(\n    col = \"bmi_current\",\n    line_color = \"red\"\n  )\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  plotr:::plot_box_plot(\n    col = \"bmi_current\",\n    line_color = \"red\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/short-report-analysis.html#plot-correlation-matrices",
    "href": "qmd/short-report-analysis.html#plot-correlation-matrices",
    "title": "\n3  Short Report Analysis\n",
    "section": "\n3.20 Plot Correlation Matrices",
    "text": "3.20 Plot Correlation Matrices\n\nCodedata |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"labor_duration\", \"age\", \"family_income\", \"bmi_before\"\n    ),\n    labels = c(\n      \"Duração do parto\", \"Idade\", \"Renda familiar\", \"IMC\"\n    )\n  )\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"labor_duration\", \"gestations\", \"deliveries\", \"abortions\"\n    ),\n    labels = c(\n      \"Duração do parto\", \"# Gestações\", \"# Partos\", \"# Abortos\"\n    )\n  )\n#&gt; Warning in cor(x, y): the standard deviation is zero\n#&gt; Warning in cor(x, y): the standard deviation is zero\n#&gt; Warning in cor(x, y): the standard deviation is zero\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"labor_duration\", \"baby_weight\", \"baby_length\",\n      \"baby_head_perimeter\",  \"baby_thoracic_perimeter\",\n      \"baby_abdominal_perimeter\"\n    ),\n    labels = c(\n      \"Duração do parto\", \"Peso do bebê\", \"Comprimento do bebê\",\n      \"Per. da cabeça do bebê\", \"Per. torácico do bebê\", \"Per. abdominal do bebê\"\n    )\n  )\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  plotr:::plot_ggally(\n    cols = c(\"labor_duration\", \"fps_mean\", \"waso_mean\", \"awakenings_mean\"),\n    labels = c(\"Duração do parto\", \"FPS\", \"WASO\", \"Desp.\")\n  )\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  mutate(\n    his_mean = his_mean |&gt; link_to_timeline(),\n    hfs_mean = hfs_mean |&gt; link_to_timeline()\n  ) |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"his_mean\", \"hfs_mean\", \"fps_mean\", \"tts_mean\", \"tts_fps_mean\",\n       \"waso_mean\", \"awakenings_mean\"\n    ),\n    labels = c(\n      \"HIS\", \"HFS\", \"FPS\", \"TTS\", \"TTS/FPS\", \"WASO\", \"Desp.\"\n    ),\n    brandr = FALSE\n  )\n\n\n\n\n\n\n\n\nCodedata |&gt;\n  plotr:::plot_ggally(\n    cols = c(\n      \"fps_mean\", \"tts_mean\", \"waso_mean\", \"awakenings_mean\",\n      \"age\", \"family_income\", \"bmi_before\"\n    ),\n    labels = c(\n      \"FPS\", \"TTS\", \"WASO\", \"Desp.\", \"Idade\", \"Renda\", \"IMC\"\n    )\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Short Report Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html",
    "href": "qmd/sri-analysis.html",
    "title": "\n4  SRI Analysis\n",
    "section": "",
    "text": "4.1 Overview",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#set-the-environment",
    "href": "qmd/sri-analysis.html#set-the-environment",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.2 Set the Environment",
    "text": "4.2 Set the Environment\n\n4.2.1 Load Packages\n\nCodelibrary(actverse) # github.com/danielvartan/actverse\nlibrary(askpass)\nlibrary(broom)\nlibrary(checkmate)\nlibrary(cli)\nlibrary(colorspace)\nlibrary(effectsize)\nlibrary(fs)\nlibrary(geepack)\nlibrary(ggplot2)\nlibrary(glmtoolbox)\nlibrary(googlesheets4)\nlibrary(here)\nlibrary(hms)\nlibrary(infer)\nlibrary(janitor)\nlibrary(lockr) # github.com/danielvartan/lockr\nlibrary(lubridate)\nlibrary(lubritime) # github.com/danielvartan/lubritime\nlibrary(magrittr)\nlibrary(orbis) # github.com/danielvartan/orbis\nlibrary(patchwork)\nlibrary(parsnip)\nlibrary(performance)\nlibrary(plotr) # github.com/danielvartan/plotr\nlibrary(prettycheck) # github.com/danielvartan/prettycheck\nlibrary(psychometric)\nlibrary(pwr)\nlibrary(pwrss)\nlibrary(readr)\nlibrary(rutils) # github.com/danielvartan/rutils\nlibrary(scaler) # github.com/danielvartan/scaler\nlibrary(scales)\nlibrary(sodium)\nlibrary(stats)\nlibrary(stringr)\nlibrary(summarytools)\nlibrary(tidyr)\nlibrary(tsibble)\n\n\n\n4.2.2 Load Custom Functions\n\nCodesource(here(\"R\", \"anonymize_id.R\"))\nsource(here(\"R\", \"ga.R\"))\n\n\n\n4.2.3 Set Data Directories\n\nCodedata_dir &lt;- here(\"data\")\nprocessed_data_dir &lt;- here(\"data\", \"processed\")\nprocessed_actigraphy_data_dir &lt;- here(\"data\", \"processed\", \"actigraphy\")\nsri_data_dir &lt;- here(\"data\", \"sri\")\nsleep_prop_dir &lt;- here(\"data\", \"sleep-prop\")\nlux_data_dir &lt;- here(\"data\", \"lux\")\n\n\n\nCodefor (i in ls(pattern = \"_dir$\")) {\n  if (!dir_exists(get(i))) dir_create(get(i), recurse = TRUE)\n}\n\n\n\n4.2.4 Set Keys\n\nCodegs4_auth(\n  cache = here(\".secrets\"),\n  email = TRUE,\n  use_oob = FALSE\n)\n\n\n\nCodesalt &lt;- Sys.getenv(\"PREGNANCY_SALT\") # askpass()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#set-exclusion-criteria",
    "href": "qmd/sri-analysis.html#set-exclusion-criteria",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.3 Set Exclusion Criteria",
    "text": "4.3 Set Exclusion Criteria\n\n\n\n\n\n\nFor SRI Data:\n\nLast updated: 2025-09-19\n\n\nn = 44\n5 days (drops 6) + 75% (drops 11): 27\n5 days (drops 6) + 62.5% (drops 2): 36\n4 days (drops 3) + 62.5% (drops 2): 39 # Ok\n4 days (drops 3) + 50% (drops 1): 40 # Ok\n\n1 of the 40 was dropped when filtering the gestacional age range.\n\n\n\n\nCodemin_days &lt;- 4\nmin_valid_data &lt;- 0.5 # By `sri` and gestational age (they are related)",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#download-and-import-the-control-form-data",
    "href": "qmd/sri-analysis.html#download-and-import-the-control-form-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.4 Download and Import the Control Form Data",
    "text": "4.4 Download and Import the Control Form Data\n\nCodecontrol_form_data &lt;-\n  \"13wtDr4fRD1wJSM-qdLOdGSchF8oXU1bG0Jtccu24GhY\" |&gt;\n  read_sheet(\n    sheet = \"Dataset\",\n    col_types = \"c\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#download-and-import-the-field-form-data",
    "href": "qmd/sri-analysis.html#download-and-import-the-field-form-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.5 Download and Import the Field Form Data",
    "text": "4.5 Download and Import the Field Form Data\n\nCodefield_form_data &lt;-\n  \"1tY_TT0nPXFsErYQS2VED0-hqTzgHudA9BfhRhYG19fw\" |&gt;\n  read_sheet(\n    sheet = \"Dataset\",\n    col_types = \"c\"\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#download-actigraphy-processed-data-from-osf",
    "href": "qmd/sri-analysis.html#download-actigraphy-processed-data-from-osf",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.6 Download Actigraphy Processed Data from OSF",
    "text": "4.6 Download Actigraphy Processed Data from OSF\n\n\n\n\n\n\nSee the osf.qmd Quarto notebook to download and decrypt the actigraphy processed data from OSF.",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#filter-and-tidy-the-control-form-data",
    "href": "qmd/sri-analysis.html#filter-and-tidy-the-control-form-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.7 Filter and Tidy the Control Form Data",
    "text": "4.7 Filter and Tidy the Control Form Data\n\nCodecontrol_form_data &lt;-\n  control_form_data |&gt;\n  `names&lt;-`(paste0(\"X\", seq_along(control_form_data))) |&gt;\n  dplyr::select(X5, X6, X12, X39, X40) |&gt;\n  rename(\n    cpf = X5,\n    id = X6,\n    birth_center_delivery = X12,\n    ultrasound_date = X40,\n    ultrasound_ga = X39\n  ) |&gt;\n  mutate(\n    birth_center_delivery = case_when(\n      tolower(trimws(birth_center_delivery)) == \"sim\" ~ TRUE,\n      tolower(trimws(birth_center_delivery)) == \"não\" ~ FALSE,\n      TRUE ~ NA\n    ),\n    ultrasound_date = ymd(ultrasound_date),\n    ga_start = if_else(\n      is.na(ultrasound_ga),\n      as.Date(NA),\n      ga_start(\n        ultrasound = ultrasound_date,\n        ga =\n          str_extract(ultrasound_ga, \"^\\\\d{1,2}\") |&gt;\n          as.integer() |&gt;\n          weeks() |&gt;\n          add(\n            str_extract(ultrasound_ga, \"\\\\d(?= di)\") |&gt;\n            as.integer() |&gt;\n            days()\n          )\n      )\n    )\n  ) |&gt;\n  dplyr::select(id, birth_center_delivery, ga_start)\n\n\n\ncontrol_form_data |&gt; glimpse()\n#&gt; Rows: 54\n#&gt; Columns: 3\n#&gt; $ id                    &lt;chr&gt; \"9e858cd8\", \"4b44f0ff\", \"a053ce64\", \"02250df5…\n#&gt; $ birth_center_delivery &lt;lgl&gt; FALSE, FALSE, TRUE, TRUE, FALSE, FALSE, NA, T…\n#&gt; $ ga_start              &lt;date&gt; 2022-09-03, 2022-08-16, 2022-09-03, 2022-10-…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#filter-and-tidy-the-field-form-data",
    "href": "qmd/sri-analysis.html#filter-and-tidy-the-field-form-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.8 Filter and Tidy the Field Form Data",
    "text": "4.8 Filter and Tidy the Field Form Data\n\nCodefield_form_data &lt;-\n  field_form_data |&gt;\n  `names&lt;-`(paste0(\"X\", seq_along(field_form_data))) |&gt;\n  dplyr::select(\n    X1, X4, X5, X11, X91, X92, X95, X96, X97, X99, X101, X102, X106, X119,\n    X118, X125, X126\n  ) |&gt;\n  rename(\n    timestamp = X1,\n    birth_date = X4,\n    cpf = X5,\n    weight_before = X96,\n    weight_current = X95,\n    height = X97,\n    ethnicity = X106,\n    education = X118,\n    family_income = X99,\n    health_plan = X101,\n    solo = X102,\n    exercise = X119,\n    work = X92,\n    study = X91,\n    gestations = X11,\n    deliveries = X125,\n    abortions = X126\n  ) |&gt;\n  mutate(\n    id = anonymize_id(cpf, salt),\n    timestamp = mdy_hms(timestamp),\n    birth_date = dmy(birth_date),\n    age = scaler:::age(birth_date, timestamp),\n    ethnicity = factor(\n      ethnicity,\n      levels = c(\n        \"Indígena\",\n        \"Preta\",\n        \"Parda\",\n        \"Amarela\",\n        \"Branca\"\n      ),\n      ordered = TRUE\n    ),\n    education = factor(\n      education,\n      levels = c(\n        \"Não frequentou a escola\",\n        \"Fundamental incompleto\",\n        \"Fundamental completo\",\n        \"Ensino médio incompleto\",\n        \"Ensino médio completo\",\n        \"Ensino superior incompleto\",\n        \"Ensino superior completo\",\n        \"Mestrado incompleto\",\n        \"Mestrado completo\",\n        \"Doutorado incompleto\",\n        \"Doutorado completo\",\n        \"Pós-doutorado incompleto\",\n        \"Pós-doutorado completo\"\n      ),\n      ordered = TRUE\n    ),\n    gestations = case_match(\n      gestations,\n      c(\"Sim\", \"0\") ~ \"1\",\n      \"Não\" ~ \"0\",\n      .default = gestations\n    ),\n    deliveries = case_when(\n      is.na(deliveries) ~ \"0\",\n      TRUE ~ deliveries\n    ),\n    abortions = case_when(\n      is.na(abortions) ~ \"0\",\n      TRUE ~ abortions\n    )\n  ) |&gt;\n  mutate(\n    across(\n      .cols = all_of(\n        c(\n          \"weight_before\", \"weight_current\", \"height\",\n          \"family_income\", \"gestations\", \"deliveries\",\n          \"abortions\"\n        )\n      ),\n      .fns = as.numeric\n    )\n  ) |&gt;\n  mutate(\n    across(\n      .cols = all_of(\n        c(\"health_plan\", \"solo\", \"exercise\", \"work\", \"study\")\n      ),\n      .fns = function(x) {\n        case_match(\n          x,\n          \"Sim\" ~ TRUE,\n          \"Não\" ~ FALSE\n        )\n      }\n    )\n  ) |&gt;\n  mutate(\n    gestations = case_when(\n      id == \"ae5fc5cd\" ~ 3,\n      TRUE ~ gestations\n    ),\n  ) |&gt;\n  mutate(\n    bmi_before = weight_before / ((height / 100)^2),\n    bmi_current = weight_current / ((height / 100)^2)\n  ) |&gt;\n  dplyr::select(-cpf) |&gt;\n  relocate(\n    id, timestamp, birth_date, age, weight_before, weight_current, height, bmi_before, bmi_current, family_income\n  )\n\n\n\nfield_form_data |&gt; glimpse()\n#&gt; Rows: 74\n#&gt; Columns: 20\n#&gt; $ id             &lt;chr&gt; \"9e858cd8\", \"a053ce64\", \"b37bd425\", \"db850249\", \"022…\n#&gt; $ timestamp      &lt;dttm&gt; 2023-05-21 11:18:49, 2023-05-26 17:55:52, 2023-06-3…\n#&gt; $ birth_date     &lt;date&gt; 1991-03-22, 2001-07-25, 1989-02-23, 1998-01-12, 199…\n#&gt; $ age            &lt;dbl&gt; 32.16388889, 21.83611111, 34.35277778, 25.47222222, …\n#&gt; $ weight_before  &lt;dbl&gt; 70, 50, 87, 70, 64, 84, 49, 60, 75, 66, 64, 72, 92, …\n#&gt; $ weight_current &lt;dbl&gt; 86, 75, 94, 76, 78, 87, 58, 91, 89, 79, 76, 89, 110,…\n#&gt; $ height         &lt;dbl&gt; 160, 156, 174, 169, 153, 168, 157, 164, 164, 159, 16…\n#&gt; $ bmi_before     &lt;dbl&gt; 27.34375000, 20.54569362, 28.73563218, 24.50894577, …\n#&gt; $ bmi_current    &lt;dbl&gt; 33.59375000, 30.81854043, 31.04769454, 26.60971255, …\n#&gt; $ family_income  &lt;dbl&gt; 4000, 2800, 6000, 5000, 3000, 4000, 3000, 9000, 6000…\n#&gt; $ gestations     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1…\n#&gt; $ study          &lt;lgl&gt; FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…\n#&gt; $ work           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, TR…\n#&gt; $ health_plan    &lt;lgl&gt; FALSE, FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE…\n#&gt; $ solo           &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…\n#&gt; $ ethnicity      &lt;ord&gt; Branca, Parda, Branca, Branca, Parda, Parda, Branca,…\n#&gt; $ exercise       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n#&gt; $ education      &lt;ord&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n#&gt; $ deliveries     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0…\n#&gt; $ abortions      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#import-tidy-and-transform-the-processed-actigraphy-data",
    "href": "qmd/sri-analysis.html#import-tidy-and-transform-the-processed-actigraphy-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.9 Import, Tidy and Transform the Processed Actigraphy Data",
    "text": "4.9 Import, Tidy and Transform the Processed Actigraphy Data\n\n4.9.1 Get Paths to Processed Actigraphy Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = processed_actigraphy_data_dir,\n    type = \"file\",\n    regexp = \".txt$\"\n  )\n\n\n\n4.9.2 Import, Tidy, Transform, and Write Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_actigraphy-processed-data.txt\")\n\n  i_ga_start &lt;-\n    control_form_data |&gt;\n    filter(id == i_id) |&gt;\n    pull(ga_start)\n\n  i_data &lt;-\n    i |&gt;\n    read_acttrust(tz = \"America/Sao_Paulo\") |&gt;\n    mutate(\n      ga =\n        i_ga_start |&gt;\n        ga_point(timestamp) |&gt;\n        as.numeric() |&gt;\n        as.duration() |&gt;\n        add(\n          as_hms(timestamp) |&gt;\n            as.numeric() |&gt;\n            as.duration()\n        ),\n      ga_week =\n        ga |&gt;\n        as.numeric() |&gt;\n        divide_by(\n          ddays(7) |&gt;\n            as.numeric()\n        ) |&gt;\n        as.integer()\n    ) |&gt;\n    suppressMessages() |&gt;\n    suppressWarnings()\n\n  i_data |&gt;\n    write_rds(\n      path(\n        processed_actigraphy_data_dir,\n        paste0(i_id, \"_actigraphy-processed-data.rds\")\n      )\n    )\n\n  cli_progress_update()\n}\n\ncli_progress_done()",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#compute-sri",
    "href": "qmd/sri-analysis.html#compute-sri",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.10 Compute SRI",
    "text": "4.10 Compute SRI\n\n4.10.1 Delete Old SRI Data Files\n\nCodeold_files &lt;-\n  dir_ls(\n    path = sri_data_dir,\n    type = \"file\",\n    regexp = \"sri\"\n  )\n\nif (length(old_files) &gt; 0) file_delete(old_files)\n\n\n\n4.10.2 Get Paths to Tidy and Transformed Actigraphy Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = processed_actigraphy_data_dir,\n    type = \"file\",\n    regexp = \"_actigraphy-processed-data.rds$\"\n  )\n\n\n\n4.10.3 Import Tidy and Transformed Actigraphy Data, Compute SRI and Write SRI Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_actigraphy-processed-data.rds\")\n\n  i_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    as_tibble() |&gt;\n    group_by(ga_week) |&gt;\n    mutate(\n      ga_week_available_days = (n() * 60) / as.numeric(ddays(1))\n    ) |&gt;\n    ungroup(ga_week) |&gt;\n    filter(ga_week_available_days &gt;= min_days) |&gt;\n    as_tsibble(index = timestamp)\n\n  if (nrow(i_data) == 0) {\n    cli_alert_info(\n      paste0(\n        \"{.strong {col_red(i_id)}} was dropped because it has no gestational \",\n        \"week with at least {min_days} days of data.\"\n      )\n    )\n\n    cli_progress_update()\n\n    next\n  }\n\n  i_sri_data &lt;- tibble()\n\n  for (j in unique(i_data$ga_week)) {\n    j_data &lt;- i_data |&gt; filter(ga_week == j)\n    j_data_first_index &lt;- which(i_data$ga_week == j)[1]\n\n    if (j_data_first_index &gt; 1) {\n      j_data &lt;-\n        i_data |&gt;\n        slice(seq(j_data_first_index - 1440, j_data_first_index - 1)) |&gt;\n        as_tibble() |&gt;\n        bind_rows(j_data |&gt; as_tibble()) |&gt;\n        as_tsibble(index = timestamp)\n    }\n\n    i_sri_data &lt;-\n      i_sri_data |&gt;\n      bind_rows(\n        j_data |&gt;\n          sri(\n            sleeping_states = c(1, 2),\n            awake_states = 0,\n            min_data = min_valid_data\n          ) |&gt;\n          mutate(\n            id = i_id,\n            ga_week = j\n          ) |&gt;\n          as_tibble()\n      )\n  }\n\n  i_sri_data &lt;-\n    i_sri_data |&gt;\n    drop_na(sri) |&gt;\n    group_by(ga_week) |&gt;\n    mutate(dummy = n() &gt;= (1440 * min_valid_data)) |&gt;\n    ungroup() |&gt;\n    filter(dummy) |&gt;\n    dplyr::select(-dummy)\n\n  if (nrow(i_sri_data) == 0) {\n    cli_alert_info(\n      paste0(\n        \"{.strong {col_red(i_id)}} was dropped because it has no gestational \",\n        \"week with at least {round(min_valid_data * 100, 2)}% of SRI data.\"\n      )\n    )\n\n    cli_progress_update()\n\n    next\n  }\n\n  i_sri_data |&gt;\n    write_rds(\n      path(\n        sri_data_dir,\n        paste0(i_id, \"_sri-data.rds\"))\n      )\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.10.4 Group and Transform SRI Data\n\n4.10.4.1 Get Paths to SRI Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = sri_data_dir,\n    type = \"file\",\n    regexp = \"_sri-data.rds$\"\n  )\n\n\n\n4.10.4.2 Group and Transform SRI Data\n\nCodesri_data &lt;- tibble()\n\ncli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  sri_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    mutate(\n      time =\n        time |&gt;\n        as.numeric() |&gt;\n        divide_by(60) |&gt;\n        as.integer() |&gt;\n        dminutes() |&gt;\n        as.numeric() |&gt;\n        as_hms()\n    ) |&gt;\n    bind_rows(sri_data)\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\nCodesri_data &lt;-\n  sri_data |&gt;\n  mutate(ga_week = as.factor(ga_week)) |&gt;\n  arrange(ga_week)\n\n\n\nsri_data |&gt; glimpse()\n#&gt; Rows: 161,181\n#&gt; Columns: 8\n#&gt; $ time           &lt;time&gt; 00:00:00, 00:01:00, 00:02:00, 00:03:00, 00:04:00, 0…\n#&gt; $ state          &lt;list&gt; &lt;Sleeping, Awake, Sleeping, Awake, Sleeping, Sleepi…\n#&gt; $ previous_state &lt;list&gt; &lt;NA, Sleeping, Awake, Sleeping, Awake, Sleeping, Sl…\n#&gt; $ agreement      &lt;list&gt; &lt;NA, FALSE, FALSE, FALSE, FALSE, TRUE, FALSE&gt;, &lt;NA,…\n#&gt; $ sri            &lt;dbl&gt; -66.66666667, -66.66666667, -66.66666667, -66.666666…\n#&gt; $ valid_data     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ id             &lt;chr&gt; \"e06521cc\", \"e06521cc\", \"e06521cc\", \"e06521cc\", \"e06…\n#&gt; $ ga_week        &lt;fct&gt; 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, …\n\n\n4.10.5 Compute SRI Mean Data by Gestational Week\n\n4.10.5.1 Get Paths to SRI Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = sri_data_dir,\n    type = \"file\",\n    regexp = \"_sri-data.rds$\"\n  )\n\n\n\n4.10.5.2 Summarize SRI Means by Gestational Week and Write SRI Mean Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_sri-data.rds\")\n\n  i_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    as_tibble() |&gt;\n    group_by(ga_week) |&gt;\n    summarize(sri = mean(sri, na.rm = TRUE)) |&gt;\n    mutate(id = i_id) |&gt;\n    dplyr::select(id, ga_week, sri)\n\n  i_data |&gt;\n    write_rds(\n      path(\n        sri_data_dir,\n        paste0(i_id, \"_sri-mean-data.rds\")\n      )\n    )\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.10.6 Group and Transform SRI Mean Data\n\n4.10.6.1 Get Paths to SRI Mean Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = sri_data_dir,\n    type = \"file\",\n    regexp = \"_sri-mean-data.rds$\"\n  )\n\n\n\n4.10.6.2 Import and Group SRI Mean Data\n\nCodesri_mean_data &lt;- tibble()\n\ncli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  sri_mean_data &lt;-\n    i |&gt;\n    read_rds(i) |&gt;\n    bind_rows(sri_mean_data)\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.10.6.3 Transform SRI Mean Data\n\nCodesri_mean_data &lt;-\n  sri_mean_data |&gt;\n  mutate(ga_week = as.factor(ga_week)) |&gt;\n  arrange(ga_week)\n\n\n\nsri_mean_data |&gt; glimpse()\n#&gt; Rows: 118\n#&gt; Columns: 3\n#&gt; $ id      &lt;chr&gt; \"e06521cc\", \"4cda994c\", \"e06521cc\", \"a8194247\", \"9e43829a\",…\n#&gt; $ ga_week &lt;fct&gt; 33, 33, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 35, 35,…\n#&gt; $ sri     &lt;dbl&gt; 73.75293015, 50.77314815, 68.65350746, 75.85648148, 53.3755…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#get-sri-data-unique-ids",
    "href": "qmd/sri-analysis.html#get-sri-data-unique-ids",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.11 Get SRI Data Unique IDs",
    "text": "4.11 Get SRI Data Unique IDs\n\nCodesri_data_ids &lt;- sri_data |&gt; pull(id) |&gt; unique()\n\n\n\nsri_data_ids\n#&gt;  [1] \"e06521cc\" \"4cda994c\" \"a8194247\" \"9e43829a\" \"5f28e20f\" \"5024b37e\"\n#&gt;  [7] \"3c2a132a\" \"ff8105e4\" \"f207fd6b\" \"b1c46113\" \"6ff93997\" \"1193992a\"\n#&gt; [13] \"f46f88c5\" \"b5b1d89e\" \"aeab920e\" \"a4899cae\" \"a027a958\" \"8369d5e8\"\n#&gt; [19] \"619b1d43\" \"2dec1b47\" \"1c559275\" \"d3350e10\" \"c826aad6\" \"b21511da\"\n#&gt; [25] \"9e858cd8\" \"6f89b17f\" \"5af4817a\" \"4c84ce02\" \"36566db2\" \"3196960f\"\n#&gt; [31] \"1d215e39\" \"18d5bdc1\" \"16791cc5\" \"f1e30a89\" \"db850249\" \"a053ce64\"\n#&gt; [37] \"7cbf7851\" \"4b44f0ff\" \"225f2a39\" \"0d483b7f\"",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#compute-sleep-proportions",
    "href": "qmd/sri-analysis.html#compute-sleep-proportions",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.12 Compute Sleep Proportions",
    "text": "4.12 Compute Sleep Proportions\n\n4.12.1 Delete Old Sleep Proportion Files\n\nCodeold_files &lt;-\n  dir_ls(\n    path = sleep_prop_dir,\n    type = \"file\",\n    regexp = \"sleep-prop\"\n  )\n\nif (length(old_files) &gt; 0) file_delete(old_files)\n\n\n\n4.12.2 Get Paths to Tidy and Transformed Actigraphy Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = processed_actigraphy_data_dir,\n    type = \"file\",\n    regexp = \"_actigraphy-processed-data.rds$\"\n  )\n\n\n\n4.12.3 Import Tidy and Transformed Actigraphy Data, Compute Sleep Proportions and Write Sleep Proportion Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_actigraphy-processed-data.rds\")\n\n  if (!i_id %in% sri_data_ids) next\n\n  i_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    as_tibble() |&gt;\n    group_by(ga_week) |&gt;\n    mutate(\n      ga_week_available_days = (n() * 60) / as.numeric(ddays(1))\n    ) |&gt;\n    ungroup(ga_week) |&gt;\n    filter(ga_week_available_days &gt;= min_days) |&gt;\n    as_tsibble(index = timestamp)\n\n  if (nrow(i_data) == 0) {\n    cli_alert_info(\n      paste0(\n        \"{.strong {col_red(i_id)}} was dropped because it has no gestational \",\n        \"week with at least {min_days} days of data.\"\n      )\n    )\n\n    cli_progress_update()\n\n    next\n  }\n\n  i_sleep_prop_data &lt;- tibble()\n\n  for (j in unique(i_data$ga_week)) {\n    j_data &lt;- i_data |&gt; filter(ga_week == j)\n\n    i_sleep_prop_data &lt;-\n      i_sleep_prop_data |&gt;\n      bind_rows(\n        j_data |&gt;\n          state_prop(\n            state_values = 1 # Just \"Sleeping\", not \"Resting\" (2)\n          ) |&gt;\n          mutate(\n            id = i_id,\n            ga_week = j\n          ) |&gt;\n          as_tibble()\n      )\n  }\n\n  i_sleep_prop_data |&gt;\n    write_rds(\n      path(\n        sleep_prop_dir,\n        paste0(i_id, \"_sleep-prop-data.rds\"))\n      )\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.12.4 Group and Transform Sleep Proportions Data\n\n4.12.4.1 Get Paths to Sleep Proportions Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = sleep_prop_dir,\n    type = \"file\",\n    regexp = \"_sleep-prop-data.rds$\"\n  )\n\n\n\n4.12.4.2 Group and Transform Sleep Proportions Data\n\nCodesleep_prop_data &lt;- tibble()\n\ncli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  sleep_prop_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    mutate(\n      time =\n        time |&gt;\n        as.numeric() |&gt;\n        divide_by(60) |&gt;\n        as.integer() |&gt;\n        dminutes() |&gt;\n        as.numeric() |&gt;\n        as_hms()\n    ) |&gt;\n    bind_rows(sleep_prop_data)\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\nCodesleep_prop_data &lt;-\n  sleep_prop_data |&gt;\n  mutate(ga_week = as.factor(ga_week)) |&gt;\n  arrange(ga_week)\n\n\n\nsleep_prop_data |&gt; glimpse()\n#&gt; Rows: 185,760\n#&gt; Columns: 5\n#&gt; $ time    &lt;time&gt; 00:00:00, 00:01:00, 00:02:00, 00:03:00, 00:04:00, 00:05:00…\n#&gt; $ state   &lt;list&gt; &lt;Other, Other, State, Other, State, State, Other&gt;, &lt;Other,…\n#&gt; $ prop    &lt;dbl&gt; 0.4285714286, 0.4285714286, 0.4285714286, 0.4285714286, 0.5…\n#&gt; $ id      &lt;chr&gt; \"e06521cc\", \"e06521cc\", \"e06521cc\", \"e06521cc\", \"e06521cc\",…\n#&gt; $ ga_week &lt;fct&gt; 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33, 33,…\n\n\n4.12.5 Compute Sleep Proportions Mean Data by Gestational Week\n\n4.12.5.1 Get Paths to Sleep Proportions Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = sleep_prop_dir,\n    type = \"file\",\n    regexp = \"_sleep-prop-data.rds$\"\n  )\n\n\n\n4.12.5.2 Summarize Sleep Proportions by Gestational Week and Write Sleep Proportions Mean Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_sleep-prop-data.rds\")\n\n  i_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    as_tibble() |&gt;\n    group_by(ga_week) |&gt;\n    summarize(prop = mean(prop, na.rm = TRUE)) |&gt;\n    mutate(id = i_id) |&gt;\n    dplyr::select(id, ga_week, prop)\n\n  i_data |&gt;\n    write_rds(\n      path(\n        sleep_prop_dir,\n        paste0(i_id, \"_sleep-prop-mean-data.rds\")\n      )\n    )\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.12.6 Group and Transform Sleep Proportions Mean Data\n\n4.12.6.1 Get Paths to Sleep Proportions Mean Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = sleep_prop_dir,\n    type = \"file\",\n    regexp = \"_sleep-prop-mean-data.rds$\"\n  )\n\n\n\n4.12.6.2 Import and Group Sleep Proportions Mean Data\n\nCodesleep_prop_mean_data &lt;- tibble()\n\ncli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  sleep_prop_mean_data &lt;-\n    i |&gt;\n    read_rds(i) |&gt;\n    bind_rows(sleep_prop_mean_data)\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.12.6.3 Transform Sleep Proportions Mean Data\n\nCodesleep_prop_mean_data &lt;-\n  sleep_prop_mean_data |&gt;\n  mutate(ga_week = as.factor(ga_week)) |&gt;\n  arrange(ga_week)\n\n\n\nsleep_prop_mean_data |&gt; glimpse()\n#&gt; Rows: 129\n#&gt; Columns: 3\n#&gt; $ id      &lt;chr&gt; \"e06521cc\", \"4cda994c\", \"e06521cc\", \"a8194247\", \"9e43829a\",…\n#&gt; $ ga_week &lt;fct&gt; 33, 33, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 35, 35,…\n#&gt; $ prop    &lt;dbl&gt; 0.3103174603, 0.2721891534, 0.3164682540, 0.2696428571, 0.3…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#compute-illuminance-levels",
    "href": "qmd/sri-analysis.html#compute-illuminance-levels",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.13 Compute Illuminance Levels",
    "text": "4.13 Compute Illuminance Levels\n\n4.13.1 Delete Old SRI Data Files\n\nCodeold_files &lt;-\n  dir_ls(\n    path = lux_data_dir,\n    type = \"file\",\n    regexp = \"sri\"\n  )\n\nif (length(old_files) &gt; 0) file_delete(old_files)\n\n\n\n4.13.2 Get Paths to Tidy and Transformed Actigraphy Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = processed_actigraphy_data_dir,\n    type = \"file\",\n    regexp = \"_actigraphy-processed-data.rds$\"\n  )\n\n\n\n4.13.3 Import Tidy and Transformed Actigraphy Data, Compute Illuminance Levels and Write Illuminance Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_actigraphy-processed-data.rds\")\n\n  if (!i_id %in% sri_data_ids) next\n\n  i_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    as_tibble()\n\n  i_lux_data &lt;- tibble()\n\n  for (j in unique(i_data$ga_week)) {\n    j_lux_data &lt;-\n      i_data |&gt;\n      filter(ga_week == j) |&gt;\n      dplyr::select(timestamp, light) |&gt;\n      mutate(time = as_hms(timestamp)) |&gt;\n      group_by(time) |&gt;\n      summarize(lux = mean(light, na.rm = TRUE)) |&gt;\n      ungroup() |&gt;\n      mutate(\n        id = i_id,\n        ga_week = j\n      )\n\n    i_lux_data &lt;-\n      i_lux_data |&gt;\n      bind_rows(j_lux_data)\n  }\n\n  i_lux_data |&gt;\n    write_rds(\n      path(\n        lux_data_dir,\n        paste0(i_id, \"_lux-data.rds\"))\n    )\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.13.4 Group and Transform Illuminance Data\n\n4.13.4.1 Get Paths to Illuminance Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = lux_data_dir,\n    type = \"file\",\n    regexp = \"_lux-data.rds$\"\n  )\n\n\n\n4.13.4.2 Group and Transform Illuminance Data\n\nCodelux_data &lt;- tibble()\n\ncli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  lux_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    mutate(\n      time =\n        time |&gt;\n        as.numeric() |&gt;\n        divide_by(60) |&gt;\n        as.integer() |&gt;\n        dminutes() |&gt;\n        as.numeric() |&gt;\n        as_hms()\n    ) |&gt;\n    bind_rows(lux_data)\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\nCodelux_data &lt;-\n  lux_data |&gt;\n  mutate(ga_week = as.factor(ga_week)) |&gt;\n  arrange(ga_week)\n\n\n\nlux_data |&gt; glimpse()\n#&gt; Rows: 237,329\n#&gt; Columns: 4\n#&gt; $ time    &lt;time&gt; 00:00:00, 00:01:00, 00:02:00, 00:03:00, 00:04:00, 00:05:00…\n#&gt; $ lux     &lt;dbl&gt; 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,…\n#&gt; $ id      &lt;chr&gt; \"e06521cc\", \"e06521cc\", \"e06521cc\", \"e06521cc\", \"e06521cc\",…\n#&gt; $ ga_week &lt;fct&gt; 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,…\n\n\n4.13.5 Compute Illuminance Mean Data by Gestational Week\n\n4.13.5.1 Get Paths to Illuminance Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = lux_data_dir,\n    type = \"file\",\n    regexp = \"_lux-data.rds$\"\n  )\n\n\n\n4.13.5.2 Summarize Illuminance by Gestational Week and Write Illuminance Mean Data Files\n\nCodecli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  i_id &lt;- str_remove(basename(i), \"_lux-data.rds\")\n\n  i_data &lt;-\n    i |&gt;\n    read_rds() |&gt;\n    as_tibble() |&gt;\n    group_by(ga_week) |&gt;\n    summarize(lux = mean(lux, na.rm = TRUE)) |&gt;\n    mutate(id = i_id) |&gt;\n    dplyr::select(id, ga_week, lux)\n\n  i_data |&gt;\n    write_rds(\n      path(\n        lux_data_dir,\n        paste0(i_id, \"_lux-mean-data.rds\")\n      )\n    )\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.13.6 Group and Transform Illuminance Mean Data\n\n4.13.6.1 Get Paths to Illuminance Mean Data Files\n\nCodefiles &lt;-\n  dir_ls(\n    path = lux_data_dir,\n    type = \"file\",\n    regexp = \"_lux-mean-data.rds$\"\n  )\n\n\n\n4.13.6.2 Import and Group Illuminance Mean Data\n\nCodelux_mean_data &lt;- tibble()\n\ncli_progress_bar(total = length(files), clear = FALSE)\n\nfor (i in files) {\n  lux_mean_data &lt;-\n    i |&gt;\n    read_rds(i) |&gt;\n    bind_rows(lux_mean_data)\n\n  cli_progress_update()\n}\n\ncli_progress_done()\n\n\n\n4.13.6.3 Transform Illuminance Mean Data\n\nCodelux_mean_data &lt;-\n  lux_mean_data |&gt;\n  mutate(ga_week = as.factor(ga_week)) |&gt;\n  arrange(ga_week)\n\n\n\nlux_mean_data |&gt; glimpse()\n#&gt; Rows: 170\n#&gt; Columns: 3\n#&gt; $ id      &lt;chr&gt; \"e06521cc\", \"e06521cc\", \"a8194247\", \"5024b37e\", \"4cda994c\",…\n#&gt; $ ga_week &lt;fct&gt; 32, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 34, 34,…\n#&gt; $ lux     &lt;dbl&gt; 381.44080671, 211.18389400, 145.59865162, 54.87876126, 123.…",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#categorize-participantes-by-sri-levels",
    "href": "qmd/sri-analysis.html#categorize-participantes-by-sri-levels",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.14 Categorize Participantes by SRI Levels",
    "text": "4.14 Categorize Participantes by SRI Levels\n\nCodesri_data_by_id &lt;-\n  sri_data |&gt;\n  summarize(\n    sri = mean(sri, na.rm = TRUE),\n    .by = id\n  )\n\n\n\nCodesri_quintiles &lt;-\n  sri_data_by_id |&gt;\n  pull(sri) |&gt;\n  quantile(probs = c(0, 0.2, 0.4, 0.6, 0.8, 1))\n\n\n\nsri_quintiles\n#&gt;          0%         20%         40%         60%         80%        100% \n#&gt; 44.07514451 53.52458860 61.75108230 69.86563612 74.73463204 83.22344322\n\n\nCodesri_top_quintile &lt;- sri_quintiles[5]\n\n\n\nCodesri_bottom_quintile &lt;- sri_quintiles[2]\n\n\n\nCoderegular_sri_ids &lt;-\n  sri_data_by_id |&gt;\n  filter(sri &gt;= sri_top_quintile) |&gt;\n  pull(id)\n\n\n\nregular_sri_ids\n#&gt; [1] \"3c2a132a\" \"6ff93997\" \"aeab920e\" \"2dec1b47\" \"c826aad6\" \"b21511da\"\n#&gt; [7] \"5af4817a\" \"3196960f\"\n\n\nCodeothers_sri_ids &lt;-\n  sri_data_by_id |&gt;\n  filter(\n    sri &gt; sri_bottom_quintile &\n    sri &lt; sri_top_quintile\n  ) |&gt;\n  pull(id)\n\n\n\nothers_sri_ids\n#&gt;  [1] \"e06521cc\" \"4cda994c\" \"a8194247\" \"9e43829a\" \"5f28e20f\" \"5024b37e\"\n#&gt;  [7] \"ff8105e4\" \"f207fd6b\" \"b1c46113\" \"f46f88c5\" \"b5b1d89e\" \"a4899cae\"\n#&gt; [13] \"a027a958\" \"8369d5e8\" \"1c559275\" \"d3350e10\" \"9e858cd8\" \"6f89b17f\"\n#&gt; [19] \"36566db2\" \"1d215e39\" \"18d5bdc1\" \"7cbf7851\" \"225f2a39\" \"0d483b7f\"\n\n\nCodeirregular_sri_ids &lt;-\n  sri_data_by_id |&gt;\n  filter(sri &lt;= sri_bottom_quintile) |&gt;\n  pull(id)\n\n\n\nirregular_sri_ids\n#&gt; [1] \"1193992a\" \"619b1d43\" \"4c84ce02\" \"16791cc5\" \"f1e30a89\" \"db850249\"\n#&gt; [7] \"a053ce64\" \"4b44f0ff\"",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#filter-datasets-by-gestational-age-range",
    "href": "qmd/sri-analysis.html#filter-datasets-by-gestational-age-range",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.15 Filter Datasets by Gestational Age Range",
    "text": "4.15 Filter Datasets by Gestational Age Range\n\n4.15.1 Define Gestational Age Range\n\nCodesri_mean_data |&gt;\n  summarize(\n    n = unique(id) |&gt; length(),\n    .by = ga_week\n  ) |&gt;\n  print(n = Inf)\n#&gt; # A tibble: 8 × 2\n#&gt;   ga_week     n\n#&gt;   &lt;fct&gt;   &lt;int&gt;\n#&gt; 1 33          2\n#&gt; 2 34          7\n#&gt; 3 35         11\n#&gt; 4 36         20\n#&gt; 5 37         29\n#&gt; 6 38         26\n#&gt; 7 39         18\n#&gt; 8 40          5\n\n\n\nCodega_range &lt;- c(36, 39) # Gestational age range\n\n\n\n4.15.2 Filter Datasets\n\nCodedatasets &lt;- c(\n  \"sri_data\",\n  \"sri_mean_data\",\n  \"sleep_prop_data\",\n  \"sleep_prop_mean_data\",\n  \"lux_data\",\n  \"lux_mean_data\"\n)\n\nfor (i in datasets) {\n  assign(i, get(i) |&gt;\n    filter(\n      between(\n        ga_week |&gt;\n          as.character() |&gt;\n          as.numeric(),\n        ga_range[1],\n        ga_range[2]\n      )\n    )\n  )\n}",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#explore-data",
    "href": "qmd/sri-analysis.html#explore-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.16 Explore Data",
    "text": "4.16 Explore Data\n\n4.16.1 SRI\n\n4.16.1.1 Mean SRI\n\n4.16.1.1.1 By Pregnant Women\n\nCodesri_mean_data_by_id &lt;-\n  sri_data |&gt;\n  summarize(\n    sri = mean(sri, na.rm = TRUE),\n    .by = id\n  )\n\nsri_mean_data_by_id\n\n\n  \n\n\n\n\nsri_mean_data_by_id |&gt; glimpse()\n#&gt; Rows: 39\n#&gt; Columns: 2\n#&gt; $ id  &lt;chr&gt; \"ff8105e4\", \"f46f88c5\", \"f207fd6b\", \"e06521cc\", \"b5b1d89e\", \"ae…\n#&gt; $ sri &lt;dbl&gt; 74.96453373, 53.61662257, 80.27673720, 72.84796592, 73.72551478…\n\n\n4.16.1.1.2 Global SRI\n\n4.16.1.1.2.1 Using All the Data\n\n\n\n\n\n\nMean SRI considering all the SRI data points across all pregnant women.\n\n\n\n\nCodesri_data |&gt; pull(sri) |&gt; mean(na.rm = TRUE)\n#&gt; [1] 65.88659463\n\n\n\n4.16.1.1.2.2 Using the Means by Pregnant Women\n\nCodesri_data |&gt;\n  summarize(\n    sri = mean(sri, na.rm = TRUE),\n    .by = id\n  ) |&gt;\n  pull(sri) |&gt;\n  mean(na.rm = TRUE)\n#&gt; [1] 65.77606715\n\n\n\n4.16.1.1.3 Mean SRI by Gestational Age Week\n\nCodesri_data |&gt;\n  summarize(\n    sri = mean(sri, na.rm = TRUE),\n    .by = ga_week\n  )\n\n\n  \n\n\n\n\n4.16.1.1.4 Histogram\n\nCodebin_width &lt;- 5\n\n\n\nCodesri_mean_data_by_id |&gt;\n  ggplot(aes(x = sri)) +\n  geom_histogram(\n    binwidth = bin_width,\n    color = \"black\",\n    fill = \"white\"\n  ) +\n  geom_density(\n    aes(y = ..count.. * bin_width),\n    color = \"red\",\n    size = 1\n  ) +\n  labs(\n    x = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n    y = \"Frequência\", # Frequency\n  )\n#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\n#&gt; ℹ Please use `linewidth` instead.\n#&gt; Warning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\n#&gt; ℹ Please use `after_stat(count)` instead.\n\n\n\n\n\n\n\n\n4.16.1.2 By Gestational Age Week\n\n4.16.1.2.1 Scatter Plot with Linear Trend\n\nCodesri_mean_data |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  ggplot(aes(x = ga_week, y = sri)) +\n  geom_point() +\n  geom_smooth(\n    method = \"lm\",\n    formula = y ~ x,\n    color = \"red\"\n  ) +\n  labs(\n    x = \"Semana Gestacional\", # Gestational Age Week\n    y = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n  )\n\n\n\n\n\n\nCode  theme(legend.position = \"none\")\n#&gt; &lt;theme&gt; List of 1\n#&gt;  $ legend.position: chr \"none\"\n#&gt;  @ complete: logi FALSE\n#&gt;  @ validate: logi TRUE\n\n\n\n4.16.1.2.2 Boxplots\n\nCodesri_mean_data |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  mutate(ga_week = factor(ga_week)) |&gt;\n  ggplot(aes(x = sri, y = ga_week)) +\n  geom_boxplot() +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    size = 4,\n    color = \"red\",\n    shape = 18\n  ) +\n  geom_point(\n    position = position_jitter(height = 0.1, width = 0),\n    size = 2,\n    alpha = 0.25,\n    color = \"blue\"\n  ) +\n  coord_flip() +\n  labs(\n    x = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n    y = \"Semana Gestacional\", # Gestational Age Week\n  ) +\n  scale_color_viridis_d() +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.1.2.3 Linear Trends by ID\n\nCodesri_mean_data |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  slice_sample(prop = 0.5) |&gt;\n  ggplot(aes(x = ga_week, y = sri, color = id)) +\n  geom_smooth(method = \"lm\", formula = y ~ x, se = FALSE) +\n  geom_smooth(\n    mapping = aes(x = ga_week, y = sri),\n    method = \"lm\",\n    formula = y ~ x,\n    se = FALSE,\n    color = \"red\"\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Gestational Age Week\",\n    y = \"Sleep Regularity Index (SRI)\",\n    color = NULL\n  ) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.1.3 By Gestational Age Week & Time of Day\n\n4.16.1.3.1 Global Trend\n\nCodesri_plot_global &lt;-\n  sri_data |&gt;\n  ggplot(aes(x = time, y = sri, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = sri),\n    color = \"#000000\",\n    fill = lighten(\"#000000\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsri_plot_global\n\n\n\n\n\n\n\n\n4.16.1.3.2 Regular Trend\n\nCodesri_plot_regular &lt;-\n  sri_data |&gt;\n  filter(id %in% regular_sri_ids) |&gt;\n  ggplot(aes(x = time, y = sri, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = sri),\n    color = \"#0000FF\",\n    fill = lighten(\"#0000FF\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsri_plot_regular\n\n\n\n\n\n\n\n\n4.16.1.3.3 “Others” Trend\n\nCodesri_plot_others &lt;-\n  sri_data |&gt;\n  filter(id %in% others_sri_ids) |&gt;\n  ggplot(aes(x = time, y = sri, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = sri),\n    color = \"#5E5E5E\",\n    fill = lighten(\"#5E5E5E\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsri_plot_others\n\n\n\n\n\n\n\n\n4.16.1.3.4 Irregular Trend\n\nCodesri_plot_irregular &lt;-\n  sri_data |&gt;\n  filter(id %in% irregular_sri_ids) |&gt;\n  ggplot(aes(x = time, y = sri, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = sri),\n    color = \"#FF0000\",\n    fill = lighten(\"#FF0000\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Regularidade do Sono (SRI)\", # Sleep Regularity Index (SRI)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsri_plot_irregular\n\n\n\n\n\n\n\n\n4.16.2 Sleep Proportions\n\n4.16.2.1 Mean Sleep Proportions by Pregnant Women\n\nCodesleep_prop_mean_by_id_data &lt;-\n  sleep_prop_data |&gt;\n  summarize(\n    prop = mean(prop, na.rm = TRUE),\n    .by = id\n  ) |&gt;\n  mutate(\n    prop_hours =\n      prop |&gt;\n      multiply_by(24) |&gt;\n      multiply_by(60) |&gt;\n      multiply_by(60) |&gt;\n      as_hms()\n  )\n\nsleep_prop_mean_by_id_data\n\n\n  \n\n\n\n\n4.16.2.2 Mean Global Sleep Proportion\n\n4.16.2.2.1 Using All Data\n\n\n\n\n\n\nMean sleep proportion considering all the proportion data points across all pregnant women.\n\n\n\n\nCodesleep_prop_data |&gt;\n  pull(prop) |&gt;\n  mean(na.rm = TRUE) |&gt;\n  multiply_by(24) |&gt;\n  multiply_by(60) |&gt;\n  multiply_by(60) |&gt;\n  as_hms()\n#&gt; 06:51:45.177531\n\n\n\n4.16.2.2.2 Using the Means by Pregnant Women\n\nCodesleep_prop_data |&gt;\n  summarize(\n    prop = mean(prop, na.rm = TRUE),\n    .by = id\n  ) |&gt;\n  pull(prop) |&gt;\n  mean(na.rm = TRUE) |&gt;\n  multiply_by(24) |&gt;\n  multiply_by(60) |&gt;\n  multiply_by(60) |&gt;\n  as_hms()\n#&gt; 06:52:19.960714\n\n\n\n4.16.2.3 Mean Sleep Proportion by Gestational Age Week\n\nCodesleep_prop_data |&gt;\n  summarize(\n    prop = mean(prop, na.rm = TRUE),\n    .by = ga_week\n  ) |&gt;\n  mutate(\n    prop_hours =\n      prop |&gt;\n      multiply_by(24) |&gt;\n      multiply_by(60) |&gt;\n      multiply_by(60) |&gt;\n      as_hms()\n  )\n\n\n  \n\n\n\n\n4.16.2.4 By Gestational Age Week\n\n4.16.2.4.1 Scatter Plot with Linear Trend\n\nCodesleep_prop_mean_data |&gt;\n  mutate(\n    prop_hours =\n      prop |&gt;\n      multiply_by(24) |&gt;\n      multiply_by(60) |&gt;\n      multiply_by(60) |&gt;\n      as_hms()\n  ) |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  ggplot(aes(x = ga_week, y = prop_hours)) +\n  geom_point() +\n  geom_smooth(\n    method = \"lm\",\n    formula = y ~ x,\n    color = \"red\"\n  ) +\n  labs(\n    x = \"Semana Gestacional\", # Gestational Age Week\n    y = \"Tempo Total de Sono (TTS)\", # Total Sleep Time\n  ) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.2.4.2 Boxplots\n\nCodesleep_prop_mean_data |&gt;\n  mutate(\n    prop_hours =\n      prop |&gt;\n      multiply_by(24) |&gt;\n      multiply_by(60) |&gt;\n      multiply_by(60) |&gt;\n      as_hms()\n  ) |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  mutate(ga_week = factor(ga_week)) |&gt;\n  ggplot(aes(x = prop_hours, y = ga_week)) +\n  geom_boxplot() +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    size = 4,\n    color = \"red\",\n    shape = 18\n  ) +\n  geom_point(\n    position = position_jitter(height = 0.1, width = 0),\n    size = 2,\n    alpha = 0.25,\n    color = \"blue\"\n  ) +\n  coord_flip() +\n  labs(\n    x = \"Tempo Total de Sono (TTS)\", # Total Sleep Time\n    y = \"Semana Gestacional\", # Gestational Age Week\n  ) +\n  scale_color_viridis_d() +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.2.4.3 Linear Trends by ID\n\nCodesleep_prop_mean_data |&gt;\n  mutate(\n    prop_hours =\n      prop |&gt;\n      multiply_by(24) |&gt;\n      multiply_by(60) |&gt;\n      multiply_by(60) |&gt;\n      as_hms()\n  ) |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  slice_sample(prop = 0.5) |&gt;\n  ggplot(aes(x = ga_week, y = prop_hours, color = id)) +\n  geom_smooth(\n    method = \"lm\",\n    formula = y ~ x,\n    se = FALSE\n  ) +\n  geom_smooth(\n    mapping = aes(x = ga_week, y = prop_hours),\n    method = \"lm\",\n    formula = y ~ x,\n    se = FALSE,\n    color = \"red\"\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Semana Gestacional\", # Gestational Age Week\n    y = \"Tempo Total de Sono (TTS)\", # Total Sleep Time\n  ) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.2.5 By Gestational Age Week & Time of Day\n\n4.16.2.5.1 Global Trend\n\nCodesleep_prop_plot_global &lt;-\n  sleep_prop_data |&gt;\n  mutate(per = prop * 100) |&gt;\n  ggplot(aes(x = time, y = per, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = per),\n    color = \"#000000\",\n    fill = lighten(\"#000000\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Percentual de Tempo Dormindo (%)\",\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsleep_prop_plot_global\n\n\n\n\n\n\n\n\n4.16.2.5.2 Regular Trend\n\nCodesleep_prop_plot_regular &lt;-\n  sleep_prop_data |&gt;\n  mutate(per = prop * 100) |&gt;\n  filter(id %in% regular_sri_ids) |&gt;\n  ggplot(aes(x = time, y = per, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = per),\n    color = \"#0000FF\",\n    fill = lighten(\"#0000FF\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Percentual de Tempo Dormindo (%)\", # Sleep Proportion (%)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsleep_prop_plot_regular\n\n\n\n\n\n\n\n\n4.16.2.5.3 “Others” Trend\n\nCodesleep_prop_plot_others &lt;-\n  sleep_prop_data |&gt;\n  mutate(per = prop * 100) |&gt;\n  filter(id %in% others_sri_ids) |&gt;\n  ggplot(aes(x = time, y = per, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = per),\n    color = \"#5E5E5E\",\n    fill = lighten(\"#5E5E5E\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Percentual de Tempo Dormindo (%)\", # Sleep Proportion (%)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsleep_prop_plot_others\n\n\n\n\n\n\n\n\n4.16.2.5.4 Irregular Trend\n\nCodesleep_prop_plot_irregular &lt;-\n  sleep_prop_data |&gt;\n  mutate(per = prop * 100) |&gt;\n  filter(id %in% irregular_sri_ids) |&gt;\n  ggplot(aes(x = time, y = per, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = per),\n    color = \"#FF0000\",\n    fill = lighten(\"#FF0000\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Percentual de Tempo Dormindo (%)\", # Sleep Proportion (%)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  theme(legend.position = \"none\")\n\nsleep_prop_plot_irregular\n\n\n\n\n\n\n\n\n4.16.3 Illuminance Levels\n\n4.16.3.1 Statistics\n\n4.16.3.1.1 Mean Illuminance by Pregnant Women\n\nCodelux_data |&gt;\n  summarize(\n    lux = mean(lux, na.rm = TRUE),\n    .by = id\n  )\n\n\n  \n\n\n\n\n4.16.3.1.2 Mean Global Illuminance\n\n4.16.3.1.2.1 Using All Data\n\n\n\n\n\n\nMean SRI considering all the SRI data points across all pregnant women.\n\n\n\n\nCodelux_data |&gt; pull(lux) |&gt; mean(na.rm = TRUE)\n#&gt; [1] 137.3573708\n\n\n\n4.16.3.1.2.2 Using the Means by Pregnant Women\n\nCodelux_data |&gt;\n  summarize(\n    lux = mean(lux, na.rm = TRUE),\n    .by = id\n  ) |&gt;\n  pull(lux) |&gt;\n  mean(na.rm = TRUE)\n#&gt; [1] 135.9001966\n\n\n\n4.16.3.1.3 Mean Illuminance by Gestational Age Week\n\nCodelux_data |&gt;\n  summarize(\n    lux = mean(lux, na.rm = TRUE),\n    .by = ga_week\n  )\n\n\n  \n\n\n\n\n4.16.3.2 By Gestational Age Week\n\n4.16.3.2.1 Scatter Plot with Linear Trend\n\nCodelux_mean_data |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  ggplot(aes(x = ga_week, y = lux)) +\n  geom_point() +\n  geom_smooth(\n    method = \"lm\",\n    formula = y ~ x,\n    color = \"red\"\n  ) +\n  labs(\n    x = \"Semana Gestacional\", # Gestational Age Week\n    y = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n  ) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.3.2.2 Boxplots\n\nCodelux_mean_data |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  mutate(ga_week = factor(ga_week)) |&gt;\n  ggplot(aes(x = lux, y = ga_week)) +\n    geom_boxplot() +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    size = 4,\n    color = \"red\",\n    shape = 18\n  ) +\n  geom_point(\n    position = position_jitter(height = 0.1, width = 0),\n    size = 2,\n    alpha = 0.25,\n    color = \"blue\"\n  ) +\n  coord_flip() +\n  # scale_y_discrete(limits = rev) +\n  labs(\n    x = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n    y = \"Semana Gestacional\", # Gestational Age Week\n  ) +\n  scale_color_viridis_d() +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.3.2.3 Linear Trends by ID\n\nCodelux_mean_data |&gt;\n  mutate(ga_week = ga_week |&gt; as.character() |&gt; as.numeric()) |&gt;\n  slice_sample(prop = 0.5) |&gt;\n  ggplot(aes(x = ga_week, y = lux, color = id)) +\n  geom_smooth(\n    method = \"lm\",\n    formula = y ~ x,\n    se = FALSE\n  ) +\n  geom_smooth(\n    mapping = aes(x = ga_week, y = lux),\n    method = \"lm\",\n    formula = y ~ x,\n    se = FALSE,\n    color = \"red\"\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Semana Gestacional\", # Gestational Age Week\n    y = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n  ) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n4.16.3.3 By Gestational Age Week & Time of Day\n\n4.16.3.3.1 Global Trend\n\nCodelux_plot_global &lt;-\n  lux_data |&gt;\n  ggplot(aes(x = time, y = lux, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = lux),\n    color = \"#000000\",\n    fill = lighten(\"#000000\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(\n    limits = c(0, 1200),\n    breaks = seq(0, 1200, by = 300)\n  ) +\n  theme(legend.position = \"none\")\n\nlux_plot_global\n\n\n\n\n\n\n\n\n4.16.3.3.2 Regular Trend\n\nCodelux_plot_regular &lt;-\n  lux_data |&gt;\n  filter(id %in% regular_sri_ids) |&gt;\n  ggplot(aes(x = time, y = lux, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = lux),\n    color = \"#0000FF\",\n    fill = lighten(\"#0000FF\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(\n    limits = c(0, 1200),\n    breaks = seq(0, 1200, by = 300)\n  ) +\n  theme(legend.position = \"none\")\n\nlux_plot_regular\n\n\n\n\n\n\n\n\n4.16.3.3.3 “Others” Trend\n\nCodelux_plot_others &lt;-\n  lux_data |&gt;\n  filter(id %in% others_sri_ids) |&gt;\n  ggplot(aes(x = time, y = lux, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = lux),\n    color = \"#5E5E5E\",\n    fill = lighten(\"#5E5E5E\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(\n    limits = c(0, 1200),\n    breaks = seq(0, 1200, by = 300)\n  ) +\n  theme(legend.position = \"none\")\n\nlux_plot_others\n\n\n\n\n\n\n\n\n4.16.3.3.4 Irregular Trend\n\nCodelux_plot_irregular &lt;-\n  lux_data |&gt;\n  filter(id %in% irregular_sri_ids) |&gt;\n  ggplot(aes(x = time, y = lux, color = id)) +\n  geom_smooth(\n    se = FALSE\n  ) +\n  geom_smooth(\n    aes(x = time, y = lux),\n    color = \"#FF0000\",\n    fill = lighten(\"#FF0000\", 0.5),\n    linewidth = 2,\n    se = TRUE\n  ) +\n  scale_color_grey(\n    start = 0.7,\n    end = 0.9\n  ) +\n  labs(\n    x = \"Hora do Dia\", # Time of day (Hour)\n    y = \"Índice de Iluminância (Lux)\", # Illuminance Index (Lux)\n  ) +\n  scale_x_time(\n    breaks = breaks_width(\"6 hours\"),\n    labels = label_time(\"%-H\") # Use \"%#H\" for Windows\n  ) +\n  scale_y_continuous(\n    limits = c(0, 1200),\n    breaks = seq(0, 1200, by = 300)\n  ) +\n  theme(legend.position = \"none\")\n\nlux_plot_irregular\n\n\n\n\n\n\n\n\n4.16.4 SRI versus Illuminance\n\nCodewrap_plots(\n  A = sri_plot_regular,\n  X = ggplot() + theme_void(),\n  C = lux_plot_regular,\n  B = sri_plot_irregular,\n  Y = ggplot() + theme_void(),\n  D = lux_plot_irregular,\n  ncol = 3,\n  nrow = 2,\n  widths = c(0.4875, 0.025, 0.4875),\n  axes = \"collect\",\n  tag_level = \"new\"\n)\n\n\n\n\n\n\n\n\n4.16.5 Sleep Proportion versus Illuminance\n\nCodewrap_plots(\n  A = sleep_prop_plot_regular,\n  X = ggplot() + theme_void(),\n  C = lux_plot_regular,\n  B = sleep_prop_plot_irregular,\n  Y = ggplot() + theme_void(),\n  D = lux_plot_irregular,\n  ncol = 3,\n  nrow = 2,\n  widths = c(0.4875, 0.025, 0.4875),\n  axes = \"collect\",\n  tag_level = \"new\"\n)\n\n\n\n\n\n\n\n\n4.16.6 SRI versus Sleep Duration\n\nCodeplot_data &lt;-\n  sri_mean_data_by_id |&gt;\n  left_join(\n    sleep_prop_mean_by_id_data,\n    by = \"id\"\n  ) |&gt;\n  mutate(\n    group = case_when(\n      id %in% regular_sri_ids ~ \"Regular\",\n      id %in% irregular_sri_ids ~ \"Irregular\",\n      TRUE ~ \"Outros\"\n    )\n  )\n\n\n\nCodeplot_data |&gt; glimpse()\n#&gt; Rows: 39\n#&gt; Columns: 5\n#&gt; $ id         &lt;chr&gt; \"ff8105e4\", \"f46f88c5\", \"f207fd6b\", \"e06521cc\", \"b5b1d89…\n#&gt; $ sri        &lt;dbl&gt; 74.96453373, 53.61662257, 80.27673720, 72.84796592, 73.7…\n#&gt; $ prop       &lt;dbl&gt; 0.2855902778, 0.2251157407, 0.3055720899, 0.3017609127, …\n#&gt; $ prop_hours &lt;time&gt; 06:51:15.000000, 05:24:10.000000, 07:20:01.428571, 07:1…\n#&gt; $ group      &lt;chr&gt; \"Outros\", \"Outros\", \"Outros\", \"Outros\", \"Outros\", \"Regul…\n\n\n\nCodeplot_data |&gt;\n  summarize(\n    n = n(),\n    x = mean(sri, na.rm = TRUE),\n    y =\n      prop_hours |&gt;\n      as.numeric() |&gt;\n      mean(na.rm = TRUE) |&gt;\n      as_hms(),\n    x_se =\n      sri |&gt;\n      sd(na.rm = TRUE) |&gt;\n      divide_by(sqrt(n())),\n    y_se =\n      prop_hours |&gt;\n      as.numeric() |&gt;\n      sd(na.rm = TRUE) |&gt;\n      divide_by(sqrt(n())) |&gt;\n      as_hms()\n  )\n\n\n  \n\n\n\n\nCodeplot_data_se &lt;-\n  plot_data |&gt;\n  summarize(\n    n = n(),\n    x = mean(sri, na.rm = TRUE),\n    y =\n      prop_hours |&gt;\n      as.numeric() |&gt;\n      mean(na.rm = TRUE) |&gt;\n      as_hms(),\n    x_se =\n      sri |&gt;\n      sd(na.rm = TRUE) |&gt;\n      divide_by(sqrt(n())),\n    y_se =\n      prop_hours |&gt;\n      as.numeric() |&gt;\n      sd(na.rm = TRUE) |&gt;\n      divide_by(sqrt(n())) |&gt;\n      as_hms(),\n    .by = group\n  )\n\n\n\nCodeplot_data_se\n\n\n  \n\n\n\n\nCodeplot_data_se &lt;- plot_data_se |&gt; filter(!group == \"Outros\")\n\n\n\nCodeplot_data |&gt;\n  ggplot(\n    aes(x = sri, y = prop_hours, color = group, shape = group)\n  ) +\n  geom_point(\n    size = 4\n  ) +\n  geom_crossbar(\n    data = plot_data_se,\n    aes(x = x, y = y, ymin = y - y_se, ymax = y + y_se, color = group),\n    width = 0,\n    inherit.aes = FALSE\n  ) +\n  geom_errorbar(\n    data = plot_data_se,\n    aes(x = x, y = y, xmin = x - x_se, xmax = x + x_se, color = group),\n    height = 0,\n    inherit.aes = FALSE\n  ) +\n  scale_shape_manual(\n    values = c(\n      \"Regular\" = 15,\n      \"Irregular\" = 16,\n      \"Outros\" = 6\n    )\n  ) +\n  scale_color_manual(\n    values = c(\n      \"Regular\" = \"blue\",\n      \"Irregular\" = \"red\",\n      \"Outros\" = \"black\"\n    )\n  ) +\n  scale_y_time(\n    limits = c(as_hms(\"04:30:00\"), as_hms(\"08:45:00\")),\n    breaks = \"1 hour\",\n    labels = function(x) {\n      x |&gt;\n        as.POSIXct() |&gt;\n        format(\"%H:%M\")\n    }\n  ) +\n  scale_x_continuous(\n    limits = c(42.5, 85),\n    breaks = seq(40, 100, by = 10)\n  ) +\n  labs(\n    # Sleep Regularity Index (SRI)\n    x = \"Índice de Regularidade do Sono (SRI)\",\n    # Average Daily Total Sleep Time (TST)\n    y = \"Média do Tempo Total de Sono (TTS)\",\n    color = NULL,\n    shape = NULL\n  ) +\n  guides(\n    color = guide_legend(override.aes = list(linetype = 0))\n  )",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#bootstrap-test",
    "href": "qmd/sri-analysis.html#bootstrap-test",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.17 Bootstrap Test",
    "text": "4.17 Bootstrap Test",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#compute-an-a-priori-power-analysis",
    "href": "qmd/sri-analysis.html#compute-an-a-priori-power-analysis",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.18 Compute an A Priori Power Analysis",
    "text": "4.18 Compute an A Priori Power Analysis\n\nCodeset.seed(2025)\n\n\n\nCoden_clusters &lt;- 66 # Number of participants\ncluster_size &lt;- 2 # Average number of weeks per participant\nalpha &lt;- 0.3 # Intra-class correlation\nbeta &lt;- - 2 # Effect size (per week)\nsigma &lt;- 5 # Standard deviation of the outcome\ntype_one_error &lt;- 0.05\nn_sim &lt;- 1000\nrejects &lt;- 0\n\n\n\nCodecli_progress_bar(total = n_sim, clear = FALSE)\n\nfor (i in seq_len(n_sim)){\n  sim_data &lt;- tibble(\n    id = seq_len(n_clusters) |&gt; rep(each = cluster_size),\n    x = seq_len(cluster_size) |&gt; rep(n_clusters)\n  )\n\n  correlated_errors &lt;-\n    rep(\n      rnorm(n_clusters, 0, sigma * sqrt(alpha)),\n      each = cluster_size\n    ) |&gt;\n    add(\n      rnorm(n_clusters * cluster_size, 0, sigma * sqrt(1 - alpha))\n    )\n\n  sim_data &lt;- sim_data |&gt; mutate(y = beta * x + correlated_errors)\n\n  fit &lt;- geeglm(\n    y ~ x,\n    family = gaussian,\n    id = id,\n    data = sim_data,\n    corstr = \"exchangeable\"\n  )\n\n  p_value &lt;- summary(fit)$coefficients[2,4]\n\n  if (p_value &lt; type_one_error) rejects &lt;- rejects + 1\n\n  cli_progress_update()\n}\n#&gt; ■■■                                8% | ETA: 12s\n#&gt; ■■■■■■■■■                         26% | ETA: 11s\n#&gt; ■■■■■■■■■■■■■■■■■■■■              64% | ETA:  4s\n#&gt; ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■    97% | ETA:  0s\n#&gt; ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  100% | ETA:  0s\n#&gt; \n\ncli_progress_done()\n\npower_estimate &lt;- rejects / n_sim\n\n\n\npower_estimate\n#&gt; [1] 0.803",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#model-data",
    "href": "qmd/sri-analysis.html#model-data",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.19 Model Data",
    "text": "4.19 Model Data\n\n4.19.1 Prepare Model Data\n\nCodemodel_data &lt;-\n  sri_mean_data |&gt;\n  mutate(\n    ga_week =\n      ga_week |&gt;\n      as.character() |&gt;\n      as.numeric()\n  ) |&gt;\n  mutate(\n    ga_week_centered =\n      ga_week |&gt;\n      scale(center = TRUE, scale = FALSE) # Mean deviations\n  ) |&gt;\n  group_by(ga_week) |&gt;\n  mutate(n = n()) |&gt;\n  ungroup() |&gt;\n  left_join(\n    field_form_data |&gt; dplyr::select(-timestamp),\n    by = \"id\"\n  )\n\n\n\n4.19.2 Inspect Model Data\n\nmodel_data |&gt; nrow()\n#&gt; [1] 93\n\n\nmodel_data |&gt;\n  pull(id) |&gt;\n  unique() |&gt;\n  length()\n#&gt; [1] 39\n\n\nmodel_data |&gt;\n  pull(ga_week) |&gt;\n  unique() |&gt;\n  length()\n#&gt; [1] 4\n\n\nmodel_data |&gt;\n  summarize(\n    n = n(),\n    .by = id\n  ) |&gt;\n    arrange(n) |&gt;\n    print(n = Inf)\n#&gt; # A tibble: 39 × 2\n#&gt;    id           n\n#&gt;    &lt;chr&gt;    &lt;int&gt;\n#&gt;  1 9e43829a     1\n#&gt;  2 3c2a132a     1\n#&gt;  3 1193992a     1\n#&gt;  4 c826aad6     1\n#&gt;  5 b21511da     1\n#&gt;  6 36566db2     1\n#&gt;  7 db850249     1\n#&gt;  8 7cbf7851     1\n#&gt;  9 4b44f0ff     1\n#&gt; 10 225f2a39     1\n#&gt; 11 f207fd6b     2\n#&gt; 12 aeab920e     2\n#&gt; 13 a8194247     2\n#&gt; 14 8369d5e8     2\n#&gt; 15 5f28e20f     2\n#&gt; 16 d3350e10     2\n#&gt; 17 16791cc5     2\n#&gt; 18 f1e30a89     2\n#&gt; 19 a053ce64     2\n#&gt; 20 0d483b7f     2\n#&gt; 21 f46f88c5     3\n#&gt; 22 b5b1d89e     3\n#&gt; 23 6ff93997     3\n#&gt; 24 5024b37e     3\n#&gt; 25 4cda994c     3\n#&gt; 26 2dec1b47     3\n#&gt; 27 9e858cd8     3\n#&gt; 28 6f89b17f     3\n#&gt; 29 5af4817a     3\n#&gt; 30 4c84ce02     3\n#&gt; 31 3196960f     3\n#&gt; 32 1d215e39     3\n#&gt; 33 18d5bdc1     3\n#&gt; 34 ff8105e4     4\n#&gt; 35 e06521cc     4\n#&gt; 36 a4899cae     4\n#&gt; 37 a027a958     4\n#&gt; 38 619b1d43     4\n#&gt; 39 1c559275     4\n\n\nmodel_data |&gt; glimpse()\n#&gt; Rows: 93\n#&gt; Columns: 23\n#&gt; $ id               &lt;chr&gt; \"ff8105e4\", \"f46f88c5\", \"f207fd6b\", \"e06521cc\", \"b…\n#&gt; $ ga_week          &lt;dbl&gt; 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36…\n#&gt; $ sri              &lt;dbl&gt; 74.36507937, 73.05555556, 83.63642535, 67.72067154…\n#&gt; $ ga_week_centered &lt;dbl[,1]&gt; &lt;matrix[25 x 1]&gt;\n#&gt; $ n                &lt;int&gt; 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20…\n#&gt; $ birth_date       &lt;date&gt; 1992-06-23, 2000-12-22, 1990-04-12, 1986-08-16, 20…\n#&gt; $ age              &lt;dbl&gt; 32.85277778, 24.19444444, 35.03055556, 38.7055555…\n#&gt; $ weight_before    &lt;dbl&gt; 68, 62, 63, 65, 85, 74, 67, 52, 64, 89, 77, 55, 80…\n#&gt; $ weight_current   &lt;dbl&gt; 80.0, 72.0, 76.0, 77.0, 78.0, 87.0, 81.7, 65.0, 71…\n#&gt; $ height           &lt;dbl&gt; 161, 156, 158, 170, 169, 170, 168, 165, 150, 169, …\n#&gt; $ bmi_before       &lt;dbl&gt; 26.23355580, 25.47666009, 25.23634033, 22.49134948…\n#&gt; $ bmi_current      &lt;dbl&gt; 30.86300683, 29.58579882, 30.44383913, 26.64359862…\n#&gt; $ family_income    &lt;dbl&gt; 13000.0, 2600.0, 4000.0, 4000.0, NA, 2500.0, 6.8, …\n#&gt; $ gestations       &lt;dbl&gt; 2, 1, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 3, 1,…\n#&gt; $ study            &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FA…\n#&gt; $ work             &lt;lgl&gt; TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, T…\n#&gt; $ health_plan      &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…\n#&gt; $ solo             &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FA…\n#&gt; $ ethnicity        &lt;ord&gt; Preta, Parda, Parda, Branca, Parda, Parda, Branca,…\n#&gt; $ exercise         &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, TRUE, …\n#&gt; $ education        &lt;ord&gt; Ensino superior completo, Ensino superior completo…\n#&gt; $ deliveries       &lt;dbl&gt; 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0,…\n#&gt; $ abortions        &lt;dbl&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…\n\n\n4.19.3 Model Data with Generalized Estimating Equations (GEE)\n\n4.19.3.1 Prepare Model Data for GEE\n\nCodemodel_data_gee &lt;-\n  model_data |&gt;\n  mutate(\n    id =\n      id |&gt;\n      as.factor() |&gt;\n      as.numeric()\n  ) |&gt;\n  arrange(id, ga_week)\n\n\n\nmodel_data_gee |&gt;\n  summarize(\n    n = n(),\n    .by = id\n  ) |&gt;\n    arrange(n) |&gt;\n    print(n = Inf)\n#&gt; # A tibble: 39 × 2\n#&gt;       id     n\n#&gt;    &lt;dbl&gt; &lt;int&gt;\n#&gt;  1     2     1\n#&gt;  2     7     1\n#&gt;  3    10     1\n#&gt;  4    11     1\n#&gt;  5    12     1\n#&gt;  6    21     1\n#&gt;  7    23     1\n#&gt;  8    30     1\n#&gt;  9    32     1\n#&gt; 10    34     1\n#&gt; 11     1     2\n#&gt; 12     3     2\n#&gt; 13    17     2\n#&gt; 14    22     2\n#&gt; 15    26     2\n#&gt; 16    28     2\n#&gt; 17    29     2\n#&gt; 18    33     2\n#&gt; 19    36     2\n#&gt; 20    37     2\n#&gt; 21     4     3\n#&gt; 22     6     3\n#&gt; 23     8     3\n#&gt; 24     9     3\n#&gt; 25    13     3\n#&gt; 26    14     3\n#&gt; 27    15     3\n#&gt; 28    16     3\n#&gt; 29    19     3\n#&gt; 30    20     3\n#&gt; 31    24     3\n#&gt; 32    31     3\n#&gt; 33    38     3\n#&gt; 34     5     4\n#&gt; 35    18     4\n#&gt; 36    25     4\n#&gt; 37    27     4\n#&gt; 38    35     4\n#&gt; 39    39     4\n\n\n4.19.3.2 Model Data\n\nmodel_gee &lt;- geeglm(\n  sri ~ ga_week_centered,\n  family = gaussian,\n  id = id,\n  weights = n,\n  data = model_data_gee,\n  corstr = \"exchangeable\"\n)\n\n\n4.19.3.3 Inspect Model Results\n\nmodel_gee\n#&gt; \n#&gt; Call:\n#&gt; geeglm(formula = sri ~ ga_week_centered, family = gaussian, data = model_data_gee, \n#&gt;     weights = n, id = id, corstr = \"exchangeable\")\n#&gt; \n#&gt; Coefficients:\n#&gt;      (Intercept) ga_week_centered \n#&gt;     64.980416414     -2.386303277 \n#&gt; \n#&gt; Degrees of Freedom: 93 Total (i.e. Null);  91 Residual\n#&gt; \n#&gt; Scale Link:                   identity\n#&gt; Estimated Scale Parameters:  [1] 168.6295269\n#&gt; \n#&gt; Correlation:  Structure = exchangeable    Link = identity \n#&gt; Estimated Correlation Parameters:\n#&gt;        alpha \n#&gt; 0.4109994934 \n#&gt; \n#&gt; Number of clusters:   39   Maximum cluster size: 4\n\n\nsummary(model_gee)\n#&gt; \n#&gt; Call:\n#&gt; geeglm(formula = sri ~ ga_week_centered, family = gaussian, data = model_data_gee, \n#&gt;     weights = n, id = id, corstr = \"exchangeable\")\n#&gt; \n#&gt;  Coefficients:\n#&gt;                   Estimate   Std.err       Wald Pr(&gt;|W|)    \n#&gt; (Intercept)      64.980416  1.789900 1317.97521  &lt; 2e-16 ***\n#&gt; ga_week_centered -2.386303  1.254093    3.62069 0.057065 .  \n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Correlation structure = exchangeable \n#&gt; Estimated Scale Parameters:\n#&gt; \n#&gt;             Estimate  Std.err\n#&gt; (Intercept) 168.6295 24.31045\n#&gt;   Link = identity \n#&gt; \n#&gt; Estimated Correlation Parameters:\n#&gt;        Estimate   Std.err\n#&gt; alpha 0.4109995 0.1265896\n#&gt; Number of clusters:   39  Maximum cluster size: 4\n\n\n4.19.3.4 Transform p-value for an One-Tailed Hypothesis\n\nCodecoefs &lt;- summary(model_gee)$coefficients\nbeta  &lt;- coefs[\"ga_week_centered\", \"Estimate\"]\nse    &lt;- coefs[\"ga_week_centered\", \"Std.err\"]\n\np_one_tailed &lt;- pnorm(beta / se)\n\n\n\np_one_tailed\n#&gt; [1] 0.02853256\n\n\n4.19.4 Model Diagnostics\n\n4.19.4.1 Check Normality of Residuals\n\nCodetibble(x = residuals(model_gee)[, 1]) |&gt;\n  ggplot(aes(sample = x)) +\n  stat_qq() +\n  stat_qq_line() +\n  labs(\n    x = \"Quantis Teóricos (Normal Padrão)\",\n    y = \"Quantis Amostrais\"\n  )\n\n\n\n\n\n\n\n\ntibble(x = residuals(model_gee)[, 1]) |&gt;\n  rutils:::normality_summary(\"x\") |&gt;\n  print(n = Inf)\n#&gt; Registered S3 method overwritten by 'quantmod':\n#&gt;   method            from\n#&gt;   as.zoo.data.frame zoo\n#&gt; # A tibble: 11 × 4\n#&gt;    test                     statistic_1 statistic_2  p_value\n#&gt;    &lt;chr&gt;                          &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;\n#&gt;  1 Anderson-Darling               1.71        NA    0.000205\n#&gt;  2 Bonett-Seier                  52.9         -1.50 0.134   \n#&gt;  3 Cramer-von Mises               0.320       NA    0.000188\n#&gt;  4 D'Agostino Omnibus Test        5.72        NA    0.0574  \n#&gt;  5 D'Agostino Skewness Test      -2.25        NA    0.0247  \n#&gt;  6 D'Agostino Kurtosis Test      -0.818       NA    0.413   \n#&gt;  7 Jarque-Bera                    5.69         2    0.0581  \n#&gt;  8 Lilliefors (K-S)               0.124       NA    0.00117 \n#&gt;  9 Pearson chi-square            29.3         NA    0.00111 \n#&gt; 10 Shapiro-Francia                0.954       NA    0.00259 \n#&gt; 11 Shapiro-Wilk                   0.957       NA    0.00547\n\n\n4.19.4.2 Use performance Package to Check the Model\n\nCodecheck_model(model_gee)\n#&gt; Converting missing values (`NA`) into regular values currently not\n#&gt;   possible for variables of class `NULL`.\n\n\n\n\n\n\n\n\n4.19.5 Check the Standardized Effect by Week\n\\[\nd_{Total} = \\cfrac{\\beta}{\\text{SD}(Y)}\n\\]\n\nCodebeta &lt;- coef(model_gee)[\"ga_week_centered\"]\nscale_parameter &lt;- summary(model_gee)$dispersion[[1]]\nsd_residuals &lt;- sqrt(scale_parameter)\n\nd_by_week &lt;- beta / sd_residuals\n\n\n\nd_by_week\n#&gt; ga_week_centered \n#&gt;       -0.1837633\n\n\nCodese_beta &lt;- summary(model_gee)$coefficients[\"ga_week_centered\", \"Std.err\"]\n\n# 1.645 == One-tailed 95% CI z-score\nci_lower &lt;- (beta - (1.645 * se_beta)) / sd_residuals\nci_upper &lt;- (beta + (1.645 * se_beta)) / sd_residuals\n\n\n\nc(ci_lower, ci_upper)\n#&gt; ga_week_centered ga_week_centered \n#&gt;      -0.34262857      -0.02489806\n\n\ninterpret_cohens_d(d_by_week)\n#&gt; ga_week_centered \n#&gt;     \"very small\" \n#&gt; (Rules: cohen1988)\n\n\n4.19.6 Check Standardized Effect for 5 Weeks\n\\[\nd_{Total} = \\cfrac{\\beta \\times \\Delta\\text{Weeks}}{\\text{SD}(Y)}\n\\]\n\nCoded_5_weeks &lt;- d_by_week * 5\n\n\n\nd_5_weeks\n#&gt; ga_week_centered \n#&gt;       -0.9188166\n\n\ninterpret_cohens_d(d_5_weeks)\n#&gt; ga_week_centered \n#&gt;          \"large\" \n#&gt; (Rules: cohen1988)",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/sri-analysis.html#compute-an-a-posteriori-power-analysis",
    "href": "qmd/sri-analysis.html#compute-an-a-posteriori-power-analysis",
    "title": "\n4  SRI Analysis\n",
    "section": "\n4.20 Compute an A Posteriori Power Analysis",
    "text": "4.20 Compute an A Posteriori Power Analysis\n\nCodeset.seed(2025)\n\n\n\nCoden_clusters &lt;- summary(model_gee)$clusz |&gt; length()\ncluster_size &lt;- summary(model_gee)$clusz |&gt; mean() |&gt; floor()\nalpha &lt;- summary(model_gee)$corr[[1]]\nbeta &lt;- coefficients(model_gee)[2]\nsigma &lt;- summary(model_gee)$dispersion[[1]] |&gt; sqrt()\nn_sim &lt;- 1000\nrejects &lt;- 0\n\n\n\ncli_progress_bar(total = n_sim, clear = FALSE)\n\nfor (i in seq_len(n_sim)){\n  sim_data &lt;- tibble(\n    id = seq_len(n_clusters) |&gt; rep(each = cluster_size),\n    x = seq_len(cluster_size) |&gt; rep(n_clusters)\n  )\n\n  correlated_errors &lt;-\n    rnorm(n = n_clusters, mean = 0, sd = sigma * sqrt(alpha)) |&gt;\n    rep(each = cluster_size) |&gt;\n    add(\n      rnorm(n_clusters * cluster_size, 0, sigma * sqrt(1 - alpha))\n    )\n\n  sim_data &lt;-\n    sim_data |&gt;\n    mutate(\n      y = beta * x + correlated_errors\n    )\n\n  fit &lt;- geeglm(\n    y ~ x,\n    family = gaussian,\n    id = id,\n    data = sim_data,\n    corstr = \"exchangeable\"\n  )\n\n  p_value &lt;- summary(fit)$coefficients[2,4]\n\n  if (p_value &lt; 0.05) rejects &lt;- rejects + 1\n\n  cli_progress_update()\n}\n#&gt; ■■■■■■                            16% | ETA:  5s\n#&gt; ■■■■■■■■■■■■■■                    44% | ETA:  5s\n#&gt; ■■■■■■■■■■■■■■■■■■■■              64% | ETA:  4s\n#&gt; ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  100% | ETA:  0s\n#&gt; \n\ncli_progress_done()\n\npower_estimate &lt;- rejects / n_sim\n\n\npower_estimate\n#&gt; [1] 0.191",
    "crumbs": [
      "Chapters",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>SRI Analysis</span>"
    ]
  },
  {
    "objectID": "qmd/references.html",
    "href": "qmd/references.html",
    "title": "References",
    "section": "",
    "text": "In accordance with the American Psychological Association (APA) Style, 7th edition.\n\n\nCohen, J. (1992). A power primer. Psychological Bulletin,\n112(1), 155–159. https://doi.org/10.1037/0033-2909.112.1.155\n\n\nEllis, P. D. (Ed.). (2010). The essential guide to effect sizes:\nStatistical power, meta-analysis, and the interpretation of research\nresults (a). Cambridge University Press.\n\n\nLee, K. A., & Gay, C. L. (2004). Sleep in late pregnancy predicts\nlength of labor and type of delivery. American Journal of Obstetrics\nand Gynecology, 191(6), 2041–2046. https://doi.org/10.1016/j.ajog.2004.05.086\n\n\nRutherford, A. (2011). ANOVA and ANCOVA: A\nGLM approach (2nd ed.). Wiley. https://doi.org/10.1002/9781118491683\n\n\nWatson, N. F., Badr, M. S., Belenky, G., Bliwise, D. L., Buxton, O. M.,\nBuysse, D., Dinges, D. F., Gangwisch, J., Grandner, M. A., Kushida, C.,\nMalhotra, R. K., Martin, J. L., Patel, S. R., Quan, S. F., & Tasali,\nE. (2015). Recommended amount of sleep for a healthy adult:\nA joint consensus statement of the American\nAcademy of Sleep Medicine and Sleep Research\nSociety. Journal of Clinical Sleep Medicine,\n11(6), 591–592. https://doi.org/10.5664/jcsm.4758",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html",
    "href": "qmd/osf-routines.html",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "",
    "text": "A.1 Overview\nThis notebook aim to help download or upload files to OSF.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#set-the-environment",
    "href": "qmd/osf-routines.html#set-the-environment",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.2 Set the Environment",
    "text": "A.2 Set the Environment\n\nA.2.1 Load Packages\n\nCodelibrary(askpass)\nlibrary(cli)\nlibrary(clipr)\nlibrary(dplyr)\nlibrary(fs)\nlibrary(here)\nlibrary(lubritime)\nlibrary(magrittr)\nlibrary(osfr)\nlibrary(readr)\nlibrary(stringr)\nlibrary(utils)\n\n\n\nA.2.2 Set Data Directories\n\nCodedata_dir &lt;- here(\"data\")\n\n\n\nCodeif (!dir_exists(data_dir)) {\n  dir_create(data_dir, recurse = TRUE)\n}\n\n\n\nA.2.3 Set Keys\n\nCodeosf_auth(Sys.getenv(\"OSF_PAT\")) # askpass()\n\n\n\nCodegs4_auth(cache = \".secrets\")\n\n\n\nCodeprivate_key &lt;- here::here(\"_ssh\", \"id_rsa\")\n\n\n\nCodepublic_key &lt;- here::here(\"_ssh\", \"id_rsa.pub\")\n\n\n\nCodepassword &lt;- Sys.getenv(\"PREGNANCY_PASSWORD\") # askpass()\n\n\n\nCodesalt &lt;- Sys.getenv(\"PREGNANCY_SALT\") # askpass()\n\n\n\nA.2.4 Set OSF IDs\n\nCodeosf_pilot_data_id &lt;- \"tj5u2\"\nosf_raw_data_id &lt;- \"7kg34\"\nosf_processed_data_id &lt;- \"a2dsw\"\nosf_bundles_id &lt;- \"fvh4u\"\nosf_tidy_data_id &lt;- \"npkjw\"\nosf_feedbacks_id &lt;- \"8hs7v\"\n\n\n\nCodefor (i in ls(pattern = \"^osf_.*_id$\")) {\n  assign(\n    x = i,\n    value = paste0(\"https://osf.io/\", get(i)),\n    envir = .GlobalEnv\n  )\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-metadata-for-pilot-data-files",
    "href": "qmd/osf-routines.html#download-metadata-for-pilot-data-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.3 Download Metadata for Pilot Data Files",
    "text": "A.3 Download Metadata for Pilot Data Files",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-metadata-for-raw-actigraphy-files",
    "href": "qmd/osf-routines.html#download-metadata-for-raw-actigraphy-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.4 Download Metadata for Raw Actigraphy Files",
    "text": "A.4 Download Metadata for Raw Actigraphy Files",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-metadata-for-processed-actigraphy-files",
    "href": "qmd/osf-routines.html#download-metadata-for-processed-actigraphy-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.5 Download Metadata for Processed Actigraphy Files",
    "text": "A.5 Download Metadata for Processed Actigraphy Files\n\nA.5.1 Set Data Subdirectory\n\nCodedata_dir &lt;- here(\"data\", \"processed\", \"actigraphy\")\n\n\n\nCodeif (!dir_exists(data_dir)) {\n  dir_create(data_dir, recurse = TRUE)\n}\n\n\n\nA.5.2 Retrieve Files Metadata\n\nCodeosf_files &lt;-\n  osf_processed_data_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_ls_files(n_max = Inf) |&gt;\n  filter(name == \"actigraphy\") |&gt;\n  pull(id) |&gt;\n  osf_retrieve_file() |&gt;\n  osf_ls_files(n_max = Inf) |&gt;\n  filter(str_detect(name, \"actigraphy-processed-data\"))\n\nosf_files",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-metadata-for-bundle-files",
    "href": "qmd/osf-routines.html#download-metadata-for-bundle-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.6 Download Metadata for Bundle Files",
    "text": "A.6 Download Metadata for Bundle Files",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-metadata-for-tidy-actigraphy-files",
    "href": "qmd/osf-routines.html#download-metadata-for-tidy-actigraphy-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.7 Download Metadata for Tidy Actigraphy Files",
    "text": "A.7 Download Metadata for Tidy Actigraphy Files",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-metadata-for-feedback-files",
    "href": "qmd/osf-routines.html#download-metadata-for-feedback-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.8 Download Metadata for Feedback Files",
    "text": "A.8 Download Metadata for Feedback Files",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#download-files",
    "href": "qmd/osf-routines.html#download-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.9 Download Files",
    "text": "A.9 Download Files\n\nCodefiles &lt;-\n  osf_files |&gt;\n  osf_download(\n    path = data_dir,\n    conflicts = \"overwrite\",\n    progress = TRUE\n  ) |&gt;\n  extract2(\"local_path\") |&gt;\n  here()",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#unlock-files",
    "href": "qmd/osf-routines.html#unlock-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.10 Unlock Files",
    "text": "A.10 Unlock Files\n\nCodeunlocked_files &lt;- character()\n\nfor (i in files) {\n  # if (!file_exists(i)) next\n\n  i_path &lt;-\n    i |&gt;\n    unlock_file(\n      private_key = private_key,\n      suffix = \".lockr\",\n      remove_file = TRUE,\n      password = password\n    )\n\n  cat_line()\n\n  unlocked_files &lt;- c(unlocked_files, i_path)\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#upload-files",
    "href": "qmd/osf-routines.html#upload-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.11 Upload Files",
    "text": "A.11 Upload Files\n\nCodeosf_id &lt;- osf_bundles_id\n\n\n\nCode# Create the README.md file\n\nreadme_file &lt;- tempdir() |&gt; file.path(\"README.md\")\n\nc(\n  \"# {pregnancy}\",\n  \"\",\n  \"* All files were locked with the project's public key. Ask the project administrators for the key if you need access.\",\n  \"\",\n  paste0(\"* Last update: \", lubritime::round_time(Sys.time()), \".\")\n) |&gt;\n  readr::write_lines(readme_file)\n\nreadr::read_lines(readme_file)\n\n\n\nCodeosf_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_upload(\n    path = readme_file,\n    conflicts = \"overwrite\",\n    progress = TRUE\n  )\n\n\n\nCodepath &lt;- NULL # Use `NULL` to refer to the root.\n\n\n\nCodeosf_data &lt;-\n  osf_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_ls_files(\n    path = path,\n    n_max = Inf\n  ) |&gt;\n  dplyr::arrange(name)\n\nosf_data\n\n\n\nCodedir_path &lt;- read_clip() |&gt; normalizePath(\"/\", mustWork = FALSE)\n\n\n\nCodefiles &lt;-\n  list.files(dir_path) |&gt;\n  paste0(\".lockr\") |&gt;\n  setdiff(osf_data$name) |&gt;\n  stringr::str_subset(\"^README\", negate = TRUE) |&gt;\n  stringr::str_remove(\"\\\\.lockr$\")\n\n# files &lt;- list.files(dir_path)\n\nfiles\n\n\n\nCodefile.path(dir_path, files)|&gt;\n  vapply( prettycheck:::test_file_exists, logical(1)) |&gt;\n  unname()\n\n\n\nCodefiles |&gt; write_clip()\n\n\n\nCodenew_files &lt;- character()\n\nfor (i in seq_along(files)) {\n  i_from &lt;- file.path(dir_path, files[i])\n  i_to &lt;- file.path(tempdir(), files[i])\n\n  test &lt;- file.copy(from = i_from, to = i_to, overwrite = TRUE)\n\n  if (isTRUE(test)) new_files &lt;- c(new_files, i_to)\n}\n\nlocked_files &lt;- character()\n\nfor (i in new_files) {\n  i_path &lt;- lock_file(\n    i,\n    public_key = public_key,\n    remove_file = TRUE\n  )\n\n  cat_line()\n\n  locked_files &lt;- c(locked_files, i_path)\n}\n\n\n\nCodeosf_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_upload(\n    path = locked_files,\n    conflicts = \"overwrite\",\n    progress = TRUE\n  )",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/osf-routines.html#lock-files",
    "href": "qmd/osf-routines.html#lock-files",
    "title": "Appendix A — Download and Upload Files From and To OSF",
    "section": "\nA.12 Lock Files",
    "text": "A.12 Lock Files\n\nCodefor (i in unlocked_files) {\n  # if (!file_exists(i)) next\n\n  i |&gt;\n    lock_file(\n      public_key = public_key,\n      suffix = \".lockr\",\n      remove_file = TRUE\n  )\n\n  cat_line()\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>  <span class='chapter-title'>Download and Upload Files From and To OSF</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html",
    "href": "qmd/file-processing-routines.html",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "",
    "text": "B.1 Overview\nThis report contains a reproducible pipeline for processing and storing data from the study.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#settings-the-environment",
    "href": "qmd/file-processing-routines.html#settings-the-environment",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.2 Settings the Environment",
    "text": "B.2 Settings the Environment\n\nCodelibrary(actverse) # github.com/danielvartan/actverse\nlibrary(checkmate)\nlibrary(clipr)\nlibrary(fs)\nlibrary(googlesheets4)\nlibrary(here)\nlibrary(osfr)\nlibrary(prettycheck) # github.com/danielvartan/prettycheck\nlibrary(readr)\nlibrary(rutils) # github.com/danielvartan/rutils\nlibrary(sodium)\nlibrary(stringr)\nlibrary(zip)\n\n\n\nCodesource(here::here(\"R\", \"anonymize_id.R\"))\nsource(here::here(\"R\", \"test_cpf.R\"))",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#setting-ids",
    "href": "qmd/file-processing-routines.html#setting-ids",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.3 Setting IDs",
    "text": "B.3 Setting IDs\n\nCodeids &lt;- c(\n  \"36566db2\",\n  \"5024b37e\",\n  \"2dec1b47\",\n  \"b5b1d89e\",\n  \"0324c6f8\",\n  \"aeab920e\",\n  \"225f2a39\",\n  \"ca601ee7\",\n  \"3c2a132a\",\n  \"a4899cae\",\n  \"3196960f\",\n  \"f207fd6b\",\n  \"6f89b17f\"\n)\n\n\n\nCodeids_pattern &lt;- paste0(\"^\", ids, collapse = \"|\")",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#setting-parameters",
    "href": "qmd/file-processing-routines.html#setting-parameters",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.4 Setting Parameters",
    "text": "B.4 Setting Parameters\n\nCodeprettycheck:::assert_interactive()\n\ngooglesheets4::gs4_auth()\n\n\n\nCodeprettycheck:::assert_interactive()\n\nosfr::osf_auth()\n\n\n\nCodeprivate_key_path &lt;- here::here(\"_ssh\", \"id_rsa\")\n\n\n\nCodepassword &lt;- askpass::askpass()\n\n\n\nCodesalt &lt;- askpass::askpass()\n\n\n\nCodepublic_key_path &lt;- here::here(\"_ssh\", \"id_rsa.pub\")",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#setting-directories",
    "href": "qmd/file-processing-routines.html#setting-directories",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.5 Setting Directories",
    "text": "B.5 Setting Directories\n\nCodedir_temp &lt;- tempfile(pattern = \"pregnancy-data-\", fileext = \"\")\n\n\n\nCodedir_raw_data &lt;- fs::path(dir_temp, \"raw-data\")\ndir_processed_data &lt;- fs::path(dir_temp, \"processed-data\")\ndir_bundles &lt;- fs::path(dir_temp, \"bundle\")\n\n\n\nCodedir_raw_data_actigraphy &lt;- fs::path(dir_raw_data, \"actigraphy\")\ndir_raw_data_consent &lt;- fs::path(dir_raw_data, \"consent\")\ndir_raw_data_control_form &lt;- fs::path(dir_raw_data, \"control-form\")\ndir_raw_data_delivery_receipt &lt;- fs::path(dir_raw_data, \"delivery-receipt\")\ndir_raw_data_field_form &lt;- fs::path(dir_raw_data, \"field-form\")\ndir_raw_data_medical_record &lt;- fs::path(dir_raw_data, \"medical-record\")\ndir_raw_data_pilot_form &lt;- fs::path(dir_raw_data, \"pilot-form\")\ndir_raw_data_pregnancy_booklet &lt;- fs::path(dir_raw_data, \"pregnancy-booklet\")\ndir_raw_data_return_receipt &lt;- fs::path(dir_raw_data, \"return-receipt\")\ndir_raw_data_sleep_diary &lt;- fs::path(dir_raw_data, \"sleep-diary\")\n\n\n\nCodedir_processed_data_actigraphy &lt;- fs::path(dir_processed_data, \"actigraphy\")\ndir_processed_data_sleep_diary &lt;- fs::path(dir_processed_data, \"sleep-diary\")\n\n\n\nCodefile_pilot_form &lt;- fs::path(dir_raw_data_pilot_form, \"raw.csv\")\nfile_field_form &lt;- fs::path(dir_raw_data_field_form, \"raw.csv\")\nfile_sleep_diary &lt;- fs::path(dir_raw_data_sleep_diary, \"raw.csv\")\nfile_control_form &lt;- fs::path(dir_raw_data_control_form, \"raw.csv\")\n\n\n\nCodefor (i in ls() |&gt; stringr::str_subset(\"^dir_\")) {\n  if (!dir.exists(get(i))) {\n    dir.create(get(i), recursive = TRUE, showWarnings = FALSE)\n  }\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#getting-data-from-google-sheets",
    "href": "qmd/file-processing-routines.html#getting-data-from-google-sheets",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.6 Getting Data from Google Sheets",
    "text": "B.6 Getting Data from Google Sheets\n\nCodeprettycheck:::assert_interactive()\n\ngooglesheets4::gs4_auth()\n\n\n\nCoderaw_data_pilot_form &lt;- googlesheets4::read_sheet(\n  ss = \"19VvBMLL0EVk5345pLDdusEfI1WCZD1YfDjqmQnRgsuk\",\n  sheet = \"Dataset\",\n  range = NULL,\n  col_names = TRUE,\n  col_types = \"c\",\n  na = c(\"\", \"NA\"),\n  trim_ws = TRUE,\n  skip = 0,\n  n_max = Inf,\n  .name_repair = \"unique\"\n)\n\nraw_data_pilot_form\n\n\n\nCoderaw_data_pilot_form |&gt; readr::write_csv(file_pilot_form)\n\n\n\nCoderaw_data_field_form &lt;- googlesheets4::read_sheet(\n  ss = \"1tY_TT0nPXFsErYQS2VED0-hqTzgHudA9BfhRhYG19fw\",\n  sheet = \"Dataset\",\n  range = NULL,\n  col_names = TRUE,\n  col_types = \"c\",\n  na = c(\"\", \"NA\"),\n  trim_ws = TRUE,\n  skip = 0,\n  n_max = Inf,\n  .name_repair = \"unique\"\n)\n\nraw_data_field_form\n\n\n\nCoderaw_data_field_form |&gt; readr::write_csv(file_field_form)\n\n\n\nCoderaw_data_sleep_diary &lt;- googlesheets4::read_sheet(\n  ss = \"1VKJgS8ZrUO9E-yZ6WwfZgKNoEQWH7afk3K5jpAjgKxU\",\n  sheet = \"Dataset\",\n  range = NULL,\n  col_names = TRUE,\n  col_types = \"c\",\n  na = c(\"\", \"NA\"),\n  trim_ws = TRUE,\n  skip = 0,\n  n_max = Inf,\n  .name_repair = \"unique\"\n)\n\nraw_data_sleep_diary\n\n\n\nCoderaw_data_sleep_diary |&gt; readr::write_csv(file_sleep_diary)\n\n\n\nCoderaw_data_control_form &lt;- googlesheets4::read_sheet(\n  ss = \"13wtDr4fRD1wJSM-qdLOdGSchF8oXU1bG0Jtccu24GhY\",\n  sheet = \"Dataset\",\n  range = NULL,\n  col_names = TRUE,\n  col_types = \"c\",\n  na = c(\"\", \"NA\"),\n  trim_ws = TRUE,\n  skip = 0,\n  n_max = Inf,\n  .name_repair = \"unique\"\n)\n\nraw_data_control_form\n\n\n\nCoderaw_data_control_form |&gt; readr::write_csv(file_control_form)",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#getting-data-from-osf",
    "href": "qmd/file-processing-routines.html#getting-data-from-osf",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.7 Getting Data from OSF",
    "text": "B.7 Getting Data from OSF\n\nB.7.1 Assigning IDs\n\nCodeosf_pilot_data_id &lt;- \"tj5u2\"\nosf_raw_data_id &lt;- \"7kg34\"\nosf_processed_data_id &lt;- \"a2dsw\"\nosf_tidy_data_id &lt;- \"npkjw\"\nosf_bundles_id &lt;- \"fvh4u\"\n\n\n\nB.7.2 Getting File Lists\n\nCodepatterns &lt;- c(\n  \"pilot_data\",\n  \"raw_data\",\n  \"processed_data\",\n  \"tidy_data\",\n  \"bundles\"\n)\n\nfor (i in patterns) {\n  assign(\n    paste0(\"osf_\", i, \"_files\"),\n    get(paste0(\"osf_\", i, \"_id\")) |&gt;\n      osfr::osf_retrieve_node() |&gt;\n      osfr::osf_ls_files(n_max = Inf),\n    envir = .GlobalEnv\n  )\n}\n\n\n\nCodepatterns &lt;- c(\n  \"actigraphy\",\n  \"consent\",\n  \"control-form\",\n  \"delivery-receipt\",\n  \"field-form\",\n  \"medical-record\",\n  \"pilot-form\",\n  \"pregnancy-booklet\",\n  \"return-receipt\",\n  \"sleep-diary\"\n)\n\nfor (i in patterns) {\n  normalized_i &lt;- stringr::str_replace_all(i, \"-\", \"_\")\n\n  assign(\n    paste0(\"osf_raw_data_\", normalized_i, \"_files\"),\n    osf_raw_data_files |&gt;\n      dplyr::filter(name == i) |&gt;\n      dplyr::pull(id) |&gt;\n      osfr::osf_retrieve_file() |&gt;\n      osfr::osf_ls_files(n_max = Inf),\n    envir = .GlobalEnv\n  )\n}\n\n\n\nCodepatterns &lt;- c(\n  \"actigraphy\",\n  \"sleep-diary\"\n)\n\nfor (i in patterns) {\n  normalized_i &lt;- stringr::str_replace_all(i, \"-\", \"_\")\n\n  assign(\n    paste0(\"osf_processed_data_\", normalized_i, \"_files\"),\n    osf_processed_data_files |&gt;\n      dplyr::filter(name == i) |&gt;\n      dplyr::pull(id) |&gt;\n      osfr::osf_retrieve_file() |&gt;\n      osfr::osf_ls_files(n_max = Inf),\n    envir = .GlobalEnv\n  )\n}\n\n\n\nB.7.3 Downloading Files\n\nCodepatterns &lt;- c(\n  \"actigraphy\",\n  \"consent\",\n  \"delivery-receipt\",\n  \"medical-record\",\n  \"pregnancy-booklet\",\n  \"return-receipt\"\n)\n\nfor (i in patterns) {\n  normalized_i &lt;- stringr::str_replace_all(i, \"-\", \"_\")\n  dir_i &lt;- get(paste0(\"dir_raw_data_\", normalized_i))\n\n  paste0(\"osf_raw_data_\", normalized_i, \"_files\") |&gt;\n    get() |&gt;\n    dplyr::filter(stringr::str_detect(name, ids_pattern)) |&gt;\n    osfr::osf_download(\n      path = dir_i,\n      conflicts = \"overwrite\",\n      progress = TRUE\n    )\n\n  dir_i |&gt;\n    lockr::unlock_dir(\n      private_key = private_key_path,\n      password = password\n    )\n}\n\n\n\nCodepatterns &lt;- c(\"actigraphy\")\n\nfor (i in patterns) {\n  normalized_i &lt;- stringr::str_replace_all(i, \"-\", \"_\")\n  dir_i &lt;- get(paste0(\"dir_processed_data_\", normalized_i))\n\n  paste0(\"osf_processed_data_\", normalized_i, \"_files\") |&gt;\n    get() |&gt;\n    dplyr::filter(stringr::str_detect(name, ids_pattern)) |&gt;\n    osfr::osf_download(\n      path = dir_i,\n      conflicts = \"overwrite\",\n      progress = TRUE\n    )\n\n  dir_i |&gt;\n    lockr::unlock_dir(\n      private_key = private_key_path,\n      password = password\n    )\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#getting-cpf-data",
    "href": "qmd/file-processing-routines.html#getting-cpf-data",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.8 Getting CPF Data",
    "text": "B.8 Getting CPF Data\n\nCodeid_data &lt;-\n  dplyr::tibble(id = ids) |&gt;\n  dplyr::left_join(\n    raw_data_control_form |&gt;\n    janitor::clean_names() |&gt;\n      dplyr::select(\n        qual_cpf_da_gestante, # col_index == 5\n        qual_e_o_id_anonimizado_da_gestante # col_index == 6\n      ) |&gt;\n      dplyr::rename(\n        cpf = qual_cpf_da_gestante,\n        id = qual_e_o_id_anonimizado_da_gestante\n      ),\n    by = \"id\"\n  ) |&gt;\n  dplyr::distinct() |&gt;\n  dplyr::arrange(cpf)\n\nid_data\n\n\n\nCodeid_data |&gt; dplyr::pull(cpf) |&gt; test_cpf()",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#load-filter-write-data",
    "href": "qmd/file-processing-routines.html#load-filter-write-data",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.9 Load, Filter & Write Data",
    "text": "B.9 Load, Filter & Write Data\n\nCodefor (i in split(id_data, seq(nrow(id_data)))) {\n  raw_data_control_form_i &lt;-\n    raw_data_control_form |&gt;\n    scaler:::filter_data(col_index = 6, value = i$id) |&gt;\n    rutils:::shush()\n\n  if (!nrow(raw_data_control_form_i) == 0) {\n    raw_data_control_form_i |&gt;\n      readr::write_csv(\n        fs::path(\n          dir_raw_data_control_form,\n          paste0(i$id, \"_control-form\", \".csv\")\n        )\n      )\n  }\n\n  raw_data_pilot_form_i &lt;-\n    raw_data_pilot_form |&gt;\n    scaler:::filter_data(col_index = 5, value = i$cpf) |&gt;\n    rutils:::shush()\n\n  raw_data_field_form_i &lt;-\n    raw_data_field_form |&gt;\n    scaler:::filter_data(col_index = 5, value = i$cpf) |&gt;\n    rutils:::shush()\n\n  if (nrow(raw_data_field_form_i) == 0 &&\n      !nrow(raw_data_pilot_form_i) == 0) {\n    raw_data_pilot_form_i |&gt;\n      readr::write_csv(\n        fs::path(\n          dir_raw_data_pilot_form,\n          paste0(i$id, \"_pilot-form\", \".csv\")\n        )\n      )\n  }\n\n  if (!nrow(raw_data_field_form_i) == 0) {\n    raw_data_field_form_i |&gt;\n      readr::write_csv(\n        fs::path(\n          dir_raw_data_field_form,\n          paste0(i$id, \"_field-form\", \".csv\")\n        )\n      )\n  }\n\n  raw_data_sleep_diary_i &lt;-\n    raw_data_sleep_diary |&gt;\n    scaler:::filter_data(col_index = 3, value = i$cpf)\n\n  if (!nrow(raw_data_sleep_diary_i) == 0) {\n    sleep_diary_type_of_day_i &lt;-\n      raw_data_sleep_diary_i |&gt;\n      scaler:::get_sleep_diary_type_of_day(col_indexes = c(1, 4, 8, 10))\n\n    tidy_data_sleep_diary_i &lt;-\n      raw_data_sleep_diary_i |&gt;\n      scaler:::tidy_sleep_diary(col_indexes = c(1, 8, 10, 19:28))\n\n    raw_data_sleep_diary_i |&gt;\n      readr::write_csv(\n        fs::path(\n          dir_raw_data_sleep_diary,\n          paste0(i$id, \"_sleep-diary\", \".csv\")\n        )\n      )\n\n    if (!nrow(sleep_diary_type_of_day_i) == 0) {\n      sleep_diary_type_of_day_i |&gt;\n        readr::write_csv(\n          fs::path(\n            dir_processed_data_sleep_diary,\n            paste0(i$id, \"_sleep-diary-type-of-day\", \".csv\")\n          )\n        )\n    }\n\n    if (!nrow(tidy_data_sleep_diary_i) == 0) {\n      tidy_data_sleep_diary_i |&gt;\n        scaler:::actstudio_sleep_diary(\n          file = fs::path(\n            dir_processed_data_actigraphy,\n            paste0(i$id, \"_actigraphy-sleep-diary\", \".txt\")\n          )\n        )\n    }\n  }\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#creating-bundles",
    "href": "qmd/file-processing-routines.html#creating-bundles",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.10 Creating Bundles",
    "text": "B.10 Creating Bundles\n\nCodefor (i in split(id_data, seq(nrow(id_data)))) {\n  bundle_files &lt;- c(\n    \"actigraphy-raw-data\" = fs::path(\n      dir_raw_data_actigraphy, paste0(i$id, \"_actigraphy-raw-data\", \".txt\")\n    ),\n    \"actigraphy-raw-data_report\" = fs::path(\n      dir_raw_data_actigraphy, paste0(i$id, \"_actigraphy-raw-data-report\", \".txt\")\n    ),\n    \"actigraphy-processed-data\" = fs::path(\n      dir_processed_data_actigraphy, paste0(i$id, \"_actigraphy-processed-data\", \".txt\")\n    ),\n    \"actigraphy-sleep-diary\" = fs::path(\n      dir_processed_data_actigraphy, paste0(i$id, \"_actigraphy-sleep-diary\", \".txt\")\n    ),\n    \"consent\" = fs::path(\n      dir_raw_data_consent, paste0(i$id, \"_consent\", \".pdf\")\n    ),\n    \"delivery-receipt\" = fs::path(\n      dir_raw_data_delivery_receipt, paste0(i$id, \"_delivery-receipt\", \".pdf\")\n    ),\n    \"field-form\" = fs::path(\n      dir_raw_data_control_form, paste0(i$id, \"_control-form\", \".csv\")\n    ),\n    \"field-form\" = fs::path(\n      dir_raw_data_field_form, paste0(i$id, \"_field-form\", \".csv\")\n    ),\n    \"medical-record\" = fs::path(\n      dir_raw_data_medical_record, paste0(i$id, \"_medical-record\", \".pdf\")\n    ),\n    \"pregnancy-booklet\" = fs::path(\n      dir_raw_data_pregnancy_booklet, paste0(i$id, \"_pregnancy-booklet\", \".pdf\")\n    ),\n    \"return-receipt\" = fs::path(\n      dir_raw_data_return_receipt, paste0(i$id, \"_return-receipt\", \".pdf\")\n    ),\n    \"sleep-diary\" = fs::path(\n      dir_raw_data_sleep_diary, paste0(i$id, \"_sleep-diary\", \".csv\")\n    ),\n    \"sleep-diary-type-of-day\" = fs::path(\n      dir_processed_data_sleep_diary, paste0(i$id, \"_sleep-diary-type-of-day\", \".csv\")\n    )\n  )\n\n  for (j in bundle_files) {\n    if (!file.exists(j)) {\n      bundle_files &lt;- bundle_files[!bundle_files %in% j]\n    }\n  }\n\n  if (!length(bundle_files) == 0) {\n    utils::zip(\n      zipfile = file.path(dir_bundles, i$id),\n      files = bundle_files,\n      flags = paste(\"--password\", password),\n      extras = \"-j\"\n    )\n\n    # zip::zip(\n    #   zipfile = fs::path(dir_bundles, paste0(i$id, \".zip\")),\n    #   files = bundle_files |&gt; fs::path_rel(start = dir_temp),\n    #   root = dir_temp\n    # )\n  }\n}",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#writing-data-to-osf",
    "href": "qmd/file-processing-routines.html#writing-data-to-osf",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.11 Writing Data to OSF",
    "text": "B.11 Writing Data to OSF\n\nCodepatterns &lt;- c(\n  \"control-form\",\n  \"field-form\",\n  \"pilot-form\",\n  \"sleep-diary\"\n)\n\nfor (i in patterns) {\n  normalized_i &lt;- stringr::str_replace_all(i, \"-\", \"_\")\n\n  osf_dir_id &lt;-\n    osf_raw_data_files |&gt;\n    dplyr::filter(name == i) |&gt;\n    dplyr::pull(id) |&gt;\n    osfr::osf_retrieve_file()\n\n  dir_raw_data_i &lt;-\n    paste0(\"dir_raw_data_\", normalized_i) |&gt;\n    get()\n\n  dir_raw_data_i |&gt;\n    lockr::lock_dir(\n      public_key = public_key_path,\n      remove_file = FALSE\n    )\n\n  files_i &lt;-\n    dir_raw_data_i |&gt;\n    fs::dir_ls(type = \"file\") |&gt;\n    stringr::str_subset(\"\\\\.lockr$\")\n\n  # osf_files &lt;-\n  #   paste0(\"osf_raw_data_\", normalized_i, \"_files\") |&gt;\n  #   get() |&gt;\n  #   dplyr::pull(name)\n\n  # setdiff(\n  #   files_i |&gt; basename() |&gt; paste0(\".lockr\"),\n  #   osf_files\n  # )\n\n  osf_dir_id |&gt;\n    osfr::osf_upload(\n      path = files_i,\n      conflicts = \"overwrite\",\n      progress = TRUE\n    )\n}\n\n\n\nCodepatterns &lt;- c(\n  \"actigraphy\",\n  \"sleep-diary\"\n)\n\nfor (i in patterns) {\n  normalized_i &lt;- stringr::str_replace_all(i, \"-\", \"_\")\n\n  osf_dir_id &lt;-\n    osf_processed_data_files |&gt;\n    dplyr::filter(name == i) |&gt;\n    dplyr::pull(id) |&gt;\n    osfr::osf_retrieve_file()\n\n  dir_processed_data_i &lt;-\n    paste0(\"dir_processed_data_\", normalized_i) |&gt;\n    get()\n\n  dir_processed_data_i |&gt;\n    lockr::lock_dir(\n      public_key = public_key_path,\n      remove_file = FALSE\n    )\n\n  files_i &lt;-\n    dir_processed_data_i |&gt;\n    fs::dir_ls(type = \"file\") |&gt;\n    stringr::str_subset(\"sleep-diary\") |&gt;\n    stringr::str_subset(\"\\\\.lockr$\")\n\n  osf_dir_id |&gt;\n    osfr::osf_upload(\n      path = files_i,\n      conflicts = \"overwrite\",\n      progress = TRUE\n    )\n}\n\n\n\nCodedir_bundles |&gt;\n  lockr::lock_dir(\n    public_key = public_key_path,\n    remove_file = FALSE\n  )\n\nfiles_i &lt;-\n  dir_bundles |&gt;\n  fs::dir_ls(type = \"file\") |&gt;\n  stringr::str_subset(\"\\\\.lockr$\")\n\nosf_bundles_id |&gt;\n  osfr::osf_retrieve_node() |&gt;\n  osfr::osf_upload(\n    path = files_i,\n    conflicts = \"overwrite\",\n    progress = TRUE\n  )",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/file-processing-routines.html#delete-files",
    "href": "qmd/file-processing-routines.html#delete-files",
    "title": "Appendix B — Anonymize and Process Files",
    "section": "\nB.12 Delete Files",
    "text": "B.12 Delete Files\n\n\n\n\n\n\nOnly delete files after uploading them to OSF and the Cryptomator vault.\n\n\n\n\nCodefs::dir_delete(dir_temp)",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>B</span>  <span class='chapter-title'>Anonymize and Process Files</span>"
    ]
  },
  {
    "objectID": "qmd/variable-computations.html",
    "href": "qmd/variable-computations.html",
    "title": "Appendix C — Variable Computations",
    "section": "",
    "text": "C.1 Overview\nThis analysis aims to help to calculate the chronotype of a person based on his/her actigraphy record.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>C</span>  <span class='chapter-title'>Variable Computations</span>"
    ]
  },
  {
    "objectID": "qmd/variable-computations.html#setup",
    "href": "qmd/variable-computations.html#setup",
    "title": "Appendix C — Variable Computations",
    "section": "\nC.2 Setup",
    "text": "C.2 Setup\n\nCodelibrary(lubridate)\nlibrary(lubritime) # github.com/danielvartan/lubritime\nlibrary(hms)\nlibrary(mctq)",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>C</span>  <span class='chapter-title'>Variable Computations</span>"
    ]
  },
  {
    "objectID": "qmd/variable-computations.html#compute-the-duration-of-an-interval",
    "href": "qmd/variable-computations.html#compute-the-duration-of-an-interval",
    "title": "Appendix C — Variable Computations",
    "section": "\nC.3 Compute the Duration of an Interval",
    "text": "C.3 Compute the Duration of an Interval\n\nCodetz &lt;- \"America/Sao_Paulo\"\nstart &lt;- dmy_hms(\"01/01/2023 05:00:00\", tz = tz)\nend &lt;- dmy_hms(\"02/07/2023 01:00:00\", tz = tz)\n\n\n\nCodestart |&gt;\n  interval(end, tz = tz) |&gt;\n  as.period()",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>C</span>  <span class='chapter-title'>Variable Computations</span>"
    ]
  },
  {
    "objectID": "qmd/variable-computations.html#compute-chronotype",
    "href": "qmd/variable-computations.html#compute-chronotype",
    "title": "Appendix C — Variable Computations",
    "section": "\nC.4 Compute Chronotype",
    "text": "C.4 Compute Chronotype\nTotal number of workdays and free days.\n\nCodewd &lt;- 6\nfd &lt;- 17\n\n\nFPS on workdays and free days.\n\nCodefps_w &lt;- parse_hms(\"07:01:10\") |&gt; as.duration()\nfps_f &lt;- parse_hms(\"07:24:31\") |&gt; as.duration()\n\n\nHIS on free days.\n\nCodehis_f &lt;- parse_hms(\"01:55:42\")\n\n\nFPS weighted mean.\n\nCodefps_weight_mean &lt;- ((fps_w * wd) + (fps_f * fd)) / (wd + fd)\n\n\nMid-sleep on free days (proxy for chronotype).\n\nCodemsf &lt;- msl(his_f, fps_f)\n\n\nmsf_sc &lt;- msf_sc( msf, fps_w, fps_f, fps_weight_mean, FALSE ) |&gt; round_time()\nmsf_sc ````",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>C</span>  <span class='chapter-title'>Variable Computations</span>"
    ]
  }
]